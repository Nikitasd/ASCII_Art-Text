<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: sys_selftest.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">sys_selftest.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Selftest Source File.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;sys_selftest.h&quot;</code><br />
<code>#include &quot;sys_core.h&quot;</code><br />
<code>#include &quot;sys_pmu.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae96e990763ae7d45bd55ea5a27299a47"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a> (uint32 flag)</td></tr>
<tr class="memdesc:ae96e990763ae7d45bd55ea5a27299a47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Self test fail service routine.  <br /></td></tr>
<tr class="separator:ae96e990763ae7d45bd55ea5a27299a47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f7aaa1d96319ecb5d7b6cec31c56670"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a2f7aaa1d96319ecb5d7b6cec31c56670">ccmSelfCheck</a> (void)</td></tr>
<tr class="memdesc:a2f7aaa1d96319ecb5d7b6cec31c56670"><td class="mdescLeft">&#160;</td><td class="mdescRight">CCM module self check Driver.  <br /></td></tr>
<tr class="separator:a2f7aaa1d96319ecb5d7b6cec31c56670"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3184dfe0846903e1111348942160dfe7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a3184dfe0846903e1111348942160dfe7">memoryInit</a> (uint32 ram)</td></tr>
<tr class="memdesc:a3184dfe0846903e1111348942160dfe7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory Initialization Driver.  <br /></td></tr>
<tr class="separator:a3184dfe0846903e1111348942160dfe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54f7309e862bab7a63c2c176c4b7cee9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a54f7309e862bab7a63c2c176c4b7cee9">stcSelfCheck</a> (void)</td></tr>
<tr class="memdesc:a54f7309e862bab7a63c2c176c4b7cee9"><td class="mdescLeft">&#160;</td><td class="mdescRight">STC module self check Driver.  <br /></td></tr>
<tr class="separator:a54f7309e862bab7a63c2c176c4b7cee9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27cee1191b0027e90cbb9c66983596b9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a27cee1191b0027e90cbb9c66983596b9">cpuSelfTest</a> (uint32 no_of_intervals, uint32 max_timeout, boolean restart_test)</td></tr>
<tr class="memdesc:a27cee1191b0027e90cbb9c66983596b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">CPU self test Driver.  <br /></td></tr>
<tr class="separator:a27cee1191b0027e90cbb9c66983596b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9b7e2d9da2b5166a9ea002d431e54ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#ac9b7e2d9da2b5166a9ea002d431e54ef">pbistSelfCheck</a> (void)</td></tr>
<tr class="memdesc:ac9b7e2d9da2b5166a9ea002d431e54ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">PBIST self test Driver.  <br /></td></tr>
<tr class="separator:ac9b7e2d9da2b5166a9ea002d431e54ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5fcc064d8d51dda635d83235cf37e3e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#ad5fcc064d8d51dda635d83235cf37e3e">pbistRun</a> (uint32 raminfoL, uint32 algomask)</td></tr>
<tr class="memdesc:ad5fcc064d8d51dda635d83235cf37e3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">CPU self test Driver.  <br /></td></tr>
<tr class="separator:ad5fcc064d8d51dda635d83235cf37e3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ea172c81d7549cd8181de098a91b752"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a1ea172c81d7549cd8181de098a91b752">pbistStop</a> (void)</td></tr>
<tr class="memdesc:a1ea172c81d7549cd8181de098a91b752"><td class="mdescLeft">&#160;</td><td class="mdescRight">Routine to stop PBIST test enabled.  <br /></td></tr>
<tr class="separator:a1ea172c81d7549cd8181de098a91b752"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2675f441b1c7bbadd9877cfd586bf959"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a2675f441b1c7bbadd9877cfd586bf959">pbistIsTestCompleted</a> (void)</td></tr>
<tr class="memdesc:a2675f441b1c7bbadd9877cfd586bf959"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks to see if the PBIST test is completed.  <br /></td></tr>
<tr class="separator:a2675f441b1c7bbadd9877cfd586bf959"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a975a794505ddcaf5d1c68e7a229fc8ae"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a975a794505ddcaf5d1c68e7a229fc8ae">pbistIsTestPassed</a> (void)</td></tr>
<tr class="memdesc:a975a794505ddcaf5d1c68e7a229fc8ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks to see if the PBIST test is completed successfully.  <br /></td></tr>
<tr class="separator:a975a794505ddcaf5d1c68e7a229fc8ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3edbda42e27655bb5e9a3d067ab09caf"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a3edbda42e27655bb5e9a3d067ab09caf">pbistPortTestStatus</a> (uint32 port)</td></tr>
<tr class="memdesc:a3edbda42e27655bb5e9a3d067ab09caf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks to see if the PBIST Port test is completed successfully.  <br /></td></tr>
<tr class="separator:a3edbda42e27655bb5e9a3d067ab09caf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a646eb27315f3ce47edde97c563389f76"><td class="memItemLeft" align="right" valign="top">uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a646eb27315f3ce47edde97c563389f76">efcCheck</a> (void)</td></tr>
<tr class="memdesc:a646eb27315f3ce47edde97c563389f76"><td class="mdescLeft">&#160;</td><td class="mdescRight">EFUSE module self check Driver.  <br /></td></tr>
<tr class="separator:a646eb27315f3ce47edde97c563389f76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9973f032c29389602b684d30ea390fad"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a9973f032c29389602b684d30ea390fad">efcStuckZeroTest</a> (void)</td></tr>
<tr class="memdesc:a9973f032c29389602b684d30ea390fad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks to see if the EFUSE Stuck at zero test is completed successfully.  <br /></td></tr>
<tr class="separator:a9973f032c29389602b684d30ea390fad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd6cec31a44e7c8e325a744e9bcbf601"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#afd6cec31a44e7c8e325a744e9bcbf601">efcSelfTest</a> (void)</td></tr>
<tr class="memdesc:afd6cec31a44e7c8e325a744e9bcbf601"><td class="mdescLeft">&#160;</td><td class="mdescRight">EFUSE module self check Driver.  <br /></td></tr>
<tr class="separator:afd6cec31a44e7c8e325a744e9bcbf601"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad44409ae54516ba10303dd5c011f4fa6"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#ad44409ae54516ba10303dd5c011f4fa6">checkefcSelfTest</a> (void)</td></tr>
<tr class="memdesc:ad44409ae54516ba10303dd5c011f4fa6"><td class="mdescLeft">&#160;</td><td class="mdescRight">EFUSE module self check Driver.  <br /></td></tr>
<tr class="separator:ad44409ae54516ba10303dd5c011f4fa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3248a50d5c0516f336b46aa0114ba9be"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a3248a50d5c0516f336b46aa0114ba9be">fmcBus2Check</a> (void)</td></tr>
<tr class="memdesc:a3248a50d5c0516f336b46aa0114ba9be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Self Check Flash Bus2 Interface.  <br /></td></tr>
<tr class="separator:a3248a50d5c0516f336b46aa0114ba9be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a183a0d9f1300394cff2f8fe0aa034d4b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a183a0d9f1300394cff2f8fe0aa034d4b">fmcECCcheck</a> (void)</td></tr>
<tr class="memdesc:a183a0d9f1300394cff2f8fe0aa034d4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check Flash ECC Single Bit and multi Bit errors detection logic.  <br /></td></tr>
<tr class="separator:a183a0d9f1300394cff2f8fe0aa034d4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4cbf907aa7750c1c3601ed191842dd9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#ad4cbf907aa7750c1c3601ed191842dd9">checkB0RAMECC</a> (void)</td></tr>
<tr class="memdesc:ad4cbf907aa7750c1c3601ed191842dd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check TCRAM1 ECC error detection logic.  <br /></td></tr>
<tr class="separator:ad4cbf907aa7750c1c3601ed191842dd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5e986484f3be2af5cd3a7595ba346c2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#ab5e986484f3be2af5cd3a7595ba346c2">checkB1RAMECC</a> (void)</td></tr>
<tr class="memdesc:ab5e986484f3be2af5cd3a7595ba346c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check TCRAM2 ECC error detection logic.  <br /></td></tr>
<tr class="separator:ab5e986484f3be2af5cd3a7595ba346c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02bb81fd1b585ba20d4c6e7ed427a4ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a02bb81fd1b585ba20d4c6e7ed427a4ac">checkFlashECC</a> (void)</td></tr>
<tr class="memdesc:a02bb81fd1b585ba20d4c6e7ed427a4ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check Flash ECC error detection logic.  <br /></td></tr>
<tr class="separator:a02bb81fd1b585ba20d4c6e7ed427a4ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58597c65615a9a0f05d48135ad48c0d6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a58597c65615a9a0f05d48135ad48c0d6">custom_dabort</a> (void)</td></tr>
<tr class="memdesc:a58597c65615a9a0f05d48135ad48c0d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Custom Data abort routine for the application.  <br /></td></tr>
<tr class="separator:a58597c65615a9a0f05d48135ad48c0d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c1518db428c8ab63a56048cadfb4e6e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a2c1518db428c8ab63a56048cadfb4e6e">stcSelfCheckFail</a> (void)</td></tr>
<tr class="memdesc:a2c1518db428c8ab63a56048cadfb4e6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">STC Self test check fail service routine.  <br /></td></tr>
<tr class="separator:a2c1518db428c8ab63a56048cadfb4e6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a932e8fff5749ae8038f0fbbe9029ec44"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a932e8fff5749ae8038f0fbbe9029ec44">cpuSelfTestFail</a> (void)</td></tr>
<tr class="memdesc:a932e8fff5749ae8038f0fbbe9029ec44"><td class="mdescLeft">&#160;</td><td class="mdescRight">CPU Self test check fail service routine.  <br /></td></tr>
<tr class="separator:a932e8fff5749ae8038f0fbbe9029ec44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7297818ebd5ffd62488091aa9633bf9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#af7297818ebd5ffd62488091aa9633bf9">vimParityCheck</a> (void)</td></tr>
<tr class="memdesc:af7297818ebd5ffd62488091aa9633bf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Routine to check VIM RAM parity error detection and signaling mechanism.  <br /></td></tr>
<tr class="separator:af7297818ebd5ffd62488091aa9633bf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66f658578435dc4d3984c76a3d2ed959"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a66f658578435dc4d3984c76a3d2ed959">het1ParityCheck</a> (void)</td></tr>
<tr class="memdesc:a66f658578435dc4d3984c76a3d2ed959"><td class="mdescLeft">&#160;</td><td class="mdescRight">Routine to check HET1 RAM parity error detection and signaling mechanism.  <br /></td></tr>
<tr class="separator:a66f658578435dc4d3984c76a3d2ed959"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f69665c7b7abb003cfb4a314ce1e943"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a5f69665c7b7abb003cfb4a314ce1e943">htu1ParityCheck</a> (void)</td></tr>
<tr class="memdesc:a5f69665c7b7abb003cfb4a314ce1e943"><td class="mdescLeft">&#160;</td><td class="mdescRight">Routine to check HTU1 RAM parity error detection and signaling mechanism.  <br /></td></tr>
<tr class="separator:a5f69665c7b7abb003cfb4a314ce1e943"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0267c576250cc80c1ffafae379fcd937"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a0267c576250cc80c1ffafae379fcd937">adc1ParityCheck</a> (void)</td></tr>
<tr class="memdesc:a0267c576250cc80c1ffafae379fcd937"><td class="mdescLeft">&#160;</td><td class="mdescRight">Routine to check ADC1 RAM parity error detection and signaling mechanism.  <br /></td></tr>
<tr class="separator:a0267c576250cc80c1ffafae379fcd937"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a034e78d72a2a9231d27d78256d3d194e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a034e78d72a2a9231d27d78256d3d194e">can1ParityCheck</a> (void)</td></tr>
<tr class="memdesc:a034e78d72a2a9231d27d78256d3d194e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Routine to check CAN1 RAM parity error detection and signaling mechanism.  <br /></td></tr>
<tr class="separator:a034e78d72a2a9231d27d78256d3d194e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b4bb222e016b734e702da6a1ec5ab8a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a0b4bb222e016b734e702da6a1ec5ab8a">can2ParityCheck</a> (void)</td></tr>
<tr class="memdesc:a0b4bb222e016b734e702da6a1ec5ab8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Routine to check CAN2 RAM parity error detection and signaling mechanism.  <br /></td></tr>
<tr class="separator:a0b4bb222e016b734e702da6a1ec5ab8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a050e0c2257b541e651eb35d32f10c98d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a050e0c2257b541e651eb35d32f10c98d">mibspi1ParityCheck</a> (void)</td></tr>
<tr class="memdesc:a050e0c2257b541e651eb35d32f10c98d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Routine to check MIBSPI1 RAM parity error detection and signaling mechanism.  <br /></td></tr>
<tr class="separator:a050e0c2257b541e651eb35d32f10c98d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a421594cf13d3b5ca42435c5a5604721c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a421594cf13d3b5ca42435c5a5604721c">checkRAMECC</a> (void)</td></tr>
<tr class="memdesc:a421594cf13d3b5ca42435c5a5604721c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check TCRAM ECC error detection logic.  <br /></td></tr>
<tr class="separator:a421594cf13d3b5ca42435c5a5604721c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a012696be6fb67f7debf6f1ff6f9e3331"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a012696be6fb67f7debf6f1ff6f9e3331">checkClockMonitor</a> (void)</td></tr>
<tr class="memdesc:a012696be6fb67f7debf6f1ff6f9e3331"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check clock monitor failure detection logic.  <br /></td></tr>
<tr class="separator:a012696be6fb67f7debf6f1ff6f9e3331"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a239d7544f8bb38fc73056467dbeb9e7c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a239d7544f8bb38fc73056467dbeb9e7c">checkFlashEEPROMECC</a> (void)</td></tr>
<tr class="memdesc:a239d7544f8bb38fc73056467dbeb9e7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check Flash EEPROM ECC error detection logic.  <br /></td></tr>
<tr class="separator:a239d7544f8bb38fc73056467dbeb9e7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08d6355b5f4052d4ef5d2d995032ba22"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a08d6355b5f4052d4ef5d2d995032ba22">checkPLL1Slip</a> (void)</td></tr>
<tr class="memdesc:a08d6355b5f4052d4ef5d2d995032ba22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check PLL1 Slip detection logic.  <br /></td></tr>
<tr class="separator:a08d6355b5f4052d4ef5d2d995032ba22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85eb55d96d4a491e84a930dbea0e89a5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a85eb55d96d4a491e84a930dbea0e89a5">checkRAMAddrParity</a> (void)</td></tr>
<tr class="memdesc:a85eb55d96d4a491e84a930dbea0e89a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check TCRAM Address parity error detection and signaling mechanism.  <br /></td></tr>
<tr class="separator:a85eb55d96d4a491e84a930dbea0e89a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e5bbec947e5db02df2bda4ba2230677"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a7e5bbec947e5db02df2bda4ba2230677">checkRAMUERRTest</a> (void)</td></tr>
<tr class="memdesc:a7e5bbec947e5db02df2bda4ba2230677"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run RAM test.  <br /></td></tr>
<tr class="separator:a7e5bbec947e5db02df2bda4ba2230677"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa035d17d1ecb2d6bb095a5c0b44a2143"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#aa035d17d1ecb2d6bb095a5c0b44a2143">fmcBus1ParityCheck</a> (void)</td></tr>
<tr class="separator:aa035d17d1ecb2d6bb095a5c0b44a2143"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc8a571e336b788da775b5279597c9f9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#adc8a571e336b788da775b5279597c9f9">pbistFail</a> (void)</td></tr>
<tr class="separator:adc8a571e336b788da775b5279597c9f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1edb8a500b4ad0f3e87b93245856a937"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a1edb8a500b4ad0f3e87b93245856a937">pbistGetConfigValue</a> (pbist_config_reg_t *config_reg, config_value_type_t type)</td></tr>
<tr class="memdesc:a1edb8a500b4ad0f3e87b93245856a937"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the initial or current values of the configuration registers.  <br /></td></tr>
<tr class="separator:a1edb8a500b4ad0f3e87b93245856a937"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb360fa06ebe94d06978d25371ed2140"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#afb360fa06ebe94d06978d25371ed2140">stcGetConfigValue</a> (stc_config_reg_t *config_reg, config_value_type_t type)</td></tr>
<tr class="memdesc:afb360fa06ebe94d06978d25371ed2140"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the initial or current values of the configuration registers.  <br /></td></tr>
<tr class="separator:afb360fa06ebe94d06978d25371ed2140"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac76ed167d7b4b27eedea0eb37de6acc2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#ac76ed167d7b4b27eedea0eb37de6acc2">efcGetConfigValue</a> (efc_config_reg_t *config_reg, config_value_type_t type)</td></tr>
<tr class="memdesc:ac76ed167d7b4b27eedea0eb37de6acc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the initial or current values of the configuration registers.  <br /></td></tr>
<tr class="separator:ac76ed167d7b4b27eedea0eb37de6acc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab288da76a8169e1a92586cd06079358f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#ab288da76a8169e1a92586cd06079358f">ccmr4GetConfigValue</a> (ccmr4_config_reg_t *config_reg, config_value_type_t type)</td></tr>
<tr class="memdesc:ab288da76a8169e1a92586cd06079358f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the initial or current values of the configuration registers.  <br /></td></tr>
<tr class="separator:ab288da76a8169e1a92586cd06079358f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f3b71a00b6347cb5f7f6eb922c36c9e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a1f3b71a00b6347cb5f7f6eb922c36c9e">errata_PBIST_4</a> (void)</td></tr>
<tr class="memdesc:a1f3b71a00b6347cb5f7f6eb922c36c9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Workaround for the Errata PBIST#4.  <br /></td></tr>
<tr class="separator:a1f3b71a00b6347cb5f7f6eb922c36c9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9ecd48548d7a3d98d5dcc44d1e7ca51"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#af9ecd48548d7a3d98d5dcc44d1e7ca51">enableParity</a> (void)</td></tr>
<tr class="memdesc:af9ecd48548d7a3d98d5dcc44d1e7ca51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable peripheral RAM parity.  <br /></td></tr>
<tr class="separator:af9ecd48548d7a3d98d5dcc44d1e7ca51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15b66d583493adf7dc0ce8e3a89f00f5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys__selftest_8c.html#a15b66d583493adf7dc0ce8e3a89f00f5">disableParity</a> (void)</td></tr>
<tr class="memdesc:a15b66d583493adf7dc0ce8e3a89f00f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable peripheral RAM parity.  <br /></td></tr>
<tr class="separator:a15b66d583493adf7dc0ce8e3a89f00f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Selftest Source File. </p>
<dl class="section date"><dt>Date</dt><dd>11-Dec-2018 </dd></dl>
<dl class="section version"><dt>Version</dt><dd>04.07.01</dd></dl>
<p>This file contains:</p><ul>
<li>Selftest API's </li>
</ul>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a0267c576250cc80c1ffafae379fcd937" name="a0267c576250cc80c1ffafae379fcd937"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0267c576250cc80c1ffafae379fcd937">&#9670;&#160;</a></span>adc1ParityCheck()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adc1ParityCheck </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Routine to check ADC1 RAM parity error detection and signaling mechanism. </p>
<p>Routine to check ADC1 RAM parity error detection and signaling mechanism </p>
<div class="fragment"><div class="line"><span class="lineno"> 1361</span>{</div>
<div class="line"><span class="lineno"> 1362</span>    <span class="keyword">volatile</span> uint32 adcramread = 0U;</div>
<div class="line"><span class="lineno"> 1363</span>    uint32 adcparcr_bk = adcREG1-&gt;PARCR;</div>
<div class="line"><span class="lineno"> 1364</span> </div>
<div class="line"><span class="lineno"> 1365</span><span class="comment">/* USER CODE BEGIN (61) */</span></div>
<div class="line"><span class="lineno"> 1366</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno"> 1367</span> </div>
<div class="line"><span class="lineno"> 1368</span>    <span class="comment">/* Set the TEST bit in the PARCR and enable parity checking */</span></div>
<div class="line"><span class="lineno"> 1369</span>    adcREG1-&gt;PARCR = 0x10AU;</div>
<div class="line"><span class="lineno"> 1370</span> </div>
<div class="line"><span class="lineno"> 1371</span>    <span class="comment">/* Invert the parity bits inside the ADC1 RAM&#39;s first location */</span></div>
<div class="line"><span class="lineno"> 1372</span>    adcPARRAM1 = ~(adcPARRAM1);</div>
<div class="line"><span class="lineno"> 1373</span> </div>
<div class="line"><span class="lineno"> 1374</span>    <span class="comment">/* clear the TEST bit */</span></div>
<div class="line"><span class="lineno"> 1375</span>    adcREG1-&gt;PARCR = 0x00AU;</div>
<div class="line"><span class="lineno"> 1376</span> </div>
<div class="line"><span class="lineno"> 1377</span>    <span class="comment">/* This read is expected to trigger a parity error */</span></div>
<div class="line"><span class="lineno"> 1378</span>    adcramread = adcRAM1;</div>
<div class="line"><span class="lineno"> 1379</span> </div>
<div class="line"><span class="lineno"> 1380</span>    <span class="comment">/* Check for ESM group1 channel 19 to be flagged */</span></div>
<div class="line"><span class="lineno"> 1381</span>    <span class="keywordflow">if</span> ((esmREG-&gt;SR1[0U] &amp; 0x80000U) ==0U)</div>
<div class="line"><span class="lineno"> 1382</span>    {</div>
<div class="line"><span class="lineno"> 1383</span>        <span class="comment">/* no ADC1 RAM parity error was flagged to ESM */</span></div>
<div class="line"><span class="lineno"> 1384</span>        <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(ADC1PARITYCHECK_FAIL1);</div>
<div class="line"><span class="lineno"> 1385</span>    }</div>
<div class="line"><span class="lineno"> 1386</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1387</span>    {</div>
<div class="line"><span class="lineno"> 1388</span>        <span class="comment">/* clear ADC1 RAM parity error flag */</span></div>
<div class="line"><span class="lineno"> 1389</span>        esmREG-&gt;SR1[0U] = 0x80000U;</div>
<div class="line"><span class="lineno"> 1390</span> </div>
<div class="line"><span class="lineno"> 1391</span>        <span class="comment">/* Set the TEST bit in the PARCR and enable parity checking */</span></div>
<div class="line"><span class="lineno"> 1392</span>        adcREG1-&gt;PARCR = 0x10AU;</div>
<div class="line"><span class="lineno"> 1393</span> </div>
<div class="line"><span class="lineno"> 1394</span>        <span class="comment">/* Revert back the parity bits to correct data */</span></div>
<div class="line"><span class="lineno"> 1395</span>        adcPARRAM1 = ~(adcPARRAM1);</div>
<div class="line"><span class="lineno"> 1396</span>    }</div>
<div class="line"><span class="lineno"> 1397</span> </div>
<div class="line"><span class="lineno"> 1398</span>    <span class="comment">/* Restore parity control register */</span></div>
<div class="line"><span class="lineno"> 1399</span>    adcREG1-&gt;PARCR = adcparcr_bk;</div>
<div class="line"><span class="lineno"> 1400</span> </div>
<div class="line"><span class="lineno"> 1401</span><span class="comment">/* USER CODE BEGIN (62) */</span></div>
<div class="line"><span class="lineno"> 1402</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno"> 1403</span>}</div>
<div class="ttc" id="asys__selftest_8c_html_ae96e990763ae7d45bd55ea5a27299a47"><div class="ttname"><a href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a></div><div class="ttdeci">void selftestFailNotification(uint32 flag)</div><div class="ttdoc">Self test fail service routine.</div><div class="ttdef"><b>Definition:</b> sys_selftest.c:58</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a034e78d72a2a9231d27d78256d3d194e" name="a034e78d72a2a9231d27d78256d3d194e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a034e78d72a2a9231d27d78256d3d194e">&#9670;&#160;</a></span>can1ParityCheck()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void can1ParityCheck </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Routine to check CAN1 RAM parity error detection and signaling mechanism. </p>
<p>Routine to check CAN1 RAM parity error detection and signaling mechanism </p>
<div class="fragment"><div class="line"><span class="lineno"> 1419</span>{</div>
<div class="line"><span class="lineno"> 1420</span>    <span class="keyword">volatile</span> uint32 canread = 0U;</div>
<div class="line"><span class="lineno"> 1421</span>    <span class="comment">/*SAFETYMCUSW 134 S MR:12.2 &lt;APPROVED&gt; &quot;LDRA Tool issue&quot; */</span></div>
<div class="line"><span class="lineno"> 1422</span>    uint32 canctl_bk =  canREG1-&gt;CTL;</div>
<div class="line"><span class="lineno"> 1423</span> </div>
<div class="line"><span class="lineno"> 1424</span><span class="comment">/* USER CODE BEGIN (65) */</span></div>
<div class="line"><span class="lineno"> 1425</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno"> 1426</span> </div>
<div class="line"><span class="lineno"> 1427</span>    <span class="comment">/* Disable parity, init mode, TEST mode */</span></div>
<div class="line"><span class="lineno"> 1428</span>    canREG1-&gt;CTL = 0x00001481U;</div>
<div class="line"><span class="lineno"> 1429</span> </div>
<div class="line"><span class="lineno"> 1430</span>    <span class="comment">/* Enable RAM Direct Access mode */</span></div>
<div class="line"><span class="lineno"> 1431</span>    canREG1-&gt;TEST = 0x00000200U;</div>
<div class="line"><span class="lineno"> 1432</span> </div>
<div class="line"><span class="lineno"> 1433</span>    <span class="comment">/* flip the parity bit */</span></div>
<div class="line"><span class="lineno"> 1434</span>    canPARRAM1 ^= 0x00001000U;</div>
<div class="line"><span class="lineno"> 1435</span> </div>
<div class="line"><span class="lineno"> 1436</span>    <span class="comment">/* Enable parity, disable init, still TEST mode */</span></div>
<div class="line"><span class="lineno"> 1437</span>    canREG1-&gt;CTL = 0x00002880U;</div>
<div class="line"><span class="lineno"> 1438</span> </div>
<div class="line"><span class="lineno"> 1439</span>    <span class="comment">/* Read location with parity error */</span></div>
<div class="line"><span class="lineno"> 1440</span>    canread = canRAM1;</div>
<div class="line"><span class="lineno"> 1441</span> </div>
<div class="line"><span class="lineno"> 1442</span>    <span class="comment">/* check if ESM group1 channel 21 is flagged */</span></div>
<div class="line"><span class="lineno"> 1443</span>    <span class="keywordflow">if</span> ((esmREG-&gt;SR1[0U] &amp; 0x00200000U) == 0U)</div>
<div class="line"><span class="lineno"> 1444</span>    {</div>
<div class="line"><span class="lineno"> 1445</span>        <span class="comment">/* No DCAN1 RAM parity error was flagged to ESM */</span></div>
<div class="line"><span class="lineno"> 1446</span>        <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(CAN1PARITYCHECK_FAIL1);</div>
<div class="line"><span class="lineno"> 1447</span>    }</div>
<div class="line"><span class="lineno"> 1448</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1449</span>    {</div>
<div class="line"><span class="lineno"> 1450</span>        <span class="comment">/* clear ESM group1 channel 21 flag */</span></div>
<div class="line"><span class="lineno"> 1451</span>        esmREG-&gt;SR1[0U] = 0x00200000U;</div>
<div class="line"><span class="lineno"> 1452</span> </div>
<div class="line"><span class="lineno"> 1453</span>        <span class="comment">/* Disable parity, init mode, TEST mode */</span></div>
<div class="line"><span class="lineno"> 1454</span>        canREG1-&gt;CTL = 0x00001481U;</div>
<div class="line"><span class="lineno"> 1455</span> </div>
<div class="line"><span class="lineno"> 1456</span>        <span class="comment">/* Revert back to correct data, flip bit 0 of the parity location */</span></div>
<div class="line"><span class="lineno"> 1457</span>        canPARRAM1 ^= 0x00001000U;</div>
<div class="line"><span class="lineno"> 1458</span>    }</div>
<div class="line"><span class="lineno"> 1459</span> </div>
<div class="line"><span class="lineno"> 1460</span>    <span class="comment">/* Disable RAM Direct Access mode */</span></div>
<div class="line"><span class="lineno"> 1461</span>    canREG1-&gt;TEST = 0x00000000U;</div>
<div class="line"><span class="lineno"> 1462</span> </div>
<div class="line"><span class="lineno"> 1463</span>    <span class="comment">/* Restore CTL register */</span></div>
<div class="line"><span class="lineno"> 1464</span>    canREG1-&gt;CTL = canctl_bk;</div>
<div class="line"><span class="lineno"> 1465</span> </div>
<div class="line"><span class="lineno"> 1466</span>    <span class="comment">/* Read Error and Status register to clear Parity Error bit */</span></div>
<div class="line"><span class="lineno"> 1467</span>    canread = canREG1-&gt;ES;</div>
<div class="line"><span class="lineno"> 1468</span> </div>
<div class="line"><span class="lineno"> 1469</span><span class="comment">/* USER CODE BEGIN (66) */</span></div>
<div class="line"><span class="lineno"> 1470</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno"> 1471</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0b4bb222e016b734e702da6a1ec5ab8a" name="a0b4bb222e016b734e702da6a1ec5ab8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b4bb222e016b734e702da6a1ec5ab8a">&#9670;&#160;</a></span>can2ParityCheck()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void can2ParityCheck </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Routine to check CAN2 RAM parity error detection and signaling mechanism. </p>
<p>Routine to check CAN2 RAM parity error detection and signaling mechanism </p>
<div class="fragment"><div class="line"><span class="lineno"> 1483</span>{</div>
<div class="line"><span class="lineno"> 1484</span>    <span class="keyword">volatile</span> uint32 canread = 0U;</div>
<div class="line"><span class="lineno"> 1485</span>    <span class="comment">/*SAFETYMCUSW 134 S MR:12.2 &lt;APPROVED&gt; &quot;LDRA Tool issue&quot; */</span></div>
<div class="line"><span class="lineno"> 1486</span>    uint32 canctl_bk = canREG2-&gt;CTL;</div>
<div class="line"><span class="lineno"> 1487</span> </div>
<div class="line"><span class="lineno"> 1488</span><span class="comment">/* USER CODE BEGIN (67) */</span></div>
<div class="line"><span class="lineno"> 1489</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno"> 1490</span> </div>
<div class="line"><span class="lineno"> 1491</span>    <span class="comment">/* Disable parity, init mode, TEST mode */</span></div>
<div class="line"><span class="lineno"> 1492</span>    canREG2-&gt;CTL = 0x00001481U;</div>
<div class="line"><span class="lineno"> 1493</span> </div>
<div class="line"><span class="lineno"> 1494</span>    <span class="comment">/* Enable RAM Direct Access mode */</span></div>
<div class="line"><span class="lineno"> 1495</span>    canREG2-&gt;TEST = 0x00000200U;</div>
<div class="line"><span class="lineno"> 1496</span> </div>
<div class="line"><span class="lineno"> 1497</span>    <span class="comment">/* flip the parity bit */</span></div>
<div class="line"><span class="lineno"> 1498</span>    canPARRAM2 ^= 0x00001000U;</div>
<div class="line"><span class="lineno"> 1499</span> </div>
<div class="line"><span class="lineno"> 1500</span>    <span class="comment">/* Enable parity, disable init, still TEST mode */</span></div>
<div class="line"><span class="lineno"> 1501</span>    canREG2-&gt;CTL = 0x00002880U;</div>
<div class="line"><span class="lineno"> 1502</span> </div>
<div class="line"><span class="lineno"> 1503</span>    <span class="comment">/* Read location with parity error */</span></div>
<div class="line"><span class="lineno"> 1504</span>    canread = canRAM2;</div>
<div class="line"><span class="lineno"> 1505</span> </div>
<div class="line"><span class="lineno"> 1506</span>    <span class="comment">/* check if ESM group1 channel 23 is flagged */</span></div>
<div class="line"><span class="lineno"> 1507</span>    <span class="keywordflow">if</span> ((esmREG-&gt;SR1[0U] &amp; 0x00800000U) == 0U)</div>
<div class="line"><span class="lineno"> 1508</span>    {</div>
<div class="line"><span class="lineno"> 1509</span>        <span class="comment">/* No DCAN2 RAM parity error was flagged to ESM */</span></div>
<div class="line"><span class="lineno"> 1510</span>        <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(CAN2PARITYCHECK_FAIL1);</div>
<div class="line"><span class="lineno"> 1511</span>    }</div>
<div class="line"><span class="lineno"> 1512</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1513</span>    {</div>
<div class="line"><span class="lineno"> 1514</span>        <span class="comment">/* clear ESM group1 channel 23 flag */</span></div>
<div class="line"><span class="lineno"> 1515</span>        esmREG-&gt;SR1[0U] = 0x00800000U;</div>
<div class="line"><span class="lineno"> 1516</span> </div>
<div class="line"><span class="lineno"> 1517</span>        <span class="comment">/* Disable parity, init mode, TEST mode */</span></div>
<div class="line"><span class="lineno"> 1518</span>        canREG2-&gt;CTL = 0x00001481U;</div>
<div class="line"><span class="lineno"> 1519</span> </div>
<div class="line"><span class="lineno"> 1520</span>        <span class="comment">/* Revert back to correct data, flip bit 0 of the parity location */</span></div>
<div class="line"><span class="lineno"> 1521</span>        canPARRAM2 ^= 0x00001000U;</div>
<div class="line"><span class="lineno"> 1522</span>    }</div>
<div class="line"><span class="lineno"> 1523</span> </div>
<div class="line"><span class="lineno"> 1524</span>    <span class="comment">/* Disable RAM Direct Access mode */</span></div>
<div class="line"><span class="lineno"> 1525</span>    canREG2-&gt;TEST = 0x00000000U;</div>
<div class="line"><span class="lineno"> 1526</span> </div>
<div class="line"><span class="lineno"> 1527</span>    <span class="comment">/* disable TEST mode */</span></div>
<div class="line"><span class="lineno"> 1528</span>    canREG2-&gt;CTL = canctl_bk;</div>
<div class="line"><span class="lineno"> 1529</span> </div>
<div class="line"><span class="lineno"> 1530</span>    <span class="comment">/* Read Error and Status register to clear Parity Error bit */</span></div>
<div class="line"><span class="lineno"> 1531</span>    canread = canREG2-&gt;ES;</div>
<div class="line"><span class="lineno"> 1532</span> </div>
<div class="line"><span class="lineno"> 1533</span><span class="comment">/* USER CODE BEGIN (68) */</span></div>
<div class="line"><span class="lineno"> 1534</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno"> 1535</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab288da76a8169e1a92586cd06079358f" name="ab288da76a8169e1a92586cd06079358f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab288da76a8169e1a92586cd06079358f">&#9670;&#160;</a></span>ccmr4GetConfigValue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ccmr4GetConfigValue </td>
          <td>(</td>
          <td class="paramtype">ccmr4_config_reg_t *&#160;</td>
          <td class="paramname"><em>config_reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">config_value_type_t&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the initial or current values of the configuration registers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*config_reg</td><td>pointer to the struct to which the initial or current value of the configuration registers need to be stored </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>whether initial or current value of the configuration registers need to be stored<ul>
<li>InitialValue: initial value of the configuration registers will be stored in the struct pointed by config_reg</li>
<li>CurrentValue: initial value of the configuration registers will be stored in the struct pointed by config_reg</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<p>This function will copy the initial or current value (depending on the parameter 'type') of the configuration registers to the struct pointed by config_reg </p>
<div class="fragment"><div class="line"><span class="lineno"> 2308</span>{</div>
<div class="line"><span class="lineno"> 2309</span>    <span class="keywordflow">if</span> (type == InitialValue)</div>
<div class="line"><span class="lineno"> 2310</span>    {</div>
<div class="line"><span class="lineno"> 2311</span>        config_reg-&gt;CONFIG_CCMKEYR = CCMR4_CCMKEYR_CONFIGVALUE;</div>
<div class="line"><span class="lineno"> 2312</span>    }</div>
<div class="line"><span class="lineno"> 2313</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2314</span>    {</div>
<div class="line"><span class="lineno"> 2315</span>    <span class="comment">/*SAFETYMCUSW 134 S MR:12.2 &lt;APPROVED&gt; &quot;LDRA Tool issue&quot; */</span></div>
<div class="line"><span class="lineno"> 2316</span>        config_reg-&gt;CONFIG_CCMKEYR = CCMKEYR;</div>
<div class="line"><span class="lineno"> 2317</span>    }</div>
<div class="line"><span class="lineno"> 2318</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2f7aaa1d96319ecb5d7b6cec31c56670" name="a2f7aaa1d96319ecb5d7b6cec31c56670"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f7aaa1d96319ecb5d7b6cec31c56670">&#9670;&#160;</a></span>ccmSelfCheck()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ccmSelfCheck </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>CCM module self check Driver. </p>
<p>This function self checks the CCM module. </p>
<div class="fragment"><div class="line"><span class="lineno">   78</span>{</div>
<div class="line"><span class="lineno">   79</span><span class="comment">/* USER CODE BEGIN (3) */</span></div>
<div class="line"><span class="lineno">   80</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">   81</span> </div>
<div class="line"><span class="lineno">   82</span>    <span class="comment">/* Run a diagnostic check on the CCM-R4F module */</span></div>
<div class="line"><span class="lineno">   83</span>    <span class="comment">/* This step ensures that the CCM-R4F can actually indicate an error */</span></div>
<div class="line"><span class="lineno">   84</span> </div>
<div class="line"><span class="lineno">   85</span>    <span class="comment">/* Configure CCM in self-test mode */</span></div>
<div class="line"><span class="lineno">   86</span>    CCMKEYR = 0x6U;</div>
<div class="line"><span class="lineno">   87</span>    <span class="comment">/* Wait for CCM self-test to complete */</span></div>
<div class="line"><span class="lineno">   88</span>    <span class="comment">/*SAFETYMCUSW 28 D MR:NA &lt;APPROVED&gt; &quot;Hardware status bit read check&quot; */</span></div>
<div class="line"><span class="lineno">   89</span>    <span class="keywordflow">while</span> ((CCMSR &amp; 0x100U) != 0x100U)</div>
<div class="line"><span class="lineno">   90</span>    {</div>
<div class="line"><span class="lineno">   91</span>    }<span class="comment">/* Wait */</span></div>
<div class="line"><span class="lineno">   92</span> </div>
<div class="line"><span class="lineno">   93</span><span class="comment">/* USER CODE BEGIN (4) */</span></div>
<div class="line"><span class="lineno">   94</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">   95</span> </div>
<div class="line"><span class="lineno">   96</span>    <span class="comment">/* Check if there was an error during the self-test */</span></div>
<div class="line"><span class="lineno">   97</span>    <span class="keywordflow">if</span> ((CCMSR &amp; 0x1U) == 0x1U)</div>
<div class="line"><span class="lineno">   98</span>    {</div>
<div class="line"><span class="lineno">   99</span>        <span class="comment">/* STE is set */</span></div>
<div class="line"><span class="lineno">  100</span>        <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(CCMSELFCHECK_FAIL1);</div>
<div class="line"><span class="lineno">  101</span>    }</div>
<div class="line"><span class="lineno">  102</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  103</span>    {</div>
<div class="line"><span class="lineno">  104</span>        <span class="comment">/* Check CCM-R4 self-test error flag by itself (without compare error) */</span></div>
<div class="line"><span class="lineno">  105</span>        <span class="keywordflow">if</span> ((esmREG-&gt;SR1[0U] &amp; 0x80000000U) == 0x80000000U)</div>
<div class="line"><span class="lineno">  106</span>        {</div>
<div class="line"><span class="lineno">  107</span>            <span class="comment">/* ESM flag is not set */</span></div>
<div class="line"><span class="lineno">  108</span>            <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(CCMSELFCHECK_FAIL2);</div>
<div class="line"><span class="lineno">  109</span>        }</div>
<div class="line"><span class="lineno">  110</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  111</span>        {</div>
<div class="line"><span class="lineno">  112</span>            <span class="comment">/* Configure CCM in error-forcing mode */</span></div>
<div class="line"><span class="lineno">  113</span>            CCMKEYR = 0x9U;</div>
<div class="line"><span class="lineno">  114</span> </div>
<div class="line"><span class="lineno">  115</span>            <span class="comment">/* Wait till error-forcing is completed. */</span></div>
<div class="line"><span class="lineno">  116</span>            <span class="comment">/*SAFETYMCUSW 28 D MR:NA &lt;APPROVED&gt; &quot;Hardware status bit read check&quot; */</span></div>
<div class="line"><span class="lineno">  117</span>            <span class="keywordflow">while</span> (CCMKEYR != 0U)</div>
<div class="line"><span class="lineno">  118</span>            {</div>
<div class="line"><span class="lineno">  119</span>            }<span class="comment">/* Wait */</span></div>
<div class="line"><span class="lineno">  120</span> </div>
<div class="line"><span class="lineno">  121</span>            <span class="comment">/* check if compare error flag is set */</span></div>
<div class="line"><span class="lineno">  122</span>            <span class="keywordflow">if</span> ((esmREG-&gt;SR1[1U] &amp; 0x4U) != 0x4U)</div>
<div class="line"><span class="lineno">  123</span>            {</div>
<div class="line"><span class="lineno">  124</span>                <span class="comment">/* ESM flag is not set */</span></div>
<div class="line"><span class="lineno">  125</span>                <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(CCMSELFCHECK_FAIL3);</div>
<div class="line"><span class="lineno">  126</span>            }</div>
<div class="line"><span class="lineno">  127</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  128</span>            {</div>
<div class="line"><span class="lineno">  129</span>                <span class="comment">/* Check FIQIVEC to ESM High Interrupt flag is set */</span></div>
<div class="line"><span class="lineno">  130</span>                <span class="keywordflow">if</span>((vimREG-&gt;FIQINDEX &amp; 0x000000FFU) != 1U)</div>
<div class="line"><span class="lineno">  131</span>                {</div>
<div class="line"><span class="lineno">  132</span>                   <span class="comment">/* ESM High Interrupt flag is not set in VIM*/</span></div>
<div class="line"><span class="lineno">  133</span>                   <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(CCMSELFCHECK_FAIL4);</div>
<div class="line"><span class="lineno">  134</span>                }</div>
<div class="line"><span class="lineno">  135</span> </div>
<div class="line"><span class="lineno">  136</span>                <span class="comment">/* clear ESM group2 channel 2 flag */</span></div>
<div class="line"><span class="lineno">  137</span>                esmREG-&gt;SR1[1U] = 0x4U;</div>
<div class="line"><span class="lineno">  138</span> </div>
<div class="line"><span class="lineno">  139</span>                <span class="comment">/* clear ESM group2 shadow status flag */</span></div>
<div class="line"><span class="lineno">  140</span>                esmREG-&gt;SSR2 = 0x4U;</div>
<div class="line"><span class="lineno">  141</span> </div>
<div class="line"><span class="lineno">  142</span>                <span class="comment">/* ESM self-test error needs to also be cleared */</span></div>
<div class="line"><span class="lineno">  143</span>                esmREG-&gt;SR1[0U] = 0x80000000U;</div>
<div class="line"><span class="lineno">  144</span> </div>
<div class="line"><span class="lineno">  145</span>                <span class="comment">/* The nERROR pin will become inactive once the LTC counter expires */</span></div>
<div class="line"><span class="lineno">  146</span>                esmREG-&gt;EKR = 0x5U;</div>
<div class="line"><span class="lineno">  147</span> </div>
<div class="line"><span class="lineno">  148</span>                <span class="comment">/* Configure CCM in selftest error-forcing mode */</span></div>
<div class="line"><span class="lineno">  149</span>                CCMKEYR = 0xFU;</div>
<div class="line"><span class="lineno">  150</span> </div>
<div class="line"><span class="lineno">  151</span>                <span class="comment">/* Wait till selftest error-forcing is completed. */</span></div>
<div class="line"><span class="lineno">  152</span>                <span class="comment">/*SAFETYMCUSW 28 D MR:NA &lt;APPROVED&gt; &quot;Hardware status bit read check&quot; */</span></div>
<div class="line"><span class="lineno">  153</span>                <span class="keywordflow">while</span> (CCMKEYR != 0U)</div>
<div class="line"><span class="lineno">  154</span>                {</div>
<div class="line"><span class="lineno">  155</span>                }<span class="comment">/* Wait */</span></div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span>                <span class="keywordflow">if</span>((esmREG-&gt;SR1[0U] &amp; 0x80000000U) != 0x80000000U)</div>
<div class="line"><span class="lineno">  158</span>                {</div>
<div class="line"><span class="lineno">  159</span>                    <span class="comment">/* ESM flag not set */</span></div>
<div class="line"><span class="lineno">  160</span>                    <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(CCMSELFCHECK_FAIL2);</div>
<div class="line"><span class="lineno">  161</span>                }</div>
<div class="line"><span class="lineno">  162</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  163</span>                {</div>
<div class="line"><span class="lineno">  164</span>                    <span class="comment">/* clear ESM flag */</span></div>
<div class="line"><span class="lineno">  165</span>                    esmREG-&gt;SR1[0U] = 0x80000000U;</div>
<div class="line"><span class="lineno">  166</span>                }</div>
<div class="line"><span class="lineno">  167</span>            }</div>
<div class="line"><span class="lineno">  168</span>        }</div>
<div class="line"><span class="lineno">  169</span>    }</div>
<div class="line"><span class="lineno">  170</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad4cbf907aa7750c1c3601ed191842dd9" name="ad4cbf907aa7750c1c3601ed191842dd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4cbf907aa7750c1c3601ed191842dd9">&#9670;&#160;</a></span>checkB0RAMECC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void checkB0RAMECC </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check TCRAM1 ECC error detection logic. </p>
<p>This function checks TCRAM1 ECC error detection logic. </p>
<div class="fragment"><div class="line"><span class="lineno">  848</span>{</div>
<div class="line"><span class="lineno">  849</span>    <span class="keyword">volatile</span> uint64 ramread = 0U;</div>
<div class="line"><span class="lineno">  850</span>    <span class="keyword">volatile</span> uint32 regread = 0U;</div>
<div class="line"><span class="lineno">  851</span>    uint32 tcram1ErrStat, tcram2ErrStat = 0U;</div>
<div class="line"><span class="lineno">  852</span>    </div>
<div class="line"><span class="lineno">  853</span>    uint64 tcramA1_bk = tcramA1bit;</div>
<div class="line"><span class="lineno">  854</span>    uint64 tcramA2_bk = tcramA2bit;</div>
<div class="line"><span class="lineno">  855</span>    <span class="keyword">volatile</span> uint32 i;</div>
<div class="line"><span class="lineno">  856</span><span class="comment">/* USER CODE BEGIN (36) */</span></div>
<div class="line"><span class="lineno">  857</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  858</span> </div>
<div class="line"><span class="lineno">  859</span>    <span class="comment">/* enable writes to ECC RAM, enable ECC error response */</span></div>
<div class="line"><span class="lineno">  860</span>    tcram1REG-&gt;RAMCTRL = 0x0005010AU;</div>
<div class="line"><span class="lineno">  861</span>    tcram2REG-&gt;RAMCTRL = 0x0005010AU;</div>
<div class="line"><span class="lineno">  862</span> </div>
<div class="line"><span class="lineno">  863</span>    <span class="comment">/* the first 1-bit error will cause an error response */</span></div>
<div class="line"><span class="lineno">  864</span>    tcram1REG-&gt;RAMTHRESHOLD = 0x1U;</div>
<div class="line"><span class="lineno">  865</span>    tcram2REG-&gt;RAMTHRESHOLD = 0x1U;</div>
<div class="line"><span class="lineno">  866</span> </div>
<div class="line"><span class="lineno">  867</span>    <span class="comment">/* allow SERR to be reported to ESM */</span></div>
<div class="line"><span class="lineno">  868</span>    tcram1REG-&gt;RAMINTCTRL = 0x1U;</div>
<div class="line"><span class="lineno">  869</span>    tcram2REG-&gt;RAMINTCTRL = 0x1U;</div>
<div class="line"><span class="lineno">  870</span> </div>
<div class="line"><span class="lineno">  871</span>    <span class="comment">/* cause a 1-bit ECC error */</span></div>
<div class="line"><span class="lineno">  872</span>    _coreDisableRamEcc_();</div>
<div class="line"><span class="lineno">  873</span>    tcramA1bitError ^= 0x1U;</div>
<div class="line"><span class="lineno">  874</span>    _coreEnableRamEcc_();</div>
<div class="line"><span class="lineno">  875</span> </div>
<div class="line"><span class="lineno">  876</span>    <span class="comment">/* disable writes to ECC RAM */</span></div>
<div class="line"><span class="lineno">  877</span>    tcram1REG-&gt;RAMCTRL = 0x0005000AU;</div>
<div class="line"><span class="lineno">  878</span>    tcram2REG-&gt;RAMCTRL = 0x0005000AU;</div>
<div class="line"><span class="lineno">  879</span> </div>
<div class="line"><span class="lineno">  880</span>    <span class="comment">/* read from location with 1-bit ECC error */</span></div>
<div class="line"><span class="lineno">  881</span>    ramread = tcramA1bit;</div>
<div class="line"><span class="lineno">  882</span> </div>
<div class="line"><span class="lineno">  883</span>    <span class="comment">/* Check for error status */</span></div>
<div class="line"><span class="lineno">  884</span>    tcram1ErrStat = tcram1REG-&gt;RAMERRSTATUS &amp; 0x1U;</div>
<div class="line"><span class="lineno">  885</span>    tcram2ErrStat = tcram2REG-&gt;RAMERRSTATUS &amp; 0x1U;</div>
<div class="line"><span class="lineno">  886</span>    <span class="comment">/*SAFETYMCUSW 139 S MR:13.7  &lt;APPROVED&gt; &quot;LDRA Tool issue&quot; */</span></div>
<div class="line"><span class="lineno">  887</span>    <span class="comment">/*SAFETYMCUSW 139 S MR:13.7  &lt;APPROVED&gt; &quot;LDRA Tool issue&quot; */</span></div>
<div class="line"><span class="lineno">  888</span>    <span class="keywordflow">if</span>((tcram1ErrStat == 0U) &amp;&amp; (tcram2ErrStat == 0U))</div>
<div class="line"><span class="lineno">  889</span>    {</div>
<div class="line"><span class="lineno">  890</span>        <span class="comment">/* TCRAM module does not reflect 1-bit error reported by CPU */</span></div>
<div class="line"><span class="lineno">  891</span>        <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(CHECKB0RAMECC_FAIL1);</div>
<div class="line"><span class="lineno">  892</span>    }</div>
<div class="line"><span class="lineno">  893</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  894</span>    {</div>
<div class="line"><span class="lineno">  895</span>        <span class="comment">/* clear SERR flag */</span></div>
<div class="line"><span class="lineno">  896</span>        tcram1REG-&gt;RAMERRSTATUS = 0x1U;</div>
<div class="line"><span class="lineno">  897</span>        tcram2REG-&gt;RAMERRSTATUS = 0x1U;</div>
<div class="line"><span class="lineno">  898</span> </div>
<div class="line"><span class="lineno">  899</span>        <span class="comment">/* clear status flags for ESM group1 channels 26 and 28 */</span></div>
<div class="line"><span class="lineno">  900</span>        esmREG-&gt;SR1[0U] = 0x14000000U;</div>
<div class="line"><span class="lineno">  901</span>    }</div>
<div class="line"><span class="lineno">  902</span> </div>
<div class="line"><span class="lineno">  903</span>    <span class="comment">/* enable writes to ECC RAM, enable ECC error response */</span></div>
<div class="line"><span class="lineno">  904</span>    tcram1REG-&gt;RAMCTRL = 0x0005010AU;</div>
<div class="line"><span class="lineno">  905</span>    tcram2REG-&gt;RAMCTRL = 0x0005010AU;</div>
<div class="line"><span class="lineno">  906</span> </div>
<div class="line"><span class="lineno">  907</span>    <span class="comment">/* cause a 2-bit ECC error */</span></div>
<div class="line"><span class="lineno">  908</span>    _coreDisableRamEcc_();</div>
<div class="line"><span class="lineno">  909</span>    tcramA2bitError ^= 0x3U;</div>
<div class="line"><span class="lineno">  910</span>    _coreEnableRamEcc_();</div>
<div class="line"><span class="lineno">  911</span> </div>
<div class="line"><span class="lineno">  912</span>    <span class="comment">/* read from location with 2-bit ECC error this will cause a data abort to be generated */</span></div>
<div class="line"><span class="lineno">  913</span>    ramread = tcramA2bit;</div>
<div class="line"><span class="lineno">  914</span> </div>
<div class="line"><span class="lineno">  915</span>    <span class="comment">/* delay before restoring the ram value */</span></div>
<div class="line"><span class="lineno">  916</span>    <span class="comment">/*SAFETYMCUSW 134 S MR:12.2 &lt;APPROVED&gt; &quot;Wait for few clock cycles (Value of i not used)&quot; */</span></div>
<div class="line"><span class="lineno">  917</span>    <span class="comment">/*SAFETYMCUSW 134 S MR:12.2 &lt;APPROVED&gt; &quot;Wait for few clock cycles (Value of i not used)&quot; */</span></div>
<div class="line"><span class="lineno">  918</span>    <span class="keywordflow">for</span>(i=0U;i&lt;10U;i++)</div>
<div class="line"><span class="lineno">  919</span>    {</div>
<div class="line"><span class="lineno">  920</span>    }<span class="comment">/* Wait */</span></div>
<div class="line"><span class="lineno">  921</span> </div>
<div class="line"><span class="lineno">  922</span>    regread = tcram1REG-&gt;RAMUERRADDR;</div>
<div class="line"><span class="lineno">  923</span>    regread = tcram2REG-&gt;RAMUERRADDR;</div>
<div class="line"><span class="lineno">  924</span> </div>
<div class="line"><span class="lineno">  925</span>    <span class="comment">/* disable writes to ECC RAM */</span></div>
<div class="line"><span class="lineno">  926</span>    tcram1REG-&gt;RAMCTRL = 0x0005000AU;</div>
<div class="line"><span class="lineno">  927</span>    tcram2REG-&gt;RAMCTRL = 0x0005000AU;</div>
<div class="line"><span class="lineno">  928</span> </div>
<div class="line"><span class="lineno">  929</span>    <span class="comment">/* Compute correct ECC */</span></div>
<div class="line"><span class="lineno">  930</span>    tcramA1bit = tcramA1_bk;</div>
<div class="line"><span class="lineno">  931</span>    tcramA2bit = tcramA2_bk;</div>
<div class="line"><span class="lineno">  932</span> </div>
<div class="line"><span class="lineno">  933</span><span class="comment">/* USER CODE BEGIN (37) */</span></div>
<div class="line"><span class="lineno">  934</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  935</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab5e986484f3be2af5cd3a7595ba346c2" name="ab5e986484f3be2af5cd3a7595ba346c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5e986484f3be2af5cd3a7595ba346c2">&#9670;&#160;</a></span>checkB1RAMECC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void checkB1RAMECC </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check TCRAM2 ECC error detection logic. </p>
<p>This function checks TCRAM2 ECC error detection logic. </p>
<div class="fragment"><div class="line"><span class="lineno">  946</span>{</div>
<div class="line"><span class="lineno">  947</span>    <span class="keyword">volatile</span> uint64 ramread = 0U;</div>
<div class="line"><span class="lineno">  948</span>    <span class="keyword">volatile</span> uint32 regread = 0U;</div>
<div class="line"><span class="lineno">  949</span>    uint32 tcram1ErrStat, tcram2ErrStat = 0U;</div>
<div class="line"><span class="lineno">  950</span> </div>
<div class="line"><span class="lineno">  951</span>    uint64 tcramB1_bk = tcramB1bit;</div>
<div class="line"><span class="lineno">  952</span>    uint64 tcramB2_bk = tcramB2bit;</div>
<div class="line"><span class="lineno">  953</span>    <span class="keyword">volatile</span> uint32 i;</div>
<div class="line"><span class="lineno">  954</span><span class="comment">/* USER CODE BEGIN (38) */</span></div>
<div class="line"><span class="lineno">  955</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  956</span> </div>
<div class="line"><span class="lineno">  957</span>    <span class="comment">/* enable writes to ECC RAM, enable ECC error response */</span></div>
<div class="line"><span class="lineno">  958</span>    tcram1REG-&gt;RAMCTRL = 0x0005010AU;</div>
<div class="line"><span class="lineno">  959</span>    tcram2REG-&gt;RAMCTRL = 0x0005010AU;</div>
<div class="line"><span class="lineno">  960</span> </div>
<div class="line"><span class="lineno">  961</span>    <span class="comment">/* the first 1-bit error will cause an error response */</span></div>
<div class="line"><span class="lineno">  962</span>    tcram1REG-&gt;RAMTHRESHOLD = 0x1U;</div>
<div class="line"><span class="lineno">  963</span>    tcram2REG-&gt;RAMTHRESHOLD = 0x1U;</div>
<div class="line"><span class="lineno">  964</span> </div>
<div class="line"><span class="lineno">  965</span>    <span class="comment">/* allow SERR to be reported to ESM */</span></div>
<div class="line"><span class="lineno">  966</span>    tcram1REG-&gt;RAMINTCTRL = 0x1U;</div>
<div class="line"><span class="lineno">  967</span>    tcram2REG-&gt;RAMINTCTRL = 0x1U;</div>
<div class="line"><span class="lineno">  968</span> </div>
<div class="line"><span class="lineno">  969</span>    <span class="comment">/* cause a 1-bit ECC error */</span></div>
<div class="line"><span class="lineno">  970</span>    _coreDisableRamEcc_();</div>
<div class="line"><span class="lineno">  971</span>    tcramB1bitError ^= 0x1U;</div>
<div class="line"><span class="lineno">  972</span>    _coreEnableRamEcc_();</div>
<div class="line"><span class="lineno">  973</span> </div>
<div class="line"><span class="lineno">  974</span>    <span class="comment">/* disable writes to ECC RAM */</span></div>
<div class="line"><span class="lineno">  975</span>    tcram1REG-&gt;RAMCTRL = 0x0005000AU;</div>
<div class="line"><span class="lineno">  976</span>    tcram2REG-&gt;RAMCTRL = 0x0005000AU;</div>
<div class="line"><span class="lineno">  977</span> </div>
<div class="line"><span class="lineno">  978</span>    <span class="comment">/* read from location with 1-bit ECC error */</span></div>
<div class="line"><span class="lineno">  979</span>    ramread = tcramB1bit;</div>
<div class="line"><span class="lineno">  980</span> </div>
<div class="line"><span class="lineno">  981</span>    <span class="comment">/* Check for error status */</span></div>
<div class="line"><span class="lineno">  982</span>    tcram1ErrStat = tcram1REG-&gt;RAMERRSTATUS &amp; 0x1U;</div>
<div class="line"><span class="lineno">  983</span>    tcram2ErrStat = tcram2REG-&gt;RAMERRSTATUS &amp; 0x1U;</div>
<div class="line"><span class="lineno">  984</span>    <span class="comment">/*SAFETYMCUSW 139 S MR:13.7  &lt;APPROVED&gt; &quot;LDRA Tool issue&quot; */</span></div>
<div class="line"><span class="lineno">  985</span>    <span class="comment">/*SAFETYMCUSW 139 S MR:13.7  &lt;APPROVED&gt; &quot;LDRA Tool issue&quot; */</span></div>
<div class="line"><span class="lineno">  986</span>    <span class="keywordflow">if</span>((tcram1ErrStat == 0U) &amp;&amp; (tcram2ErrStat == 0U))</div>
<div class="line"><span class="lineno">  987</span>    {</div>
<div class="line"><span class="lineno">  988</span>        <span class="comment">/* TCRAM module does not reflect 1-bit error reported by CPU */</span></div>
<div class="line"><span class="lineno">  989</span>        <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(CHECKB1RAMECC_FAIL1);</div>
<div class="line"><span class="lineno">  990</span>    }</div>
<div class="line"><span class="lineno">  991</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  992</span>    {</div>
<div class="line"><span class="lineno">  993</span>        <span class="comment">/* clear SERR flag */</span></div>
<div class="line"><span class="lineno">  994</span>        tcram1REG-&gt;RAMERRSTATUS = 0x1U;</div>
<div class="line"><span class="lineno">  995</span>        tcram2REG-&gt;RAMERRSTATUS = 0x1U;</div>
<div class="line"><span class="lineno">  996</span> </div>
<div class="line"><span class="lineno">  997</span>        <span class="comment">/* clear status flags for ESM group1 channels 26 and 28 */</span></div>
<div class="line"><span class="lineno">  998</span>        esmREG-&gt;SR1[0U] = 0x14000000U;</div>
<div class="line"><span class="lineno">  999</span>    }</div>
<div class="line"><span class="lineno"> 1000</span> </div>
<div class="line"><span class="lineno"> 1001</span>    <span class="comment">/* enable writes to ECC RAM, enable ECC error response */</span></div>
<div class="line"><span class="lineno"> 1002</span>    tcram1REG-&gt;RAMCTRL = 0x0005010AU;</div>
<div class="line"><span class="lineno"> 1003</span>    tcram2REG-&gt;RAMCTRL = 0x0005010AU;</div>
<div class="line"><span class="lineno"> 1004</span> </div>
<div class="line"><span class="lineno"> 1005</span>    <span class="comment">/* cause a 2-bit ECC error */</span></div>
<div class="line"><span class="lineno"> 1006</span>    _coreDisableRamEcc_();</div>
<div class="line"><span class="lineno"> 1007</span>    tcramB2bitError ^= 0x3U;</div>
<div class="line"><span class="lineno"> 1008</span>    _coreEnableRamEcc_();</div>
<div class="line"><span class="lineno"> 1009</span> </div>
<div class="line"><span class="lineno"> 1010</span>    <span class="comment">/* read from location with 2-bit ECC error this will cause a data abort to be generated */</span></div>
<div class="line"><span class="lineno"> 1011</span>    ramread = tcramB2bit;</div>
<div class="line"><span class="lineno"> 1012</span> </div>
<div class="line"><span class="lineno"> 1013</span>    <span class="comment">/* delay before restoring the ram value */</span></div>
<div class="line"><span class="lineno"> 1014</span>    <span class="comment">/*SAFETYMCUSW 134 S MR:12.2 &lt;APPROVED&gt; &quot;Wait for few clock cycles (Value of i not used)&quot; */</span></div>
<div class="line"><span class="lineno"> 1015</span>    <span class="comment">/*SAFETYMCUSW 134 S MR:12.2 &lt;APPROVED&gt; &quot;Wait for few clock cycles (Value of i not used)&quot; */</span></div>
<div class="line"><span class="lineno"> 1016</span>    <span class="keywordflow">for</span>(i=0U;i&lt;10U;i++)</div>
<div class="line"><span class="lineno"> 1017</span>    {</div>
<div class="line"><span class="lineno"> 1018</span>    }<span class="comment">/* Wait */</span></div>
<div class="line"><span class="lineno"> 1019</span> </div>
<div class="line"><span class="lineno"> 1020</span>    regread = tcram1REG-&gt;RAMUERRADDR;</div>
<div class="line"><span class="lineno"> 1021</span>    regread = tcram2REG-&gt;RAMUERRADDR;</div>
<div class="line"><span class="lineno"> 1022</span> </div>
<div class="line"><span class="lineno"> 1023</span>    <span class="comment">/* disable writes to ECC RAM */</span></div>
<div class="line"><span class="lineno"> 1024</span>    tcram1REG-&gt;RAMCTRL = 0x0005000AU;</div>
<div class="line"><span class="lineno"> 1025</span>    tcram2REG-&gt;RAMCTRL = 0x0005000AU;</div>
<div class="line"><span class="lineno"> 1026</span> </div>
<div class="line"><span class="lineno"> 1027</span>    <span class="comment">/* Compute correct ECC */</span></div>
<div class="line"><span class="lineno"> 1028</span>    tcramB1bit = tcramB1_bk;</div>
<div class="line"><span class="lineno"> 1029</span>    tcramB2bit = tcramB2_bk;</div>
<div class="line"><span class="lineno"> 1030</span> </div>
<div class="line"><span class="lineno"> 1031</span><span class="comment">/* USER CODE BEGIN (39) */</span></div>
<div class="line"><span class="lineno"> 1032</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno"> 1033</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a012696be6fb67f7debf6f1ff6f9e3331" name="a012696be6fb67f7debf6f1ff6f9e3331"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a012696be6fb67f7debf6f1ff6f9e3331">&#9670;&#160;</a></span>checkClockMonitor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void checkClockMonitor </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check clock monitor failure detection logic. </p>
<p>This function checks clock monitor failure detection logic. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1721</span>{</div>
<div class="line"><span class="lineno"> 1722</span>    uint32 ghvsrc_bk;</div>
<div class="line"><span class="lineno"> 1723</span> </div>
<div class="line"><span class="lineno"> 1724</span>    <span class="comment">/* Enable clock monitor range detection circuitry */</span></div>
<div class="line"><span class="lineno"> 1725</span>    systemREG1-&gt;CLKTEST |= 0x03000000U;</div>
<div class="line"><span class="lineno"> 1726</span> </div>
<div class="line"><span class="lineno"> 1727</span>    <span class="comment">/* Backup register GHVSRC */</span></div>
<div class="line"><span class="lineno"> 1728</span>    ghvsrc_bk = systemREG1-&gt;GHVSRC;</div>
<div class="line"><span class="lineno"> 1729</span> </div>
<div class="line"><span class="lineno"> 1730</span>    <span class="comment">/* Switch all clock domains to HF LPO */</span></div>
<div class="line"><span class="lineno"> 1731</span>    systemREG1-&gt;GHVSRC = 0x05050005U;</div>
<div class="line"><span class="lineno"> 1732</span> </div>
<div class="line"><span class="lineno"> 1733</span>    <span class="comment">/* Disable oscillator to cause a oscillator fail */</span></div>
<div class="line"><span class="lineno"> 1734</span>    systemREG1-&gt;CSDISSET = 0x1U;</div>
<div class="line"><span class="lineno"> 1735</span> </div>
<div class="line"><span class="lineno"> 1736</span>    <span class="comment">/* Wait till oscillator fail flag is set */</span></div>
<div class="line"><span class="lineno"> 1737</span>    <span class="comment">/*SAFETYMCUSW 28 D MR:NA &lt;APPROVED&gt; &quot;Hardware status bit read check&quot; */</span></div>
<div class="line"><span class="lineno"> 1738</span>    <span class="keywordflow">while</span>((systemREG1-&gt;GBLSTAT &amp; 0x1U) == 0U)</div>
<div class="line"><span class="lineno"> 1739</span>    {</div>
<div class="line"><span class="lineno"> 1740</span>    } <span class="comment">/* Wait */</span></div>
<div class="line"><span class="lineno"> 1741</span> </div>
<div class="line"><span class="lineno"> 1742</span>    <span class="keywordflow">if</span>((esmREG-&gt;SR1[0U] &amp; 0x800U) != 0x800U)</div>
<div class="line"><span class="lineno"> 1743</span>    {</div>
<div class="line"><span class="lineno"> 1744</span>        <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(CHECKCLOCKMONITOR_FAIL1);</div>
<div class="line"><span class="lineno"> 1745</span>    }</div>
<div class="line"><span class="lineno"> 1746</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1747</span>    {</div>
<div class="line"><span class="lineno"> 1748</span>        <span class="comment">/* Clear ESM flag */</span></div>
<div class="line"><span class="lineno"> 1749</span>        esmREG-&gt;SR1[0U] = 0x800U;</div>
<div class="line"><span class="lineno"> 1750</span> </div>
<div class="line"><span class="lineno"> 1751</span>        <span class="comment">/* Disable clock monitor range detection circuitry */</span></div>
<div class="line"><span class="lineno"> 1752</span>        systemREG1-&gt;CLKTEST &amp;= ~(0x03000000U);</div>
<div class="line"><span class="lineno"> 1753</span> </div>
<div class="line"><span class="lineno"> 1754</span>        <span class="comment">/* Enable oscillator */</span></div>
<div class="line"><span class="lineno"> 1755</span>        systemREG1-&gt;CSDISCLR = 0x1U;</div>
<div class="line"><span class="lineno"> 1756</span> </div>
<div class="line"><span class="lineno"> 1757</span>        <span class="comment">/* Wait until oscillator is enabled */</span></div>
<div class="line"><span class="lineno"> 1758</span>        <span class="comment">/*SAFETYMCUSW 28 D MR:NA &lt;APPROVED&gt; &quot;Hardware status bit read check&quot; */</span></div>
<div class="line"><span class="lineno"> 1759</span>        <span class="keywordflow">while</span>((systemREG1-&gt;CSVSTAT &amp; 0x3U) == 0U)</div>
<div class="line"><span class="lineno"> 1760</span>        {</div>
<div class="line"><span class="lineno"> 1761</span>        } <span class="comment">/* Wait */</span></div>
<div class="line"><span class="lineno"> 1762</span> </div>
<div class="line"><span class="lineno"> 1763</span>        <span class="comment">/* Clear oscillator fail flag and PLL slip flag if any*/</span></div>
<div class="line"><span class="lineno"> 1764</span>        systemREG1-&gt;GBLSTAT = 0x301U;</div>
<div class="line"><span class="lineno"> 1765</span> </div>
<div class="line"><span class="lineno"> 1766</span>        <span class="comment">/* Switch back all clock domains */</span></div>
<div class="line"><span class="lineno"> 1767</span>        systemREG1-&gt;GHVSRC = ghvsrc_bk;</div>
<div class="line"><span class="lineno"> 1768</span>    }</div>
<div class="line"><span class="lineno"> 1769</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad44409ae54516ba10303dd5c011f4fa6" name="ad44409ae54516ba10303dd5c011f4fa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad44409ae54516ba10303dd5c011f4fa6">&#9670;&#160;</a></span>checkefcSelfTest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean checkefcSelfTest </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>EFUSE module self check Driver. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns TRUE if EFC Selftest was a PASS, else FALSE</dd></dl>
<p>This function returns the status of efcSelfTest. Note: This function can be called only after calling efcSelfTest </p>
<div class="fragment"><div class="line"><span class="lineno">  718</span>{</div>
<div class="line"><span class="lineno">  719</span><span class="comment">/* USER CODE BEGIN (31) */</span></div>
<div class="line"><span class="lineno">  720</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  721</span>    <span class="keywordtype">boolean</span> result = FALSE;</div>
<div class="line"><span class="lineno">  722</span> </div>
<div class="line"><span class="lineno">  723</span>    uint32 EFC_PINS, EFC_ERROR;</div>
<div class="line"><span class="lineno">  724</span>    uint32 esmCh40Stat, esmCh41Stat = 0U;</div>
<div class="line"><span class="lineno">  725</span> </div>
<div class="line"><span class="lineno">  726</span>    <span class="comment">/* wait until EFC self-test is done */</span></div>
<div class="line"><span class="lineno">  727</span>    <span class="comment">/*SAFETYMCUSW 28 D MR:NA &lt;APPROVED&gt; &quot;Hardware status bit read check&quot; */</span></div>
<div class="line"><span class="lineno">  728</span>    <span class="keywordflow">while</span>((efcREG-&gt;PINS &amp; EFC_SELF_TEST_DONE) == 0U)</div>
<div class="line"><span class="lineno">  729</span>    {</div>
<div class="line"><span class="lineno">  730</span>    }<span class="comment">/* Wait */</span></div>
<div class="line"><span class="lineno">  731</span> </div>
<div class="line"><span class="lineno">  732</span>    <span class="comment">/* check if EFC self-test error occurred */</span></div>
<div class="line"><span class="lineno">  733</span>    EFC_PINS = efcREG-&gt;PINS;</div>
<div class="line"><span class="lineno">  734</span>    EFC_ERROR = efcREG-&gt;ERROR;</div>
<div class="line"><span class="lineno">  735</span>    <span class="keywordflow">if</span>(((EFC_PINS &amp; EFC_SELF_TEST_ERROR) == 0U) &amp;&amp; ((EFC_ERROR &amp; 0x1FU) == 0U))</div>
<div class="line"><span class="lineno">  736</span>    {</div>
<div class="line"><span class="lineno">  737</span>        <span class="comment">/* check if EFC self-test error is set */</span></div>
<div class="line"><span class="lineno">  738</span>        esmCh40Stat = esmREG-&gt;SR4[0U] &amp; 0x100U;</div>
<div class="line"><span class="lineno">  739</span>        esmCh41Stat = esmREG-&gt;SR4[0U] &amp; 0x200U;</div>
<div class="line"><span class="lineno">  740</span>        <span class="keywordflow">if</span> ((esmCh40Stat == 0U) &amp;&amp; (esmCh41Stat == 0U))</div>
<div class="line"><span class="lineno">  741</span>        {</div>
<div class="line"><span class="lineno">  742</span>            result = TRUE;</div>
<div class="line"><span class="lineno">  743</span>        }</div>
<div class="line"><span class="lineno">  744</span>    }</div>
<div class="line"><span class="lineno">  745</span>    <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno">  746</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a02bb81fd1b585ba20d4c6e7ed427a4ac" name="a02bb81fd1b585ba20d4c6e7ed427a4ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02bb81fd1b585ba20d4c6e7ed427a4ac">&#9670;&#160;</a></span>checkFlashECC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void checkFlashECC </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check Flash ECC error detection logic. </p>
<p>This function checks Flash ECC error detection logic. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1044</span>{</div>
<div class="line"><span class="lineno"> 1045</span>    <span class="comment">/* Routine to check operation of ECC logic inside CPU for accesses to program flash */</span></div>
<div class="line"><span class="lineno"> 1046</span>    <span class="keyword">volatile</span> uint32 flashread = 0U;</div>
<div class="line"><span class="lineno"> 1047</span> </div>
<div class="line"><span class="lineno"> 1048</span><span class="comment">/* USER CODE BEGIN (40) */</span></div>
<div class="line"><span class="lineno"> 1049</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno"> 1050</span> </div>
<div class="line"><span class="lineno"> 1051</span>    <span class="comment">/* Flash Module ECC Response enabled */</span></div>
<div class="line"><span class="lineno"> 1052</span>    flashWREG-&gt;FEDACCTRL1 = 0x000A060AU;</div>
<div class="line"><span class="lineno"> 1053</span> </div>
<div class="line"><span class="lineno"> 1054</span>    <span class="comment">/* Enable diagnostic mode and select diag mode 7 */</span></div>
<div class="line"><span class="lineno"> 1055</span>    flashWREG-&gt;FDIAGCTRL = 0x00050007U;</div>
<div class="line"><span class="lineno"> 1056</span> </div>
<div class="line"><span class="lineno"> 1057</span>    <span class="comment">/* Select ECC diagnostic mode, single-bit to be corrupted */</span></div>
<div class="line"><span class="lineno"> 1058</span>    flashWREG-&gt;FPAROVR = 0x00005A01U;</div>
<div class="line"><span class="lineno"> 1059</span> </div>
<div class="line"><span class="lineno"> 1060</span>    <span class="comment">/* Set the trigger for the diagnostic mode */</span></div>
<div class="line"><span class="lineno"> 1061</span>    flashWREG-&gt;FDIAGCTRL |= 0x01000000U;</div>
<div class="line"><span class="lineno"> 1062</span> </div>
<div class="line"><span class="lineno"> 1063</span>    <span class="comment">/* read a flash location from the mirrored memory map */</span></div>
<div class="line"><span class="lineno"> 1064</span>    flashread = flashBadECC1;</div>
<div class="line"><span class="lineno"> 1065</span> </div>
<div class="line"><span class="lineno"> 1066</span>    <span class="comment">/* disable diagnostic mode */</span></div>
<div class="line"><span class="lineno"> 1067</span>    flashWREG-&gt;FDIAGCTRL = 0x000A0007U;</div>
<div class="line"><span class="lineno"> 1068</span> </div>
<div class="line"><span class="lineno"> 1069</span>    <span class="comment">/* this will have caused a single-bit error to be generated and corrected by CPU */</span></div>
<div class="line"><span class="lineno"> 1070</span>    <span class="comment">/* single-bit error not captured in flash module */</span></div>
<div class="line"><span class="lineno"> 1071</span>    <span class="comment">/*SAFETYMCUSW 139 S MR:13.7 &lt;APPROVED&gt; &quot;Hardware status bit read check&quot; */</span></div>
<div class="line"><span class="lineno"> 1072</span>    <span class="keywordflow">if</span> ((flashWREG-&gt;FEDACSTATUS &amp; 0x2U) == 0U)</div>
<div class="line"><span class="lineno"> 1073</span>    {</div>
<div class="line"><span class="lineno"> 1074</span>        <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(CHECKFLASHECC_FAIL1);</div>
<div class="line"><span class="lineno"> 1075</span>    }</div>
<div class="line"><span class="lineno"> 1076</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1077</span>    {</div>
<div class="line"><span class="lineno"> 1078</span>        <span class="comment">/* clear single-bit error flag */</span></div>
<div class="line"><span class="lineno"> 1079</span>        flashWREG-&gt;FEDACSTATUS = 0x2U;</div>
<div class="line"><span class="lineno"> 1080</span> </div>
<div class="line"><span class="lineno"> 1081</span>        <span class="comment">/* clear ESM flag */</span></div>
<div class="line"><span class="lineno"> 1082</span>        esmREG-&gt;SR1[0U] = 0x40U;</div>
<div class="line"><span class="lineno"> 1083</span> </div>
<div class="line"><span class="lineno"> 1084</span>        <span class="comment">/* Enable diagnostic mode and select diag mode 7 */</span></div>
<div class="line"><span class="lineno"> 1085</span>        flashWREG-&gt;FDIAGCTRL = 0x00050007U;</div>
<div class="line"><span class="lineno"> 1086</span> </div>
<div class="line"><span class="lineno"> 1087</span>        <span class="comment">/* Select ECC diagnostic mode, two bits of ECC to be corrupted */</span></div>
<div class="line"><span class="lineno"> 1088</span>        flashWREG-&gt;FPAROVR = 0x00005A03U;</div>
<div class="line"><span class="lineno"> 1089</span> </div>
<div class="line"><span class="lineno"> 1090</span>        <span class="comment">/* Set the trigger for the diagnostic mode */</span></div>
<div class="line"><span class="lineno"> 1091</span>        flashWREG-&gt;FDIAGCTRL |= 0x01000000U;</div>
<div class="line"><span class="lineno"> 1092</span> </div>
<div class="line"><span class="lineno"> 1093</span>        <span class="comment">/* read from flash location from mirrored memory map this will cause a data abort */</span></div>
<div class="line"><span class="lineno"> 1094</span>        flashread = flashBadECC2;</div>
<div class="line"><span class="lineno"> 1095</span> </div>
<div class="line"><span class="lineno"> 1096</span>        <span class="comment">/* Read FUNCERRADD register */</span></div>
<div class="line"><span class="lineno"> 1097</span>        flashread = flashWREG-&gt;FUNCERRADD;</div>
<div class="line"><span class="lineno"> 1098</span> </div>
<div class="line"><span class="lineno"> 1099</span>        <span class="comment">/* disable diagnostic mode */</span></div>
<div class="line"><span class="lineno"> 1100</span>        flashWREG-&gt;FDIAGCTRL = 0x000A0007U;</div>
<div class="line"><span class="lineno"> 1101</span>    }</div>
<div class="line"><span class="lineno"> 1102</span> </div>
<div class="line"><span class="lineno"> 1103</span><span class="comment">/* USER CODE BEGIN (41) */</span></div>
<div class="line"><span class="lineno"> 1104</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno"> 1105</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a239d7544f8bb38fc73056467dbeb9e7c" name="a239d7544f8bb38fc73056467dbeb9e7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a239d7544f8bb38fc73056467dbeb9e7c">&#9670;&#160;</a></span>checkFlashEEPROMECC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void checkFlashEEPROMECC </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check Flash EEPROM ECC error detection logic. </p>
<p>This function checks Flash EEPROM ECC error detection logic. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1780</span>{</div>
<div class="line"><span class="lineno"> 1781</span>    uint32 ecc;</div>
<div class="line"><span class="lineno"> 1782</span>    <span class="keyword">volatile</span> uint32 regread;</div>
<div class="line"><span class="lineno"> 1783</span> </div>
<div class="line"><span class="lineno"> 1784</span>    <span class="comment">/* Set Single Error Correction Threshold as 1 */</span></div>
<div class="line"><span class="lineno"> 1785</span>    flashWREG-&gt;EECTRL2 |= 1U;</div>
<div class="line"><span class="lineno"> 1786</span> </div>
<div class="line"><span class="lineno"> 1787</span>    <span class="comment">/* Enable EEPROM Emulation Error Profiling */</span></div>
<div class="line"><span class="lineno"> 1788</span>    flashWREG-&gt;EECTRL1 |= 0x00000100U;</div>
<div class="line"><span class="lineno"> 1789</span> </div>
<div class="line"><span class="lineno"> 1790</span>    <span class="comment">/* Load FEMU_XX regs in order to generate ECC */</span></div>
<div class="line"><span class="lineno"> 1791</span>    flashWREG-&gt;FEMUADDR = 0xF0200000U;</div>
<div class="line"><span class="lineno"> 1792</span>    flashWREG-&gt;FEMUDMSW = 0U;</div>
<div class="line"><span class="lineno"> 1793</span>    flashWREG-&gt;FEMUDLSW = 0U;</div>
<div class="line"><span class="lineno"> 1794</span> </div>
<div class="line"><span class="lineno"> 1795</span>    <span class="comment">/* ECC for the correct data*/</span></div>
<div class="line"><span class="lineno"> 1796</span>    ecc = flashWREG-&gt;FEMUECC;</div>
<div class="line"><span class="lineno"> 1797</span> </div>
<div class="line"><span class="lineno"> 1798</span>    <span class="comment">/* Load data with 1 bit error */</span></div>
<div class="line"><span class="lineno"> 1799</span>    flashWREG-&gt;FEMUDMSW = 0U;</div>
<div class="line"><span class="lineno"> 1800</span>    flashWREG-&gt;FEMUDLSW = 1U;</div>
<div class="line"><span class="lineno"> 1801</span> </div>
<div class="line"><span class="lineno"> 1802</span>    <span class="comment">/* Enable Diagnostic ECC data correction mode and select FEE SECDED for diagnostic testing */</span></div>
<div class="line"><span class="lineno"> 1803</span>    flashWREG-&gt;FDIAGCTRL = 0x00055001U;</div>
<div class="line"><span class="lineno"> 1804</span> </div>
<div class="line"><span class="lineno"> 1805</span>    flashWREG-&gt;FEMUECC = ecc;</div>
<div class="line"><span class="lineno"> 1806</span> </div>
<div class="line"><span class="lineno"> 1807</span>    <span class="comment">/* Diagnostic trigger */</span></div>
<div class="line"><span class="lineno"> 1808</span>    flashWREG-&gt;FDIAGCTRL |= 0x01000000U;</div>
<div class="line"><span class="lineno"> 1809</span> </div>
<div class="line"><span class="lineno"> 1810</span>    <span class="comment">/*SAFETYMCUSW 139 S MR:13.7 &lt;APPROVED&gt; &quot;Hardware status bit read check&quot; */</span></div>
<div class="line"><span class="lineno"> 1811</span>    <span class="keywordflow">if</span>((flashWREG-&gt;EESTATUS &amp; 0x1U) != 0x1U)</div>
<div class="line"><span class="lineno"> 1812</span>    {</div>
<div class="line"><span class="lineno"> 1813</span>        <span class="comment">/* No single bit error was detected */</span></div>
<div class="line"><span class="lineno"> 1814</span>        <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(CHECKFLASHEEPROMECC_FAIL1);</div>
<div class="line"><span class="lineno"> 1815</span>    }</div>
<div class="line"><span class="lineno"> 1816</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1817</span>    {</div>
<div class="line"><span class="lineno"> 1818</span>        <span class="keywordflow">if</span>((esmREG-&gt;SR4[0U] &amp; 0x8U) != 0x8U)</div>
<div class="line"><span class="lineno"> 1819</span>        {</div>
<div class="line"><span class="lineno"> 1820</span>            <span class="comment">/* EEPROM single bit error not captured in ESM */</span></div>
<div class="line"><span class="lineno"> 1821</span>            <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(CHECKFLASHEEPROMECC_FAIL2);</div>
<div class="line"><span class="lineno"> 1822</span>        }</div>
<div class="line"><span class="lineno"> 1823</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1824</span>        {</div>
<div class="line"><span class="lineno"> 1825</span>            <span class="comment">/* Clear single bit error flag in flash wrapper */</span></div>
<div class="line"><span class="lineno"> 1826</span>            flashWREG-&gt;EESTATUS = 0xFU;</div>
<div class="line"><span class="lineno"> 1827</span> </div>
<div class="line"><span class="lineno"> 1828</span>            <span class="comment">/* Clear ESM flag */</span></div>
<div class="line"><span class="lineno"> 1829</span>            esmREG-&gt;SR4[0U] = 0x8U;</div>
<div class="line"><span class="lineno"> 1830</span>        }</div>
<div class="line"><span class="lineno"> 1831</span>    }</div>
<div class="line"><span class="lineno"> 1832</span> </div>
<div class="line"><span class="lineno"> 1833</span>    <span class="comment">/* Load data with 2 bit error */</span></div>
<div class="line"><span class="lineno"> 1834</span>    flashWREG-&gt;FEMUDMSW = 0U;</div>
<div class="line"><span class="lineno"> 1835</span>    flashWREG-&gt;FEMUDLSW = 3U;</div>
<div class="line"><span class="lineno"> 1836</span> </div>
<div class="line"><span class="lineno"> 1837</span>    <span class="comment">/* Enable Diagnostic ECC data correction mode and select FEE SECDED for diagnostic testing */</span></div>
<div class="line"><span class="lineno"> 1838</span>    flashWREG-&gt;FDIAGCTRL = 0x00055001U;</div>
<div class="line"><span class="lineno"> 1839</span> </div>
<div class="line"><span class="lineno"> 1840</span>    flashWREG-&gt;FEMUECC = ecc;</div>
<div class="line"><span class="lineno"> 1841</span> </div>
<div class="line"><span class="lineno"> 1842</span>    <span class="comment">/* Diagnostic trigger */</span></div>
<div class="line"><span class="lineno"> 1843</span>    flashWREG-&gt;FDIAGCTRL |= 0x01000000U;</div>
<div class="line"><span class="lineno"> 1844</span> </div>
<div class="line"><span class="lineno"> 1845</span>    <span class="comment">/*SAFETYMCUSW 139 S MR:13.7 &lt;APPROVED&gt; &quot;Hardware status bit read check&quot; */</span></div>
<div class="line"><span class="lineno"> 1846</span>    <span class="keywordflow">if</span>((flashWREG-&gt;EESTATUS &amp; 0x100U) != 0x100U)</div>
<div class="line"><span class="lineno"> 1847</span>    {</div>
<div class="line"><span class="lineno"> 1848</span>        <span class="comment">/* No double bit error was detected */</span></div>
<div class="line"><span class="lineno"> 1849</span>        <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(CHECKFLASHEEPROMECC_FAIL3);</div>
<div class="line"><span class="lineno"> 1850</span>    }</div>
<div class="line"><span class="lineno"> 1851</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1852</span>    {</div>
<div class="line"><span class="lineno"> 1853</span>        <span class="keywordflow">if</span>((esmREG-&gt;SR4[0U] &amp; 0x10U) != 0x10U)</div>
<div class="line"><span class="lineno"> 1854</span>        {</div>
<div class="line"><span class="lineno"> 1855</span>            <span class="comment">/* EEPROM double bit error not captured in ESM */</span></div>
<div class="line"><span class="lineno"> 1856</span>            <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(CHECKFLASHEEPROMECC_FAIL4);</div>
<div class="line"><span class="lineno"> 1857</span>        }</div>
<div class="line"><span class="lineno"> 1858</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1859</span>        {</div>
<div class="line"><span class="lineno"> 1860</span>            <span class="comment">/* Clear uncorrectable error flag in flash wrapper */</span></div>
<div class="line"><span class="lineno"> 1861</span>            flashWREG-&gt;EESTATUS = 0x1100U;</div>
<div class="line"><span class="lineno"> 1862</span> </div>
<div class="line"><span class="lineno"> 1863</span>            <span class="comment">/* Read EEUNCERRADD register */</span></div>
<div class="line"><span class="lineno"> 1864</span>            regread = flashWREG-&gt;EEUNCERRADD;</div>
<div class="line"><span class="lineno"> 1865</span> </div>
<div class="line"><span class="lineno"> 1866</span>            <span class="comment">/* Clear ESM flag */</span></div>
<div class="line"><span class="lineno"> 1867</span>            esmREG-&gt;SR4[0U] = 0x10U;</div>
<div class="line"><span class="lineno"> 1868</span> </div>
<div class="line"><span class="lineno"> 1869</span> </div>
<div class="line"><span class="lineno"> 1870</span>        }</div>
<div class="line"><span class="lineno"> 1871</span>    }</div>
<div class="line"><span class="lineno"> 1872</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a08d6355b5f4052d4ef5d2d995032ba22" name="a08d6355b5f4052d4ef5d2d995032ba22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08d6355b5f4052d4ef5d2d995032ba22">&#9670;&#160;</a></span>checkPLL1Slip()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void checkPLL1Slip </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check PLL1 Slip detection logic. </p>
<p>This function checks PLL1 Slip detection logic. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1883</span>{</div>
<div class="line"><span class="lineno"> 1884</span>    uint32 ghvsrc_bk, pllctl1_bk;</div>
<div class="line"><span class="lineno"> 1885</span> </div>
<div class="line"><span class="lineno"> 1886</span>    <span class="comment">/* Back up the the registers GHVSRC and PLLCTRL1 */</span></div>
<div class="line"><span class="lineno"> 1887</span>    ghvsrc_bk = systemREG1-&gt;GHVSRC;</div>
<div class="line"><span class="lineno"> 1888</span>    pllctl1_bk = systemREG1-&gt;PLLCTL1;</div>
<div class="line"><span class="lineno"> 1889</span> </div>
<div class="line"><span class="lineno"> 1890</span>    <span class="comment">/* Switch all clock domains to oscillator */</span></div>
<div class="line"><span class="lineno"> 1891</span>    systemREG1-&gt;GHVSRC = 0x00000000U;</div>
<div class="line"><span class="lineno"> 1892</span> </div>
<div class="line"><span class="lineno"> 1893</span>    <span class="comment">/* Disable Reset on PLL Slip and enable Bypass on PLL slip */</span></div>
<div class="line"><span class="lineno"> 1894</span>    systemREG1-&gt;PLLCTL1 &amp;= 0x1FFFFFFFU;</div>
<div class="line"><span class="lineno"> 1895</span> </div>
<div class="line"><span class="lineno"> 1896</span>    <span class="comment">/* Force a PLL Slip */</span></div>
<div class="line"><span class="lineno"> 1897</span>    systemREG1-&gt;PLLCTL1 ^= 0x8000U;</div>
<div class="line"><span class="lineno"> 1898</span> </div>
<div class="line"><span class="lineno"> 1899</span>    <span class="comment">/* Wait till PLL slip flag is set */</span></div>
<div class="line"><span class="lineno"> 1900</span>    <span class="comment">/*SAFETYMCUSW 28 D MR:NA &lt;APPROVED&gt; &quot;Hardware status bit read check&quot; */</span></div>
<div class="line"><span class="lineno"> 1901</span>    <span class="keywordflow">while</span>((systemREG1-&gt;GBLSTAT &amp; 0x300U) == 0U)</div>
<div class="line"><span class="lineno"> 1902</span>    {</div>
<div class="line"><span class="lineno"> 1903</span>    } <span class="comment">/* Wait */</span></div>
<div class="line"><span class="lineno"> 1904</span> </div>
<div class="line"><span class="lineno"> 1905</span>    <span class="keywordflow">if</span>((esmREG-&gt;SR1[0U] &amp; 0x400U) != 0x400U)</div>
<div class="line"><span class="lineno"> 1906</span>    {</div>
<div class="line"><span class="lineno"> 1907</span>        <span class="comment">/* ESM flag not set */</span></div>
<div class="line"><span class="lineno"> 1908</span>        <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(CHECKPLL1SLIP_FAIL1);</div>
<div class="line"><span class="lineno"> 1909</span>    }</div>
<div class="line"><span class="lineno"> 1910</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1911</span>    {</div>
<div class="line"><span class="lineno"> 1912</span>        <span class="comment">/* Disable PLL1 */</span></div>
<div class="line"><span class="lineno"> 1913</span>        systemREG1-&gt;CSDISSET = 0x2U;</div>
<div class="line"><span class="lineno"> 1914</span> </div>
<div class="line"><span class="lineno"> 1915</span>        <span class="comment">/* Wait till PLL1 is disabled */</span></div>
<div class="line"><span class="lineno"> 1916</span>        <span class="comment">/*SAFETYMCUSW 28 D MR:NA &lt;APPROVED&gt; &quot;Hardware status bit read check&quot; */</span></div>
<div class="line"><span class="lineno"> 1917</span>        <span class="keywordflow">while</span>((systemREG1-&gt;CSDIS &amp; 0x2U) == 0U)</div>
<div class="line"><span class="lineno"> 1918</span>        {</div>
<div class="line"><span class="lineno"> 1919</span>        } <span class="comment">/* Wait */</span></div>
<div class="line"><span class="lineno"> 1920</span> </div>
<div class="line"><span class="lineno"> 1921</span>        <span class="comment">/* Restore the PLL multiplier value */</span></div>
<div class="line"><span class="lineno"> 1922</span>        systemREG1-&gt;PLLCTL1 ^= 0x8000U;</div>
<div class="line"><span class="lineno"> 1923</span> </div>
<div class="line"><span class="lineno"> 1924</span>        <span class="comment">/* Enable PLL1 */</span></div>
<div class="line"><span class="lineno"> 1925</span>        systemREG1-&gt;CSDISCLR = 0x2U;</div>
<div class="line"><span class="lineno"> 1926</span> </div>
<div class="line"><span class="lineno"> 1927</span>        <span class="comment">/* Wait till PLL1 is disabled */</span></div>
<div class="line"><span class="lineno"> 1928</span>        <span class="comment">/*SAFETYMCUSW 28 D MR:NA &lt;APPROVED&gt; &quot;Hardware status bit read check&quot; */</span></div>
<div class="line"><span class="lineno"> 1929</span>        <span class="keywordflow">while</span>((systemREG1-&gt;CSDIS &amp; 0x2U) != 0U)</div>
<div class="line"><span class="lineno"> 1930</span>        {</div>
<div class="line"><span class="lineno"> 1931</span>        } <span class="comment">/* Wait */</span></div>
<div class="line"><span class="lineno"> 1932</span> </div>
<div class="line"><span class="lineno"> 1933</span>        <span class="comment">/* Switch back to the initial clock source */</span></div>
<div class="line"><span class="lineno"> 1934</span>        systemREG1-&gt;GHVSRC = ghvsrc_bk;</div>
<div class="line"><span class="lineno"> 1935</span> </div>
<div class="line"><span class="lineno"> 1936</span>        <span class="comment">/* Clear PLL slip flag */</span></div>
<div class="line"><span class="lineno"> 1937</span>        systemREG1-&gt;GBLSTAT = 0x300U;</div>
<div class="line"><span class="lineno"> 1938</span> </div>
<div class="line"><span class="lineno"> 1939</span>        <span class="comment">/* Clear ESM flag */</span></div>
<div class="line"><span class="lineno"> 1940</span>        esmREG-&gt;SR1[0U] = 0x400U;</div>
<div class="line"><span class="lineno"> 1941</span> </div>
<div class="line"><span class="lineno"> 1942</span>        <span class="comment">/* Restore the PLLCTL1 register */</span></div>
<div class="line"><span class="lineno"> 1943</span>        systemREG1-&gt;PLLCTL1 = pllctl1_bk;</div>
<div class="line"><span class="lineno"> 1944</span>    }</div>
<div class="line"><span class="lineno"> 1945</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a85eb55d96d4a491e84a930dbea0e89a5" name="a85eb55d96d4a491e84a930dbea0e89a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85eb55d96d4a491e84a930dbea0e89a5">&#9670;&#160;</a></span>checkRAMAddrParity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void checkRAMAddrParity </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check TCRAM Address parity error detection and signaling mechanism. </p>
<p>This function TCRAM Address parity error detection and signaling mechanism. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1957</span>{</div>
<div class="line"><span class="lineno"> 1958</span>    <span class="keyword">register</span> uint64 ramread;</div>
<div class="line"><span class="lineno"> 1959</span>    <span class="keyword">volatile</span> uint32 regread;</div>
<div class="line"><span class="lineno"> 1960</span>    uint32 tcram1ErrStat, tcram2ErrStat;</div>
<div class="line"><span class="lineno"> 1961</span>    </div>
<div class="line"><span class="lineno"> 1962</span>    <span class="comment">/* Invert Address parity scheme */</span></div>
<div class="line"><span class="lineno"> 1963</span>    tcram1REG-&gt;RAMCTRL = 0x0D05000AU;</div>
<div class="line"><span class="lineno"> 1964</span>    tcram2REG-&gt;RAMCTRL = 0x0D05000AU;</div>
<div class="line"><span class="lineno"> 1965</span> </div>
<div class="line"><span class="lineno"> 1966</span>    <span class="comment">/* Read from both RAM banks */</span></div>
<div class="line"><span class="lineno"> 1967</span>    ramread = tcramA1bit;</div>
<div class="line"><span class="lineno"> 1968</span>    ramread = ramread | tcramB1bit; <span class="comment">/* XOR-ing with ramread to avoid warnings */</span></div>
<div class="line"><span class="lineno"> 1969</span> </div>
<div class="line"><span class="lineno"> 1970</span>    <span class="comment">/* Switch back to Address parity scheme */</span></div>
<div class="line"><span class="lineno"> 1971</span>    tcram1REG-&gt;RAMCTRL = 0x0005000AU;</div>
<div class="line"><span class="lineno"> 1972</span>    tcram2REG-&gt;RAMCTRL = 0x0005000AU;</div>
<div class="line"><span class="lineno"> 1973</span> </div>
<div class="line"><span class="lineno"> 1974</span>    <span class="comment">/* Check for error status */</span></div>
<div class="line"><span class="lineno"> 1975</span>    tcram1ErrStat = tcram1REG-&gt;RAMERRSTATUS &amp; 0x100U;</div>
<div class="line"><span class="lineno"> 1976</span>    tcram2ErrStat = tcram2REG-&gt;RAMERRSTATUS &amp; 0x100U;</div>
<div class="line"><span class="lineno"> 1977</span>    <span class="comment">/*SAFETYMCUSW 139 S MR:13.7  &lt;APPROVED&gt; &quot;LDRA Tool issue&quot; */</span></div>
<div class="line"><span class="lineno"> 1978</span>    <span class="comment">/*SAFETYMCUSW 139 S MR:13.7  &lt;APPROVED&gt; &quot;LDRA Tool issue&quot; */</span></div>
<div class="line"><span class="lineno"> 1979</span>    <span class="keywordflow">if</span>((tcram1ErrStat == 0U) || (tcram2ErrStat == 0U))</div>
<div class="line"><span class="lineno"> 1980</span>    {</div>
<div class="line"><span class="lineno"> 1981</span>        <span class="comment">/* No Address parity error detected */</span></div>
<div class="line"><span class="lineno"> 1982</span>        <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(CHECKRAMADDRPARITY_FAIL1);</div>
<div class="line"><span class="lineno"> 1983</span>    }</div>
<div class="line"><span class="lineno"> 1984</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1985</span>    {</div>
<div class="line"><span class="lineno"> 1986</span>        <span class="keywordflow">if</span>((esmREG-&gt;SR1[1U] &amp; 0x1400U) != 0x1400U)</div>
<div class="line"><span class="lineno"> 1987</span>        {</div>
<div class="line"><span class="lineno"> 1988</span>            <span class="comment">/* Address parity error not reported to ESM */</span></div>
<div class="line"><span class="lineno"> 1989</span>            <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(CHECKRAMADDRPARITY_FAIL2);</div>
<div class="line"><span class="lineno"> 1990</span>        }</div>
<div class="line"><span class="lineno"> 1991</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1992</span>        {</div>
<div class="line"><span class="lineno"> 1993</span>            <span class="comment">/* Clear Address parity error flag */</span></div>
<div class="line"><span class="lineno"> 1994</span>            tcram1REG-&gt;RAMERRSTATUS = 0x300U;</div>
<div class="line"><span class="lineno"> 1995</span>            tcram2REG-&gt;RAMERRSTATUS = 0x300U;</div>
<div class="line"><span class="lineno"> 1996</span> </div>
<div class="line"><span class="lineno"> 1997</span>            <span class="comment">/* Clear ESM flag */</span></div>
<div class="line"><span class="lineno"> 1998</span>            esmREG-&gt;SR1[1U] = 0x1400U;</div>
<div class="line"><span class="lineno"> 1999</span> </div>
<div class="line"><span class="lineno"> 2000</span>            <span class="comment">/* The nERROR pin will become inactive once the LTC counter expires */</span></div>
<div class="line"><span class="lineno"> 2001</span>            esmREG-&gt;EKR = 0x5U;</div>
<div class="line"><span class="lineno"> 2002</span> </div>
<div class="line"><span class="lineno"> 2003</span>            regread = tcram1REG-&gt;RAMPERADDR;</div>
<div class="line"><span class="lineno"> 2004</span>            regread = tcram2REG-&gt;RAMPERADDR;</div>
<div class="line"><span class="lineno"> 2005</span>        }</div>
<div class="line"><span class="lineno"> 2006</span>    }</div>
<div class="line"><span class="lineno"> 2007</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a421594cf13d3b5ca42435c5a5604721c" name="a421594cf13d3b5ca42435c5a5604721c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a421594cf13d3b5ca42435c5a5604721c">&#9670;&#160;</a></span>checkRAMECC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void checkRAMECC </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check TCRAM ECC error detection logic. </p>
<p>This function checks TCRAM ECC error detection logic. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1624</span>{</div>
<div class="line"><span class="lineno"> 1625</span>    <span class="keyword">volatile</span> uint64 ramread = 0U;</div>
<div class="line"><span class="lineno"> 1626</span>    <span class="keyword">volatile</span> uint32 regread = 0U;</div>
<div class="line"><span class="lineno"> 1627</span>    uint32 tcram1ErrStat, tcram2ErrStat = 0U;</div>
<div class="line"><span class="lineno"> 1628</span>    </div>
<div class="line"><span class="lineno"> 1629</span>    uint64 tcramA1_bk = tcramA1bit;</div>
<div class="line"><span class="lineno"> 1630</span>    uint64 tcramB1_bk = tcramB1bit;</div>
<div class="line"><span class="lineno"> 1631</span>    uint64 tcramA2_bk = tcramA2bit;</div>
<div class="line"><span class="lineno"> 1632</span>    uint64 tcramB2_bk = tcramB2bit;</div>
<div class="line"><span class="lineno"> 1633</span> </div>
<div class="line"><span class="lineno"> 1634</span>    <span class="comment">/* Clear RAMOCUUR before setting RAMTHRESHOLD register */</span></div>
<div class="line"><span class="lineno"> 1635</span>    tcram1REG-&gt;RAMOCCUR = 0U;</div>
<div class="line"><span class="lineno"> 1636</span>    tcram2REG-&gt;RAMOCCUR = 0U;</div>
<div class="line"><span class="lineno"> 1637</span> </div>
<div class="line"><span class="lineno"> 1638</span>    <span class="comment">/* Set Single-bit Error Threshold Count as 1 */</span></div>
<div class="line"><span class="lineno"> 1639</span>    tcram1REG-&gt;RAMTHRESHOLD = 1U;</div>
<div class="line"><span class="lineno"> 1640</span>    tcram2REG-&gt;RAMTHRESHOLD = 1U;</div>
<div class="line"><span class="lineno"> 1641</span> </div>
<div class="line"><span class="lineno"> 1642</span>    <span class="comment">/* Enable single bit error generation */</span></div>
<div class="line"><span class="lineno"> 1643</span>    tcram1REG-&gt;RAMINTCTRL = 1U;</div>
<div class="line"><span class="lineno"> 1644</span>    tcram2REG-&gt;RAMINTCTRL = 1U;</div>
<div class="line"><span class="lineno"> 1645</span> </div>
<div class="line"><span class="lineno"> 1646</span>    <span class="comment">/* Enable writes to ECC RAM, enable ECC error response */</span></div>
<div class="line"><span class="lineno"> 1647</span>    tcram1REG-&gt;RAMCTRL = 0x0005010AU;</div>
<div class="line"><span class="lineno"> 1648</span>    tcram2REG-&gt;RAMCTRL = 0x0005010AU;</div>
<div class="line"><span class="lineno"> 1649</span> </div>
<div class="line"><span class="lineno"> 1650</span>    <span class="comment">/* Force a single bit error in both the banks */</span></div>
<div class="line"><span class="lineno"> 1651</span>    _coreDisableRamEcc_();</div>
<div class="line"><span class="lineno"> 1652</span>    tcramA1bitError ^= 1U;</div>
<div class="line"><span class="lineno"> 1653</span>    tcramB1bitError ^= 1U;</div>
<div class="line"><span class="lineno"> 1654</span>    _coreEnableRamEcc_();</div>
<div class="line"><span class="lineno"> 1655</span> </div>
<div class="line"><span class="lineno"> 1656</span>    <span class="comment">/* Read the corrupted data to generate single bit error */</span></div>
<div class="line"><span class="lineno"> 1657</span>    ramread = tcramA1bit;</div>
<div class="line"><span class="lineno"> 1658</span>    ramread = tcramB1bit;</div>
<div class="line"><span class="lineno"> 1659</span> </div>
<div class="line"><span class="lineno"> 1660</span>    <span class="comment">/* Check for error status */</span></div>
<div class="line"><span class="lineno"> 1661</span>    tcram1ErrStat = tcram1REG-&gt;RAMERRSTATUS &amp; 0x1U;</div>
<div class="line"><span class="lineno"> 1662</span>    tcram2ErrStat = tcram2REG-&gt;RAMERRSTATUS &amp; 0x1U;</div>
<div class="line"><span class="lineno"> 1663</span>    <span class="comment">/*SAFETYMCUSW 139 S MR:13.7  &lt;APPROVED&gt; &quot;LDRA Tool issue&quot; */</span></div>
<div class="line"><span class="lineno"> 1664</span>    <span class="comment">/*SAFETYMCUSW 139 S MR:13.7  &lt;APPROVED&gt; &quot;LDRA Tool issue&quot; */</span></div>
<div class="line"><span class="lineno"> 1665</span>    <span class="keywordflow">if</span>((tcram1ErrStat == 0U) || (tcram2ErrStat == 0U))</div>
<div class="line"><span class="lineno"> 1666</span>    {</div>
<div class="line"><span class="lineno"> 1667</span>        <span class="comment">/* TCRAM module does not reflect 1-bit error reported by CPU */</span></div>
<div class="line"><span class="lineno"> 1668</span>        <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(CHECKRAMECC_FAIL1);</div>
<div class="line"><span class="lineno"> 1669</span>    }</div>
<div class="line"><span class="lineno"> 1670</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1671</span>    {</div>
<div class="line"><span class="lineno"> 1672</span>        <span class="keywordflow">if</span>((esmREG-&gt;SR1[0U] &amp; 0x14000000U) != 0x14000000U)</div>
<div class="line"><span class="lineno"> 1673</span>        {</div>
<div class="line"><span class="lineno"> 1674</span>            <span class="comment">/* TCRAM 1-bit error not flagged in ESM */</span></div>
<div class="line"><span class="lineno"> 1675</span>            <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(CHECKRAMECC_FAIL2);</div>
<div class="line"><span class="lineno"> 1676</span>        }</div>
<div class="line"><span class="lineno"> 1677</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1678</span>        {</div>
<div class="line"><span class="lineno"> 1679</span>            <span class="comment">/* Clear single bit error flag in TCRAM module */</span></div>
<div class="line"><span class="lineno"> 1680</span>            tcram1REG-&gt;RAMERRSTATUS = 0x1U;</div>
<div class="line"><span class="lineno"> 1681</span>            tcram2REG-&gt;RAMERRSTATUS = 0x1U;</div>
<div class="line"><span class="lineno"> 1682</span> </div>
<div class="line"><span class="lineno"> 1683</span>            <span class="comment">/* Clear ESM status */</span></div>
<div class="line"><span class="lineno"> 1684</span>            esmREG-&gt;SR1[0U] = 0x14000000U;</div>
<div class="line"><span class="lineno"> 1685</span>        }</div>
<div class="line"><span class="lineno"> 1686</span>    }</div>
<div class="line"><span class="lineno"> 1687</span> </div>
<div class="line"><span class="lineno"> 1688</span>    <span class="comment">/* Force a double bit error in both the banks */</span></div>
<div class="line"><span class="lineno"> 1689</span>    _coreDisableRamEcc_();</div>
<div class="line"><span class="lineno"> 1690</span>    tcramA2bitError ^= 3U;</div>
<div class="line"><span class="lineno"> 1691</span>    tcramB2bitError ^= 3U;</div>
<div class="line"><span class="lineno"> 1692</span>    _coreEnableRamEcc_();</div>
<div class="line"><span class="lineno"> 1693</span> </div>
<div class="line"><span class="lineno"> 1694</span>    <span class="comment">/* Read the corrupted data to generate double bit error */</span></div>
<div class="line"><span class="lineno"> 1695</span>    ramread = tcramA2bit;</div>
<div class="line"><span class="lineno"> 1696</span>    ramread = tcramB2bit;</div>
<div class="line"><span class="lineno"> 1697</span> </div>
<div class="line"><span class="lineno"> 1698</span>    regread = tcram1REG-&gt;RAMUERRADDR;</div>
<div class="line"><span class="lineno"> 1699</span>    regread = tcram2REG-&gt;RAMUERRADDR;</div>
<div class="line"><span class="lineno"> 1700</span> </div>
<div class="line"><span class="lineno"> 1701</span>    <span class="comment">/* disable writes to ECC RAM */</span></div>
<div class="line"><span class="lineno"> 1702</span>    tcram1REG-&gt;RAMCTRL = 0x0005000AU;</div>
<div class="line"><span class="lineno"> 1703</span>    tcram2REG-&gt;RAMCTRL = 0x0005000AU;</div>
<div class="line"><span class="lineno"> 1704</span> </div>
<div class="line"><span class="lineno"> 1705</span>    <span class="comment">/* Compute correct ECC */</span></div>
<div class="line"><span class="lineno"> 1706</span>    tcramA1bit = tcramA1_bk;</div>
<div class="line"><span class="lineno"> 1707</span>    tcramB1bit = tcramB1_bk;</div>
<div class="line"><span class="lineno"> 1708</span>    tcramA2bit = tcramA2_bk;</div>
<div class="line"><span class="lineno"> 1709</span>    tcramB2bit = tcramB2_bk;</div>
<div class="line"><span class="lineno"> 1710</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7e5bbec947e5db02df2bda4ba2230677" name="a7e5bbec947e5db02df2bda4ba2230677"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e5bbec947e5db02df2bda4ba2230677">&#9670;&#160;</a></span>checkRAMUERRTest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void checkRAMUERRTest </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run RAM test. </p>
<p>This function runs RAM test to test the redundant address decode and compare logic. </p>
<div class="fragment"><div class="line"><span class="lineno"> 2018</span>{</div>
<div class="line"><span class="lineno"> 2019</span>    uint32 tcram1ErrStat, tcram2ErrStat = 0U;</div>
<div class="line"><span class="lineno"> 2020</span> </div>
<div class="line"><span class="lineno"> 2021</span>    <span class="comment">/* Trigger equality check */</span></div>
<div class="line"><span class="lineno"> 2022</span>    tcram1REG-&gt;RAMTEST = 0x018AU;</div>
<div class="line"><span class="lineno"> 2023</span>    tcram2REG-&gt;RAMTEST = 0x018AU;</div>
<div class="line"><span class="lineno"> 2024</span> </div>
<div class="line"><span class="lineno"> 2025</span>    <span class="comment">/* Wait till test is completed */</span></div>
<div class="line"><span class="lineno"> 2026</span>    <span class="keywordflow">while</span>(tcram1REG-&gt;RAMTEST != 0x008AU)</div>
<div class="line"><span class="lineno"> 2027</span>    {</div>
<div class="line"><span class="lineno"> 2028</span>    } <span class="comment">/* Wait */</span></div>
<div class="line"><span class="lineno"> 2029</span>    <span class="keywordflow">while</span>(tcram2REG-&gt;RAMTEST != 0x008AU)</div>
<div class="line"><span class="lineno"> 2030</span>    {</div>
<div class="line"><span class="lineno"> 2031</span>    } <span class="comment">/* Wait */</span></div>
<div class="line"><span class="lineno"> 2032</span> </div>
<div class="line"><span class="lineno"> 2033</span>    <span class="comment">/* Check for error status */</span></div>
<div class="line"><span class="lineno"> 2034</span>    tcram1ErrStat = tcram1REG-&gt;RAMERRSTATUS &amp; 0x10U;</div>
<div class="line"><span class="lineno"> 2035</span>    tcram2ErrStat = tcram2REG-&gt;RAMERRSTATUS &amp; 0x10U;</div>
<div class="line"><span class="lineno"> 2036</span>    <span class="keywordflow">if</span>((tcram1ErrStat == 0x10U) || (tcram2ErrStat == 0x10U))</div>
<div class="line"><span class="lineno"> 2037</span>    {</div>
<div class="line"><span class="lineno"> 2038</span>        <span class="comment">/* test failed */</span></div>
<div class="line"><span class="lineno"> 2039</span>        <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(CHECKRAMUERRTEST_FAIL1);</div>
<div class="line"><span class="lineno"> 2040</span>    }</div>
<div class="line"><span class="lineno"> 2041</span> </div>
<div class="line"><span class="lineno"> 2042</span>    <span class="comment">/* Trigger inequality check */</span></div>
<div class="line"><span class="lineno"> 2043</span>    tcram1REG-&gt;RAMTEST = 0x014AU;</div>
<div class="line"><span class="lineno"> 2044</span>    tcram2REG-&gt;RAMTEST = 0x014AU;</div>
<div class="line"><span class="lineno"> 2045</span> </div>
<div class="line"><span class="lineno"> 2046</span>    <span class="comment">/* Wait till test is completed */</span></div>
<div class="line"><span class="lineno"> 2047</span>    <span class="keywordflow">while</span>(tcram1REG-&gt;RAMTEST != 0x004AU)</div>
<div class="line"><span class="lineno"> 2048</span>    {</div>
<div class="line"><span class="lineno"> 2049</span>    }<span class="comment">/* Wait */</span></div>
<div class="line"><span class="lineno"> 2050</span>    <span class="keywordflow">while</span>(tcram2REG-&gt;RAMTEST != 0x004AU)</div>
<div class="line"><span class="lineno"> 2051</span>    {</div>
<div class="line"><span class="lineno"> 2052</span>    }<span class="comment">/* Wait */</span></div>
<div class="line"><span class="lineno"> 2053</span> </div>
<div class="line"><span class="lineno"> 2054</span>    tcram1ErrStat = tcram1REG-&gt;RAMERRSTATUS &amp; 0x10U;</div>
<div class="line"><span class="lineno"> 2055</span>    tcram2ErrStat = tcram2REG-&gt;RAMERRSTATUS &amp; 0x10U;</div>
<div class="line"><span class="lineno"> 2056</span>    <span class="keywordflow">if</span>((tcram1ErrStat == 0x10U) || (tcram2ErrStat == 0x10U))</div>
<div class="line"><span class="lineno"> 2057</span>    {</div>
<div class="line"><span class="lineno"> 2058</span>        <span class="comment">/* test failed */</span></div>
<div class="line"><span class="lineno"> 2059</span>        <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(CHECKRAMUERRTEST_FAIL2);</div>
<div class="line"><span class="lineno"> 2060</span>    }</div>
<div class="line"><span class="lineno"> 2061</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2062</span>    {</div>
<div class="line"><span class="lineno"> 2063</span>        tcram1REG-&gt;RAMERRSTATUS = 0x4U;</div>
<div class="line"><span class="lineno"> 2064</span>        tcram2REG-&gt;RAMERRSTATUS = 0x4U;</div>
<div class="line"><span class="lineno"> 2065</span> </div>
<div class="line"><span class="lineno"> 2066</span>        <span class="comment">/* Clear ESM flag */</span></div>
<div class="line"><span class="lineno"> 2067</span>        esmREG-&gt;SR1[1U] = 0x140U;</div>
<div class="line"><span class="lineno"> 2068</span>        esmREG-&gt;SSR2 = 0x140U;</div>
<div class="line"><span class="lineno"> 2069</span>        esmREG-&gt;EKR = 0x5U;</div>
<div class="line"><span class="lineno"> 2070</span>    }</div>
<div class="line"><span class="lineno"> 2071</span> </div>
<div class="line"><span class="lineno"> 2072</span>    <span class="comment">/* Disable RAM test mode */</span></div>
<div class="line"><span class="lineno"> 2073</span>    tcram1REG-&gt;RAMTEST = 0x5U;</div>
<div class="line"><span class="lineno"> 2074</span>    tcram2REG-&gt;RAMTEST = 0x5U;</div>
<div class="line"><span class="lineno"> 2075</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a27cee1191b0027e90cbb9c66983596b9" name="a27cee1191b0027e90cbb9c66983596b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27cee1191b0027e90cbb9c66983596b9">&#9670;&#160;</a></span>cpuSelfTest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cpuSelfTest </td>
          <td>(</td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>no_of_intervals</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>max_timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boolean&#160;</td>
          <td class="paramname"><em>restart_test</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>CPU self test Driver. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">no_of_intervals</td><td>- Number of Test Intervals to be </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_timeout</td><td>- Maximum Timeout to complete selected test Intervals </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">restart_test</td><td>- Restart the test from Interval 0 or Continue from where it stopped.</td></tr>
  </table>
  </dd>
</dl>
<p>This function is called to perform CPU self test using STC module. </p>
<div class="fragment"><div class="line"><span class="lineno">  267</span>{</div>
<div class="line"><span class="lineno">  268</span>    <span class="keyword">volatile</span> uint32 i = 0U;</div>
<div class="line"><span class="lineno">  269</span> </div>
<div class="line"><span class="lineno">  270</span><span class="comment">/* USER CODE BEGIN (11) */</span></div>
<div class="line"><span class="lineno">  271</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  272</span> </div>
<div class="line"><span class="lineno">  273</span>    <span class="comment">/* Run specified no of test intervals starting from interval 0 */</span></div>
<div class="line"><span class="lineno">  274</span>    <span class="comment">/* Start test from interval 0 or continue the test. */</span></div>
<div class="line"><span class="lineno">  275</span>    stcREG-&gt;STCGCR0 = no_of_intervals &lt;&lt; 16U;</div>
<div class="line"><span class="lineno">  276</span>    <span class="keywordflow">if</span>(restart_test)</div>
<div class="line"><span class="lineno">  277</span>    {</div>
<div class="line"><span class="lineno">  278</span>        stcREG-&gt;STCGCR0 |= 0x00000001U;</div>
<div class="line"><span class="lineno">  279</span>    }</div>
<div class="line"><span class="lineno">  280</span> </div>
<div class="line"><span class="lineno">  281</span>    <span class="comment">/* Configure Maximum time-out period */</span></div>
<div class="line"><span class="lineno">  282</span>    stcREG-&gt;STCTPR = max_timeout;</div>
<div class="line"><span class="lineno">  283</span> </div>
<div class="line"><span class="lineno">  284</span>    <span class="comment">/* wait for 16 VBUS clock cycles at least, based on HCLK to VCLK ratio */</span></div>
<div class="line"><span class="lineno">  285</span>    <span class="comment">/*SAFETYMCUSW 134 S MR:12.2 &lt;APPROVED&gt; &quot;Wait for few clock cycles (Value of i not used)&quot; */</span></div>
<div class="line"><span class="lineno">  286</span>    <span class="comment">/*SAFETYMCUSW 134 S MR:12.2 &lt;APPROVED&gt; &quot;Wait for few clock cycles (Value of i not used)&quot; */</span></div>
<div class="line"><span class="lineno">  287</span>    <span class="keywordflow">for</span> (i=0U; i&lt;(16U + (16U * 0U)); i++){ <span class="comment">/* Wait */</span> }</div>
<div class="line"><span class="lineno">  288</span> </div>
<div class="line"><span class="lineno">  289</span>    <span class="comment">/* Enable self-test */</span></div>
<div class="line"><span class="lineno">  290</span>    stcREG-&gt;STCGCR1 = 0xAU;</div>
<div class="line"><span class="lineno">  291</span> </div>
<div class="line"><span class="lineno">  292</span><span class="comment">/* USER CODE BEGIN (12) */</span></div>
<div class="line"><span class="lineno">  293</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  294</span>    <span class="comment">/* Idle the CPU so that the self-test can start */</span></div>
<div class="line"><span class="lineno">  295</span> </div>
<div class="line"><span class="lineno">  296</span>    _gotoCPUIdle_();</div>
<div class="line"><span class="lineno">  297</span> </div>
<div class="line"><span class="lineno">  298</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a932e8fff5749ae8038f0fbbe9029ec44" name="a932e8fff5749ae8038f0fbbe9029ec44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a932e8fff5749ae8038f0fbbe9029ec44">&#9670;&#160;</a></span>cpuSelfTestFail()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cpuSelfTestFail </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>CPU Self test check fail service routine. </p>
<p>This function is called if CPU Self test check fail. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1156</span>{</div>
<div class="line"><span class="lineno"> 1157</span><span class="comment">/* USER CODE BEGIN (46) */</span></div>
<div class="line"><span class="lineno"> 1158</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno"> 1159</span>    <span class="comment">/* CPU self-test has failed.</span></div>
<div class="line"><span class="lineno"> 1160</span><span class="comment">     * CPU operation is not reliable.</span></div>
<div class="line"><span class="lineno"> 1161</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 1162</span><span class="comment">/* USER CODE BEGIN (47) */</span></div>
<div class="line"><span class="lineno"> 1163</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno"> 1164</span>    <span class="comment">/*SAFETYMCUSW 5 C MR:NA &lt;APPROVED&gt; &quot;for(;;) can be removed by adding &quot;# if 0&quot; and &quot;# endif&quot; in the user codes above and below&quot; */</span></div>
<div class="line"><span class="lineno"> 1165</span>    <span class="comment">/*SAFETYMCUSW 26 S MR:NA &lt;APPROVED&gt; &quot;for(;;) can be removed by adding &quot;# if 0&quot; and &quot;# endif&quot; in the user codes above and below&quot; */</span></div>
<div class="line"><span class="lineno"> 1166</span>    <span class="comment">/*SAFETYMCUSW 28 D MR:NA &lt;APPROVED&gt; &quot;for(;;) can be removed by adding &quot;# if 0&quot; and &quot;# endif&quot; in the user codes above and below&quot; */</span></div>
<div class="line"><span class="lineno"> 1167</span>    <span class="keywordflow">for</span>(;;)</div>
<div class="line"><span class="lineno"> 1168</span>    {</div>
<div class="line"><span class="lineno"> 1169</span>    }<span class="comment">/* Wait */</span></div>
<div class="line"><span class="lineno"> 1170</span><span class="comment">/* USER CODE BEGIN (48) */</span></div>
<div class="line"><span class="lineno"> 1171</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno"> 1172</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a58597c65615a9a0f05d48135ad48c0d6" name="a58597c65615a9a0f05d48135ad48c0d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58597c65615a9a0f05d48135ad48c0d6">&#9670;&#160;</a></span>custom_dabort()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void custom_dabort </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Custom Data abort routine for the application. </p>
<p>Custom Data abort routine for the application. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1113</span>{</div>
<div class="line"><span class="lineno"> 1114</span>    <span class="comment">/* Need custom data abort handler here.</span></div>
<div class="line"><span class="lineno"> 1115</span><span class="comment">     * This data abort is not caused due to diagnostic checks of flash and TCRAM ECC logic.</span></div>
<div class="line"><span class="lineno"> 1116</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 1117</span><span class="comment">/* USER CODE BEGIN (42) */</span></div>
<div class="line"><span class="lineno"> 1118</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno"> 1119</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a15b66d583493adf7dc0ce8e3a89f00f5" name="a15b66d583493adf7dc0ce8e3a89f00f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15b66d583493adf7dc0ce8e3a89f00f5">&#9670;&#160;</a></span>disableParity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void disableParity </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable peripheral RAM parity. </p>
<p>This function disables RAM parity for all peripherals for which RAM parity check is enabled. This function is called after memoryInit in the startup </p>
<div class="fragment"><div class="line"><span class="lineno"> 2504</span>{</div>
<div class="line"><span class="lineno"> 2505</span>    VIM_PARCTL = 0x5U;             <span class="comment">/* Disable VIM RAM parity */</span></div>
<div class="line"><span class="lineno"> 2506</span>    canREG1-&gt;CTL = ((uint32)0x5U &lt;&lt; 10U) | 1U;    <span class="comment">/* Disable CAN1 RAM parity */</span></div>
<div class="line"><span class="lineno"> 2507</span>    canREG2-&gt;CTL = ((uint32)0x5U &lt;&lt; 10U) | 1U;    <span class="comment">/* Disable CAN2 RAM parity */</span></div>
<div class="line"><span class="lineno"> 2508</span>    adcREG1-&gt;PARCR = 0x5U;         <span class="comment">/* Disable ADC1 RAM parity */</span></div>
<div class="line"><span class="lineno"> 2509</span>    hetREG1-&gt;PCR = 0x5U;           <span class="comment">/* Disable HET1 RAM parity */</span></div>
<div class="line"><span class="lineno"> 2510</span>    htuREG1-&gt;PCR = 0x5U;           <span class="comment">/* Disable HTU1 RAM parity */</span></div>
<div class="line"><span class="lineno"> 2511</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a646eb27315f3ce47edde97c563389f76" name="a646eb27315f3ce47edde97c563389f76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a646eb27315f3ce47edde97c563389f76">&#9670;&#160;</a></span>efcCheck()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 efcCheck </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>EFUSE module self check Driver. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 if no error was detected during autoload and Stuck At Zero Test passed 1 if no error was detected during autoload but Stuck At Zero Test failed 2 if there was a single-bit error detected during autoload 3 if some other error occurred during autoload</dd></dl>
<p>This function self checks the EFUSE module. </p>
<div class="fragment"><div class="line"><span class="lineno">  579</span>{</div>
<div class="line"><span class="lineno">  580</span>    uint32 efcStatus = 0U;</div>
<div class="line"><span class="lineno">  581</span>    uint32 status;</div>
<div class="line"><span class="lineno">  582</span>    </div>
<div class="line"><span class="lineno">  583</span><span class="comment">/* USER CODE BEGIN (27) */</span></div>
<div class="line"><span class="lineno">  584</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  585</span> </div>
<div class="line"><span class="lineno">  586</span>    <span class="comment">/* read the EFC Error Status Register */</span></div>
<div class="line"><span class="lineno">  587</span>    efcStatus = efcREG-&gt;ERROR;</div>
<div class="line"><span class="lineno">  588</span> </div>
<div class="line"><span class="lineno">  589</span><span class="comment">/* USER CODE BEGIN (28) */</span></div>
<div class="line"><span class="lineno">  590</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  591</span> </div>
<div class="line"><span class="lineno">  592</span>    <span class="keywordflow">if</span> (efcStatus == 0x0U)</div>
<div class="line"><span class="lineno">  593</span>    {</div>
<div class="line"><span class="lineno">  594</span>        <span class="comment">/* run stuck-at-zero test and check if it passed */</span></div>
<div class="line"><span class="lineno">  595</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="sys__selftest_8c.html#a9973f032c29389602b684d30ea390fad">efcStuckZeroTest</a>()== TRUE)</div>
<div class="line"><span class="lineno">  596</span>        {</div>
<div class="line"><span class="lineno">  597</span>            <span class="comment">/* start EFC ECC logic self-test */</span></div>
<div class="line"><span class="lineno">  598</span>            <a class="code hl_function" href="sys__selftest_8c.html#afd6cec31a44e7c8e325a744e9bcbf601">efcSelfTest</a>();</div>
<div class="line"><span class="lineno">  599</span>            status = 0U;</div>
<div class="line"><span class="lineno">  600</span>        }</div>
<div class="line"><span class="lineno">  601</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  602</span>        {</div>
<div class="line"><span class="lineno">  603</span>            <span class="comment">/* EFC output is stuck-at-zero, device operation unreliable */</span></div>
<div class="line"><span class="lineno">  604</span>            <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(EFCCHECK_FAIL1);</div>
<div class="line"><span class="lineno">  605</span>            status = 1U;</div>
<div class="line"><span class="lineno">  606</span>        }</div>
<div class="line"><span class="lineno">  607</span>    }</div>
<div class="line"><span class="lineno">  608</span>    <span class="comment">/* EFC Error Register is not zero */</span></div>
<div class="line"><span class="lineno">  609</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  610</span>    {</div>
<div class="line"><span class="lineno">  611</span>        <span class="comment">/* one-bit error detected during autoload */</span></div>
<div class="line"><span class="lineno">  612</span>        <span class="keywordflow">if</span> (efcStatus == 0x15U)</div>
<div class="line"><span class="lineno">  613</span>        {</div>
<div class="line"><span class="lineno">  614</span>            <span class="comment">/* start EFC ECC logic self-test */</span></div>
<div class="line"><span class="lineno">  615</span>            <a class="code hl_function" href="sys__selftest_8c.html#afd6cec31a44e7c8e325a744e9bcbf601">efcSelfTest</a>();</div>
<div class="line"><span class="lineno">  616</span>            status = 2U;</div>
<div class="line"><span class="lineno">  617</span>        }</div>
<div class="line"><span class="lineno">  618</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  619</span>        {</div>
<div class="line"><span class="lineno">  620</span>            <span class="comment">/* Some other EFC error was detected */</span></div>
<div class="line"><span class="lineno">  621</span>            <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(EFCCHECK_FAIL1);</div>
<div class="line"><span class="lineno">  622</span>            status = 3U;</div>
<div class="line"><span class="lineno">  623</span>        }</div>
<div class="line"><span class="lineno">  624</span>    }</div>
<div class="line"><span class="lineno">  625</span>    <span class="keywordflow">return</span> status;</div>
<div class="line"><span class="lineno">  626</span>}</div>
<div class="ttc" id="asys__selftest_8c_html_a9973f032c29389602b684d30ea390fad"><div class="ttname"><a href="sys__selftest_8c.html#a9973f032c29389602b684d30ea390fad">efcStuckZeroTest</a></div><div class="ttdeci">boolean efcStuckZeroTest(void)</div><div class="ttdoc">Checks to see if the EFUSE Stuck at zero test is completed successfully.</div><div class="ttdef"><b>Definition:</b> sys_selftest.c:637</div></div>
<div class="ttc" id="asys__selftest_8c_html_afd6cec31a44e7c8e325a744e9bcbf601"><div class="ttname"><a href="sys__selftest_8c.html#afd6cec31a44e7c8e325a744e9bcbf601">efcSelfTest</a></div><div class="ttdeci">void efcSelfTest(void)</div><div class="ttdoc">EFUSE module self check Driver.</div><div class="ttdef"><b>Definition:</b> sys_selftest.c:693</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac76ed167d7b4b27eedea0eb37de6acc2" name="ac76ed167d7b4b27eedea0eb37de6acc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac76ed167d7b4b27eedea0eb37de6acc2">&#9670;&#160;</a></span>efcGetConfigValue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void efcGetConfigValue </td>
          <td>(</td>
          <td class="paramtype">efc_config_reg_t *&#160;</td>
          <td class="paramname"><em>config_reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">config_value_type_t&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the initial or current values of the configuration registers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*config_reg</td><td>pointer to the struct to which the initial or current value of the configuration registers need to be stored </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>whether initial or current value of the configuration registers need to be stored<ul>
<li>InitialValue: initial value of the configuration registers will be stored in the struct pointed by config_reg</li>
<li>CurrentValue: initial value of the configuration registers will be stored in the struct pointed by config_reg</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<p>This function will copy the initial or current value (depending on the parameter 'type') of the configuration registers to the struct pointed by config_reg </p>
<div class="fragment"><div class="line"><span class="lineno"> 2274</span>{</div>
<div class="line"><span class="lineno"> 2275</span>    <span class="keywordflow">if</span> (type == InitialValue)</div>
<div class="line"><span class="lineno"> 2276</span>    {</div>
<div class="line"><span class="lineno"> 2277</span>        config_reg-&gt;CONFIG_BOUNDARY = EFC_BOUNDARY_CONFIGVALUE;</div>
<div class="line"><span class="lineno"> 2278</span>        config_reg-&gt;CONFIG_PINS = EFC_PINS_CONFIGVALUE;</div>
<div class="line"><span class="lineno"> 2279</span>        config_reg-&gt;CONFIG_SELFTESTCYCLES = EFC_SELFTESTCYCLES_CONFIGVALUE;</div>
<div class="line"><span class="lineno"> 2280</span>        config_reg-&gt;CONFIG_SELFTESTSIGN = EFC_SELFTESTSIGN_CONFIGVALUE;</div>
<div class="line"><span class="lineno"> 2281</span>    }</div>
<div class="line"><span class="lineno"> 2282</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2283</span>    {</div>
<div class="line"><span class="lineno"> 2284</span>    <span class="comment">/*SAFETYMCUSW 134 S MR:12.2 &lt;APPROVED&gt; &quot;LDRA Tool issue&quot; */</span></div>
<div class="line"><span class="lineno"> 2285</span>        config_reg-&gt;CONFIG_BOUNDARY = efcREG-&gt;BOUNDARY;</div>
<div class="line"><span class="lineno"> 2286</span>        config_reg-&gt;CONFIG_PINS = efcREG-&gt;PINS;</div>
<div class="line"><span class="lineno"> 2287</span>        config_reg-&gt;CONFIG_SELFTESTCYCLES = efcREG-&gt;SELF_TEST_CYCLES;</div>
<div class="line"><span class="lineno"> 2288</span>        config_reg-&gt;CONFIG_SELFTESTSIGN = efcREG-&gt;SELF_TEST_SIGN;</div>
<div class="line"><span class="lineno"> 2289</span>    }</div>
<div class="line"><span class="lineno"> 2290</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="afd6cec31a44e7c8e325a744e9bcbf601" name="afd6cec31a44e7c8e325a744e9bcbf601"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd6cec31a44e7c8e325a744e9bcbf601">&#9670;&#160;</a></span>efcSelfTest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void efcSelfTest </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>EFUSE module self check Driver. </p>
<p>This function self checks the EFSUE module. </p>
<div class="fragment"><div class="line"><span class="lineno">  694</span>{</div>
<div class="line"><span class="lineno">  695</span><span class="comment">/* USER CODE BEGIN (30) */</span></div>
<div class="line"><span class="lineno">  696</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  697</span>    <span class="comment">/* configure self-test cycles */</span></div>
<div class="line"><span class="lineno">  698</span>    efcREG-&gt;SELF_TEST_CYCLES = 0x258U;</div>
<div class="line"><span class="lineno">  699</span> </div>
<div class="line"><span class="lineno">  700</span>    <span class="comment">/* configure self-test signature */</span></div>
<div class="line"><span class="lineno">  701</span>    efcREG-&gt;SELF_TEST_SIGN = 0x5362F97FU;</div>
<div class="line"><span class="lineno">  702</span> </div>
<div class="line"><span class="lineno">  703</span>    <span class="comment">/* configure boundary register to start ECC self-test */</span></div>
<div class="line"><span class="lineno">  704</span>    efcREG-&gt;BOUNDARY = 0x0000200FU;</div>
<div class="line"><span class="lineno">  705</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9973f032c29389602b684d30ea390fad" name="a9973f032c29389602b684d30ea390fad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9973f032c29389602b684d30ea390fad">&#9670;&#160;</a></span>efcStuckZeroTest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean efcStuckZeroTest </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks to see if the EFUSE Stuck at zero test is completed successfully. </p>
<dl class="section return"><dt>Returns</dt><dd>1 if EFUSE Stuck at zero test completed, otherwise 0.</dd></dl>
<p>Checks to see if the EFUSE Stuck at zero test is completed successfully. </p>
<div class="fragment"><div class="line"><span class="lineno">  638</span>{</div>
<div class="line"><span class="lineno">  639</span><span class="comment">/* USER CODE BEGIN (29) */</span></div>
<div class="line"><span class="lineno">  640</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  641</span> </div>
<div class="line"><span class="lineno">  642</span>    uint32 ESM_ESTATUS4, ESM_ESTATUS1;</div>
<div class="line"><span class="lineno">  643</span> </div>
<div class="line"><span class="lineno">  644</span>    <span class="keywordtype">boolean</span> result = FALSE;</div>
<div class="line"><span class="lineno">  645</span>    uint32 error_checks = EFC_INSTRUCTION_INFO_EN  |</div>
<div class="line"><span class="lineno">  646</span>                                  EFC_INSTRUCTION_ERROR_EN |</div>
<div class="line"><span class="lineno">  647</span>                                  EFC_AUTOLOAD_ERROR_EN      |</div>
<div class="line"><span class="lineno">  648</span>                                  EFC_SELF_TEST_ERROR_EN   ;</div>
<div class="line"><span class="lineno">  649</span> </div>
<div class="line"><span class="lineno">  650</span>    <span class="comment">/* configure the output enable for auto load error , instruction info,</span></div>
<div class="line"><span class="lineno">  651</span><span class="comment">         instruction error, and self test error using boundary register</span></div>
<div class="line"><span class="lineno">  652</span><span class="comment">         and drive values one across all the errors */</span></div>
<div class="line"><span class="lineno">  653</span>    efcREG-&gt;BOUNDARY = ((uint32)OUTPUT_ENABLE | error_checks);</div>
<div class="line"><span class="lineno">  654</span> </div>
<div class="line"><span class="lineno">  655</span>    <span class="comment">/* Read from the pin register. This register holds the current values</span></div>
<div class="line"><span class="lineno">  656</span><span class="comment">         of above errors. This value should be 0x5c00.If not at least one of</span></div>
<div class="line"><span class="lineno">  657</span><span class="comment">         the above errors is stuck at 0. */</span></div>
<div class="line"><span class="lineno">  658</span>    <span class="keywordflow">if</span> ((efcREG-&gt;PINS &amp; 0x5C00U) == 0x5C00U)</div>
<div class="line"><span class="lineno">  659</span>    {</div>
<div class="line"><span class="lineno">  660</span>        ESM_ESTATUS4 = esmREG-&gt;SR4[0U];</div>
<div class="line"><span class="lineno">  661</span>        ESM_ESTATUS1 = esmREG-&gt;SR1[2U];</div>
<div class="line"><span class="lineno">  662</span>        <span class="comment">/* check if the ESM group1 channel 41 is set and group3 channel 1 is set */</span></div>
<div class="line"><span class="lineno">  663</span>        <span class="keywordflow">if</span> (((ESM_ESTATUS4 &amp; 0x200U) == 0x200U) &amp;&amp; ((ESM_ESTATUS1 &amp; 0x2U) == 0x2U))</div>
<div class="line"><span class="lineno">  664</span>        {</div>
<div class="line"><span class="lineno">  665</span>           <span class="comment">/* stuck-at-zero test passed */</span></div>
<div class="line"><span class="lineno">  666</span>           result = TRUE;</div>
<div class="line"><span class="lineno">  667</span>        }</div>
<div class="line"><span class="lineno">  668</span>    }</div>
<div class="line"><span class="lineno">  669</span> </div>
<div class="line"><span class="lineno">  670</span>    <span class="comment">/* put the pins back low */</span></div>
<div class="line"><span class="lineno">  671</span>    efcREG-&gt;BOUNDARY = OUTPUT_ENABLE;</div>
<div class="line"><span class="lineno">  672</span> </div>
<div class="line"><span class="lineno">  673</span>    <span class="comment">/* clear group1 flag */</span></div>
<div class="line"><span class="lineno">  674</span>    esmREG-&gt;SR4[0U] = 0x200U;</div>
<div class="line"><span class="lineno">  675</span> </div>
<div class="line"><span class="lineno">  676</span>    <span class="comment">/* clear group3 flag */</span></div>
<div class="line"><span class="lineno">  677</span>    esmREG-&gt;SR1[2U] = 0x2U;</div>
<div class="line"><span class="lineno">  678</span> </div>
<div class="line"><span class="lineno">  679</span>    <span class="comment">/* The nERROR pin will become inactive once the LTC counter expires */</span></div>
<div class="line"><span class="lineno">  680</span>    esmREG-&gt;EKR = 0x5U;</div>
<div class="line"><span class="lineno">  681</span> </div>
<div class="line"><span class="lineno">  682</span>    <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno">  683</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="af9ecd48548d7a3d98d5dcc44d1e7ca51" name="af9ecd48548d7a3d98d5dcc44d1e7ca51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9ecd48548d7a3d98d5dcc44d1e7ca51">&#9670;&#160;</a></span>enableParity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enableParity </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable peripheral RAM parity. </p>
<p>This function enables RAM parity for all peripherals for which RAM parity check is enabled. This function is called before memoryInit in the startup </p>
<div class="fragment"><div class="line"><span class="lineno"> 2486</span>{</div>
<div class="line"><span class="lineno"> 2487</span>    VIM_PARCTL = 0xAU;             <span class="comment">/* Enable VIM RAM parity */</span></div>
<div class="line"><span class="lineno"> 2488</span>    canREG1-&gt;CTL = ((uint32)0xAU &lt;&lt; 10U) | 1U;    <span class="comment">/* Enable CAN1 RAM parity */</span></div>
<div class="line"><span class="lineno"> 2489</span>    canREG2-&gt;CTL = ((uint32)0xAU &lt;&lt; 10U) | 1U;    <span class="comment">/* Enable CAN2 RAM parity */</span></div>
<div class="line"><span class="lineno"> 2490</span>    adcREG1-&gt;PARCR = 0xAU;         <span class="comment">/* Enable ADC1 RAM parity */</span></div>
<div class="line"><span class="lineno"> 2491</span>    hetREG1-&gt;PCR = 0xAU;           <span class="comment">/* Enable HET1 RAM parity */</span></div>
<div class="line"><span class="lineno"> 2492</span>    htuREG1-&gt;PCR = 0xAU;           <span class="comment">/* Enable HTU1 RAM parity */</span></div>
<div class="line"><span class="lineno"> 2493</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1f3b71a00b6347cb5f7f6eb922c36c9e" name="a1f3b71a00b6347cb5f7f6eb922c36c9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f3b71a00b6347cb5f7f6eb922c36c9e">&#9670;&#160;</a></span>errata_PBIST_4()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void errata_PBIST_4 </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Workaround for the Errata PBIST#4. </p>
<p>This function is workaround for Errata PBIST#4. This function is designed to initialize the ROMs using the PBIST controller. The CPU will configure the PBIST controller to test the PBIST ROM and STC ROM. This function should be called at startup after system init before using the ROMs.</p>
<dl class="section note"><dt>Note</dt><dd>: This Function uses register's which are not exposed to users through TRM , to run custom algorithm. User can use this function as Black box. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno"> 2334</span>{</div>
<div class="line"><span class="lineno"> 2335</span>    <span class="keyword">volatile</span> uint32 i = 0U;</div>
<div class="line"><span class="lineno"> 2336</span>    uint8 ROM_count;</div>
<div class="line"><span class="lineno"> 2337</span>    sint32 PBIST_wait_done_loop;</div>
<div class="line"><span class="lineno"> 2338</span>    uint32 pmuCalibration, pmuCount;</div>
<div class="line"><span class="lineno"> 2339</span> </div>
<div class="line"><span class="lineno"> 2340</span>    <span class="comment">/* PMU calibration */</span></div>
<div class="line"><span class="lineno"> 2341</span>    _pmuEnableCountersGlobal_();</div>
<div class="line"><span class="lineno"> 2342</span>    _pmuResetCounters_();</div>
<div class="line"><span class="lineno"> 2343</span>    _pmuStartCounters_(pmuCYCLE_COUNTER);</div>
<div class="line"><span class="lineno"> 2344</span>    _pmuStopCounters_(pmuCYCLE_COUNTER);</div>
<div class="line"><span class="lineno"> 2345</span>    pmuCalibration=_pmuGetCycleCount_();</div>
<div class="line"><span class="lineno"> 2346</span> </div>
<div class="line"><span class="lineno"> 2347</span>    <span class="comment">/* Loop for Executing PBIST ROM and STC ROM */</span></div>
<div class="line"><span class="lineno"> 2348</span>    <span class="keywordflow">for</span> (ROM_count = 0U; ROM_count &lt; 2U; ROM_count++)</div>
<div class="line"><span class="lineno"> 2349</span>    {</div>
<div class="line"><span class="lineno"> 2350</span>        PBIST_wait_done_loop = 0;</div>
<div class="line"><span class="lineno"> 2351</span>    </div>
<div class="line"><span class="lineno"> 2352</span>        <span class="comment">/* Disable PBIST clocks and ROM clock */</span></div>
<div class="line"><span class="lineno"> 2353</span>        pbistREG-&gt;PACT = 0x0U;</div>
<div class="line"><span class="lineno"> 2354</span>        </div>
<div class="line"><span class="lineno"> 2355</span>        <span class="comment">/* PBIST Clocks did not disable */</span></div>
<div class="line"><span class="lineno"> 2356</span>        <span class="keywordflow">if</span>(pbistREG-&gt;PACT != 0x0U ) </div>
<div class="line"><span class="lineno"> 2357</span>        {</div>
<div class="line"><span class="lineno"> 2358</span>            <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(PBISTSELFCHECK_FAIL3);</div>
<div class="line"><span class="lineno"> 2359</span>        }</div>
<div class="line"><span class="lineno"> 2360</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2361</span>        {</div>
<div class="line"><span class="lineno"> 2362</span>            <span class="comment">/* Disable memory self controller */</span></div>
<div class="line"><span class="lineno"> 2363</span>            systemREG1-&gt;MSTGCR = 0x00000005U;</div>
<div class="line"><span class="lineno"> 2364</span>            </div>
<div class="line"><span class="lineno"> 2365</span>            <span class="comment">/* Disable Memory Initialization controller */</span></div>
<div class="line"><span class="lineno"> 2366</span>            systemREG1-&gt;MINITGCR = 0x5U;</div>
<div class="line"><span class="lineno"> 2367</span> </div>
<div class="line"><span class="lineno"> 2368</span>            <span class="comment">/* Enable memory self controller */</span></div>
<div class="line"><span class="lineno"> 2369</span>            systemREG1-&gt;MSTGCR = 0x000000AU;                               </div>
<div class="line"><span class="lineno"> 2370</span> </div>
<div class="line"><span class="lineno"> 2371</span>            <span class="comment">/* Clear PBIST Done */</span></div>
<div class="line"><span class="lineno"> 2372</span>            systemREG1-&gt;MSTCGSTAT = 0x1U;</div>
<div class="line"><span class="lineno"> 2373</span>            </div>
<div class="line"><span class="lineno"> 2374</span>            <span class="comment">/* Enable PBIST controller */</span></div>
<div class="line"><span class="lineno"> 2375</span>            systemREG1-&gt;MSINENA = 0x1U;</div>
<div class="line"><span class="lineno"> 2376</span> </div>
<div class="line"><span class="lineno"> 2377</span>            <span class="comment">/*SAFETYMCUSW 134 S MR:12.2 &lt;APPROVED&gt; &quot;Wait for few clock cycles (Value of i not used)&quot; */</span></div>
<div class="line"><span class="lineno"> 2378</span>            <span class="comment">/*SAFETYMCUSW 134 S MR:12.2 &lt;APPROVED&gt; &quot;Wait for few clock cycles (Value of i not used)&quot; */</span></div>
<div class="line"><span class="lineno"> 2379</span>            <span class="comment">/* wait for 32 VBUS clock cycles at least, based on HCLK to VCLK ratio */</span></div>
<div class="line"><span class="lineno"> 2380</span>            <span class="keywordflow">for</span> (i=0U; i&lt;(32U + (32U * 1U)); i++){ <span class="comment">/* Wait */</span> }</div>
<div class="line"><span class="lineno"> 2381</span> </div>
<div class="line"><span class="lineno"> 2382</span>            <span class="comment">/* Enable PBIST clocks and ROM clock */</span></div>
<div class="line"><span class="lineno"> 2383</span>            pbistREG-&gt;PACT = 0x3U;</div>
<div class="line"><span class="lineno"> 2384</span> </div>
<div class="line"><span class="lineno"> 2385</span>            <span class="comment">/* CPU control of PBIST */</span></div>
<div class="line"><span class="lineno"> 2386</span>            pbistREG-&gt;DLR = 0x10U;</div>
<div class="line"><span class="lineno"> 2387</span> </div>
<div class="line"><span class="lineno"> 2388</span>            <span class="comment">/* Load PBIST ALGO to initialize the ROMs */</span></div>
<div class="line"><span class="lineno"> 2389</span>            *(<span class="keyword">volatile</span> uint32 *)0xFFFFE400U = 0x00000001U;</div>
<div class="line"><span class="lineno"> 2390</span>            *(<span class="keyword">volatile</span> uint32 *)0xFFFFE440U = 0x00000025U;</div>
<div class="line"><span class="lineno"> 2391</span>            *(<span class="keyword">volatile</span> uint32 *)0xFFFFE404U = 0x62400001U;</div>
<div class="line"><span class="lineno"> 2392</span>            *(<span class="keyword">volatile</span> uint32 *)0xFFFFE444U = 0x00000004U;</div>
<div class="line"><span class="lineno"> 2393</span>            *(<span class="keyword">volatile</span> uint32 *)0xFFFFE408U = 0x00068003U;</div>
<div class="line"><span class="lineno"> 2394</span>            *(<span class="keyword">volatile</span> uint32 *)0xFFFFE448U = 0x00000000U;</div>
<div class="line"><span class="lineno"> 2395</span>            *(<span class="keyword">volatile</span> uint32 *)0xFFFFE40CU = 0x00000004U;</div>
<div class="line"><span class="lineno"> 2396</span>            *(<span class="keyword">volatile</span> uint32 *)0xFFFFE44CU = 0x00006860U;</div>
<div class="line"><span class="lineno"> 2397</span>            *(<span class="keyword">volatile</span> uint32 *)0xFFFFE410U = 0x00000000U;</div>
<div class="line"><span class="lineno"> 2398</span>            *(<span class="keyword">volatile</span> uint32 *)0xFFFFE450U = 0x00000001U;</div>
<div class="line"><span class="lineno"> 2399</span>            *(<span class="keyword">volatile</span> uint32 *)0xFFFFE540U = 0x000003E8U;</div>
<div class="line"><span class="lineno"> 2400</span>            *(<span class="keyword">volatile</span> uint32 *)0xFFFFE550U = 0x00000001U;</div>
<div class="line"><span class="lineno"> 2401</span>            *(<span class="keyword">volatile</span> uint32 *)0xFFFFE530U = 0x00000000U;</div>
<div class="line"><span class="lineno"> 2402</span>            </div>
<div class="line"><span class="lineno"> 2403</span>            <span class="comment">/* SELECT ROM */</span></div>
<div class="line"><span class="lineno"> 2404</span>            <span class="keywordflow">if</span> (ROM_count == 1U)</div>
<div class="line"><span class="lineno"> 2405</span>            {   </div>
<div class="line"><span class="lineno"> 2406</span>                <span class="comment">/* SELECT PBIST ROM */</span>          </div>
<div class="line"><span class="lineno"> 2407</span>                *(<span class="keyword">volatile</span> uint32 *)0xFFFFE520U = 0x00000002U;</div>
<div class="line"><span class="lineno"> 2408</span>                *(<span class="keyword">volatile</span> uint32 *)0xFFFFE524U = 0x00000000U;</div>
<div class="line"><span class="lineno"> 2409</span>                pbistREG-&gt;RAMT                  = 0x01002008U;</div>
<div class="line"><span class="lineno"> 2410</span>            } </div>
<div class="line"><span class="lineno"> 2411</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2412</span>            {               </div>
<div class="line"><span class="lineno"> 2413</span>                <span class="comment">/* SELECT STC ROM */</span>    </div>
<div class="line"><span class="lineno"> 2414</span>                *(<span class="keyword">volatile</span> uint32 *)0xFFFFE520U = 0xFFF0007CU;</div>
<div class="line"><span class="lineno"> 2415</span>                *(<span class="keyword">volatile</span> uint32 *)0xFFFFE524U = 0x06B3FFFFU;</div>
<div class="line"><span class="lineno"> 2416</span>                pbistREG-&gt;RAMT                  = 0x02002008U;</div>
<div class="line"><span class="lineno"> 2417</span>            }</div>
<div class="line"><span class="lineno"> 2418</span> </div>
<div class="line"><span class="lineno"> 2419</span>            <span class="comment">/*  Setup using special reserved registers as part of errata fix */</span></div>
<div class="line"><span class="lineno"> 2420</span>            <span class="comment">/*      (Only to be used in this function) */</span></div>
<div class="line"><span class="lineno"> 2421</span>            pbistREG-&gt;rsvd1[4U]    = 1U;</div>
<div class="line"><span class="lineno"> 2422</span>            pbistREG-&gt;rsvd1[0U]    = 2U;</div>
<div class="line"><span class="lineno"> 2423</span> </div>
<div class="line"><span class="lineno"> 2424</span>            <span class="comment">/* Start PMU counter */</span></div>
<div class="line"><span class="lineno"> 2425</span>            _pmuResetCounters_();</div>
<div class="line"><span class="lineno"> 2426</span>            _pmuStartCounters_(pmuCYCLE_COUNTER);</div>
<div class="line"><span class="lineno"> 2427</span> </div>
<div class="line"><span class="lineno"> 2428</span>            <span class="comment">/* PBIST_RUN */</span></div>
<div class="line"><span class="lineno"> 2429</span>            pbistREG-&gt;rsvd1[1U]    = 1U;</div>
<div class="line"><span class="lineno"> 2430</span> </div>
<div class="line"><span class="lineno"> 2431</span>            <span class="comment">/* wait until memory self-test done is indicated */</span></div>
<div class="line"><span class="lineno"> 2432</span>            <span class="comment">/*SAFETYMCUSW 28 D MR:NA &lt;APPROVED&gt; &quot;Hardware status bit read check&quot; */</span></div>
<div class="line"><span class="lineno"> 2433</span>            <span class="keywordflow">while</span> ((systemREG1-&gt;MSTCGSTAT &amp; 0x1U) != 0x1U) </div>
<div class="line"><span class="lineno"> 2434</span>            {</div>
<div class="line"><span class="lineno"> 2435</span>            }<span class="comment">/* Wait */</span></div>
<div class="line"><span class="lineno"> 2436</span> </div>
<div class="line"><span class="lineno"> 2437</span>            <span class="comment">/* Stop PMU counter */</span></div>
<div class="line"><span class="lineno"> 2438</span>            _pmuStopCounters_(pmuCYCLE_COUNTER);</div>
<div class="line"><span class="lineno"> 2439</span>            </div>
<div class="line"><span class="lineno"> 2440</span>            <span class="comment">/* Get CPU cycle count */</span></div>
<div class="line"><span class="lineno"> 2441</span>            pmuCount =_pmuGetCycleCount_();</div>
<div class="line"><span class="lineno"> 2442</span>            </div>
<div class="line"><span class="lineno"> 2443</span>            <span class="comment">/* Calculate PBIST test complete time in ROM Clock */</span></div>
<div class="line"><span class="lineno"> 2444</span>            <span class="comment">/* 2 - Divide value ( Default is 2 in HALCoGen) */</span></div>
<div class="line"><span class="lineno"> 2445</span>            <span class="comment">/* 1000 = 0x3E8 - Test Loop count in ROM Algorithm */</span></div>
<div class="line"><span class="lineno"> 2446</span>            pmuCount = pmuCount - pmuCalibration;</div>
<div class="line"><span class="lineno"> 2447</span>            PBIST_wait_done_loop = ((sint32)pmuCount) - 1000;</div>
<div class="line"><span class="lineno"> 2448</span> </div>
<div class="line"><span class="lineno"> 2449</span>            <span class="comment">/* Check PBIST status results (Address, Status, Count, etc...) */</span></div>
<div class="line"><span class="lineno"> 2450</span>            <span class="keywordflow">if</span> ((pbistREG-&gt;FSRA0 | pbistREG-&gt;FSRA1 | pbistREG-&gt;FSRDL0 | pbistREG-&gt;rsvd3 |</div>
<div class="line"><span class="lineno"> 2451</span>                 pbistREG-&gt;FSRDL1 | pbistREG-&gt;rsvd4[0U] | pbistREG-&gt;rsvd4[1U]) != 0U)</div>
<div class="line"><span class="lineno"> 2452</span>            {</div>
<div class="line"><span class="lineno"> 2453</span>                <span class="comment">/* PBIST Failure for the Algorithm chosen above */</span></div>
<div class="line"><span class="lineno"> 2454</span>                <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(PBISTSELFCHECK_FAIL1);</div>
<div class="line"><span class="lineno"> 2455</span>            }</div>
<div class="line"><span class="lineno"> 2456</span> </div>
<div class="line"><span class="lineno"> 2457</span>            <span class="comment">/* Check that the algorithm executed in the expected amount of time. */</span></div>
<div class="line"><span class="lineno"> 2458</span>            <span class="comment">/* This time is dependent on the ROMCLKDIV selected */</span></div>
<div class="line"><span class="lineno"> 2459</span>            <span class="keywordflow">if</span> ((PBIST_wait_done_loop &lt;= 20) || (PBIST_wait_done_loop &gt;= 200) )</div>
<div class="line"><span class="lineno"> 2460</span>            {</div>
<div class="line"><span class="lineno"> 2461</span>                <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(PBISTSELFCHECK_FAIL2);</div>
<div class="line"><span class="lineno"> 2462</span>            }</div>
<div class="line"><span class="lineno"> 2463</span> </div>
<div class="line"><span class="lineno"> 2464</span>            <span class="comment">/* Disable PBIST clocks and ROM clock */</span></div>
<div class="line"><span class="lineno"> 2465</span>            pbistREG-&gt;PACT = 0x0U;</div>
<div class="line"><span class="lineno"> 2466</span> </div>
<div class="line"><span class="lineno"> 2467</span>            <span class="comment">/* Disable PBIST */</span></div>
<div class="line"><span class="lineno"> 2468</span>            systemREG1-&gt;MSTGCR &amp;= 0xFFFFFFF0U;</div>
<div class="line"><span class="lineno"> 2469</span>            systemREG1-&gt;MSTGCR |= 0x5U;</div>
<div class="line"><span class="lineno"> 2470</span>        }</div>
<div class="line"><span class="lineno"> 2471</span>    } <span class="comment">/* ROM Loop */</span></div>
<div class="line"><span class="lineno"> 2472</span> </div>
<div class="line"><span class="lineno"> 2473</span>    _pmuDisableCountersGlobal_();</div>
<div class="line"><span class="lineno"> 2474</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa035d17d1ecb2d6bb095a5c0b44a2143" name="aa035d17d1ecb2d6bb095a5c0b44a2143"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa035d17d1ecb2d6bb095a5c0b44a2143">&#9670;&#160;</a></span>fmcBus1ParityCheck()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fmcBus1ParityCheck </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2081</span>{</div>
<div class="line"><span class="lineno"> 2082</span>    uint32 regBkupFparOvr,regBckupFdiagctrl;</div>
<div class="line"><span class="lineno"> 2083</span>    <span class="keyword">volatile</span> uint32 flashread = 0U;</div>
<div class="line"><span class="lineno"> 2084</span> </div>
<div class="line"><span class="lineno"> 2085</span>    <span class="comment">/* Backup registers */</span></div>
<div class="line"><span class="lineno"> 2086</span>    regBkupFparOvr = flashWREG-&gt;FPAROVR;</div>
<div class="line"><span class="lineno"> 2087</span>    regBckupFdiagctrl = flashWREG-&gt;FDIAGCTRL;</div>
<div class="line"><span class="lineno"> 2088</span> </div>
<div class="line"><span class="lineno"> 2089</span>    <span class="comment">/* Read to unfreeze the error address registers */</span></div>
<div class="line"><span class="lineno"> 2090</span>    flashread = flashWREG-&gt;FUNCERRADD;</div>
<div class="line"><span class="lineno"> 2091</span> </div>
<div class="line"><span class="lineno"> 2092</span>    <span class="comment">/* clear status register */</span></div>
<div class="line"><span class="lineno"> 2093</span>    flashWREG-&gt;FEDACSTATUS = 0x400U;</div>
<div class="line"><span class="lineno"> 2094</span> </div>
<div class="line"><span class="lineno"> 2095</span>    <span class="comment">/* Enable Parity Error */</span></div>
<div class="line"><span class="lineno"> 2096</span>    flashWREG-&gt;FPAROVR  = (uint32)((uint32)0x5U &lt;&lt; 9U)</div>
<div class="line"><span class="lineno"> 2097</span>                        | (uint32)((uint32)0x5U &lt;&lt; 12U);</div>
<div class="line"><span class="lineno"> 2098</span> </div>
<div class="line"><span class="lineno"> 2099</span>    <span class="comment">/* set Diag test mode */</span></div>
<div class="line"><span class="lineno"> 2100</span>    flashWREG-&gt;FDIAGCTRL = 0x00050000U | 0x00000007U;</div>
<div class="line"><span class="lineno"> 2101</span> </div>
<div class="line"><span class="lineno"> 2102</span>    <span class="comment">/* Add parity */</span></div>
<div class="line"><span class="lineno"> 2103</span>    flashWREG-&gt;FPAROVR |= 0x00000100U;</div>
<div class="line"><span class="lineno"> 2104</span> </div>
<div class="line"><span class="lineno"> 2105</span>    <span class="comment">/* Start Test */</span></div>
<div class="line"><span class="lineno"> 2106</span>    flashWREG-&gt;FDIAGCTRL |= 0x1000000U;</div>
<div class="line"><span class="lineno"> 2107</span> </div>
<div class="line"><span class="lineno"> 2108</span>    <span class="comment">/* Wait until test done */</span></div>
<div class="line"><span class="lineno"> 2109</span>    <span class="comment">/*SAFETYMCUSW 28 D MR:NA &lt;APPROVED&gt; &quot;Hardware status bit read check&quot; */</span></div>
<div class="line"><span class="lineno"> 2110</span>    <span class="comment">/*SAFETYMCUSW 139 S MR:13.7 &lt;APPROVED&gt; &quot;Hardware status bit read check&quot; */</span></div>
<div class="line"><span class="lineno"> 2111</span>    <span class="keywordflow">while</span>((flashWREG-&gt;FDIAGCTRL &amp; 0x1000000U) == 0x1000000U)</div>
<div class="line"><span class="lineno"> 2112</span>    {</div>
<div class="line"><span class="lineno"> 2113</span>    }<span class="comment">/* Wait */</span></div>
<div class="line"><span class="lineno"> 2114</span> </div>
<div class="line"><span class="lineno"> 2115</span>    <span class="comment">/* Check address Error */</span></div>
<div class="line"><span class="lineno"> 2116</span>    <span class="comment">/*SAFETYMCUSW 139 S MR:13.7 &lt;APPROVED&gt; &quot;Hardware status bit read check&quot; */</span></div>
<div class="line"><span class="lineno"> 2117</span>    <span class="keywordflow">if</span>((flashWREG-&gt;FEDACSTATUS &amp; 0x400U) != 0x400U)</div>
<div class="line"><span class="lineno"> 2118</span>    {</div>
<div class="line"><span class="lineno"> 2119</span>        <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(FMCBUS1PARITYCHECK_FAIL1);</div>
<div class="line"><span class="lineno"> 2120</span>    }</div>
<div class="line"><span class="lineno"> 2121</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2122</span>    {</div>
<div class="line"><span class="lineno"> 2123</span>        <span class="comment">/* clear status register */</span></div>
<div class="line"><span class="lineno"> 2124</span>        flashWREG-&gt;FEDACSTATUS = 0x400U;</div>
<div class="line"><span class="lineno"> 2125</span> </div>
<div class="line"><span class="lineno"> 2126</span>        <span class="comment">/* check if ESM is flagged */</span></div>
<div class="line"><span class="lineno"> 2127</span>        <span class="comment">/*SAFETYMCUSW 139 S MR:13.7 &lt;APPROVED&gt; &quot;Hardware status bit read check&quot; */</span></div>
<div class="line"><span class="lineno"> 2128</span>        <span class="keywordflow">if</span>((esmREG-&gt;SR1[1U] &amp; 0x0000010U) == 0U)</div>
<div class="line"><span class="lineno"> 2129</span>        {</div>
<div class="line"><span class="lineno"> 2130</span>            <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(FMCBUS1PARITYCHECK_FAIL2);</div>
<div class="line"><span class="lineno"> 2131</span>        }</div>
<div class="line"><span class="lineno"> 2132</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2133</span>        {</div>
<div class="line"><span class="lineno"> 2134</span>            <span class="comment">/* clear ESM flag */</span></div>
<div class="line"><span class="lineno"> 2135</span>            esmREG-&gt;SR1[1U] |= 0x0000010U;</div>
<div class="line"><span class="lineno"> 2136</span>            esmREG-&gt;SSR2 |= 0x0000010U;</div>
<div class="line"><span class="lineno"> 2137</span>            esmREG-&gt;EKR = 0x5U;</div>
<div class="line"><span class="lineno"> 2138</span> </div>
<div class="line"><span class="lineno"> 2139</span>            <span class="comment">/* Stop Diag test mode */</span></div>
<div class="line"><span class="lineno"> 2140</span>            flashWREG-&gt;FDIAGCTRL = regBckupFdiagctrl;</div>
<div class="line"><span class="lineno"> 2141</span>            flashWREG-&gt;FPAROVR     = regBkupFparOvr;</div>
<div class="line"><span class="lineno"> 2142</span>        }</div>
<div class="line"><span class="lineno"> 2143</span>    }</div>
<div class="line"><span class="lineno"> 2144</span> </div>
<div class="line"><span class="lineno"> 2145</span>    <span class="comment">/* Read to unfreeze the error address registers */</span></div>
<div class="line"><span class="lineno"> 2146</span>    flashread = flashWREG-&gt;FUNCERRADD;</div>
<div class="line"><span class="lineno"> 2147</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3248a50d5c0516f336b46aa0114ba9be" name="a3248a50d5c0516f336b46aa0114ba9be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3248a50d5c0516f336b46aa0114ba9be">&#9670;&#160;</a></span>fmcBus2Check()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fmcBus2Check </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Self Check Flash Bus2 Interface. </p>
<p>This function self checks Flash Bus2 Interface </p>
<div class="fragment"><div class="line"><span class="lineno">  757</span>{</div>
<div class="line"><span class="lineno">  758</span><span class="comment">/* USER CODE BEGIN (32) */</span></div>
<div class="line"><span class="lineno">  759</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  760</span>    <span class="comment">/* enable ECC logic inside FMC */</span></div>
<div class="line"><span class="lineno">  761</span>    flashWREG-&gt;FEDACCTRL1 = 0x000A060AU;</div>
<div class="line"><span class="lineno">  762</span> </div>
<div class="line"><span class="lineno">  763</span>    <span class="keywordflow">if</span> ((esmREG-&gt;SR1[0U] &amp; 0x40U) == 0x40U)</div>
<div class="line"><span class="lineno">  764</span>    {</div>
<div class="line"><span class="lineno">  765</span>        <span class="comment">/* a 1-bit error was detected during flash OTP read by flash module</span></div>
<div class="line"><span class="lineno">  766</span><span class="comment">           run a self-check on ECC logic inside FMC */</span></div>
<div class="line"><span class="lineno">  767</span> </div>
<div class="line"><span class="lineno">  768</span>        <span class="comment">/* clear ESM group1 channel 6 flag */</span></div>
<div class="line"><span class="lineno">  769</span>        esmREG-&gt;SR1[0U] = 0x40U;</div>
<div class="line"><span class="lineno">  770</span> </div>
<div class="line"><span class="lineno">  771</span>        <a class="code hl_function" href="sys__selftest_8c.html#a183a0d9f1300394cff2f8fe0aa034d4b">fmcECCcheck</a>();</div>
<div class="line"><span class="lineno">  772</span>    }</div>
<div class="line"><span class="lineno">  773</span> </div>
<div class="line"><span class="lineno">  774</span>    <span class="comment">/* no 2-bit or 1-bit error detected during power-up */</span></div>
<div class="line"><span class="lineno">  775</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  776</span>    {</div>
<div class="line"><span class="lineno">  777</span>        <a class="code hl_function" href="sys__selftest_8c.html#a183a0d9f1300394cff2f8fe0aa034d4b">fmcECCcheck</a>();</div>
<div class="line"><span class="lineno">  778</span>    }</div>
<div class="line"><span class="lineno">  779</span><span class="comment">/* USER CODE BEGIN (33) */</span></div>
<div class="line"><span class="lineno">  780</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  781</span>}</div>
<div class="ttc" id="asys__selftest_8c_html_a183a0d9f1300394cff2f8fe0aa034d4b"><div class="ttname"><a href="sys__selftest_8c.html#a183a0d9f1300394cff2f8fe0aa034d4b">fmcECCcheck</a></div><div class="ttdeci">void fmcECCcheck(void)</div><div class="ttdoc">Check Flash ECC Single Bit and multi Bit errors detection logic.</div><div class="ttdef"><b>Definition:</b> sys_selftest.c:791</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a183a0d9f1300394cff2f8fe0aa034d4b" name="a183a0d9f1300394cff2f8fe0aa034d4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a183a0d9f1300394cff2f8fe0aa034d4b">&#9670;&#160;</a></span>fmcECCcheck()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fmcECCcheck </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check Flash ECC Single Bit and multi Bit errors detection logic. </p>
<p>This function Checks Flash ECC Single Bit and multi Bit errors detection logic. </p>
<div class="fragment"><div class="line"><span class="lineno">  792</span>{</div>
<div class="line"><span class="lineno">  793</span>    <span class="keyword">volatile</span> uint32 otpread;</div>
<div class="line"><span class="lineno">  794</span>    <span class="keyword">volatile</span> uint32 temp;</div>
<div class="line"><span class="lineno">  795</span> </div>
<div class="line"><span class="lineno">  796</span><span class="comment">/* USER CODE BEGIN (34) */</span></div>
<div class="line"><span class="lineno">  797</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  798</span> </div>
<div class="line"><span class="lineno">  799</span>    <span class="comment">/* read location with deliberate 1-bit error */</span></div>
<div class="line"><span class="lineno">  800</span>    otpread = flash1bitError;</div>
<div class="line"><span class="lineno">  801</span>    <span class="keywordflow">if</span> ((esmREG-&gt;SR1[0U] &amp; 0x40U) == 0x40U)</div>
<div class="line"><span class="lineno">  802</span>    {</div>
<div class="line"><span class="lineno">  803</span>        <span class="comment">/* 1-bit failure was indicated and corrected */</span></div>
<div class="line"><span class="lineno">  804</span>        flashWREG-&gt;FEDACSTATUS = 0x00010006U;</div>
<div class="line"><span class="lineno">  805</span> </div>
<div class="line"><span class="lineno">  806</span>        <span class="comment">/* clear ESM group1 channel 6 flag */</span></div>
<div class="line"><span class="lineno">  807</span>        esmREG-&gt;SR1[0U] = 0x40U;</div>
<div class="line"><span class="lineno">  808</span> </div>
<div class="line"><span class="lineno">  809</span>        <span class="comment">/* read location with deliberate 2-bit error */</span></div>
<div class="line"><span class="lineno">  810</span>        otpread = flash2bitError;</div>
<div class="line"><span class="lineno">  811</span>        <span class="keywordflow">if</span> ((esmREG-&gt;SR1[2U] &amp; 0x80U) == 0x80U)</div>
<div class="line"><span class="lineno">  812</span>        {</div>
<div class="line"><span class="lineno">  813</span>            <span class="comment">/* 2-bit failure was detected correctly */</span></div>
<div class="line"><span class="lineno">  814</span>            temp = flashWREG-&gt;FUNCERRADD;</div>
<div class="line"><span class="lineno">  815</span>            flashWREG-&gt;FEDACSTATUS = 0x00020100U;</div>
<div class="line"><span class="lineno">  816</span> </div>
<div class="line"><span class="lineno">  817</span>            <span class="comment">/* clear ESM group3 channel 7 */</span></div>
<div class="line"><span class="lineno">  818</span>            esmREG-&gt;SR1[2U] = 0x80U;</div>
<div class="line"><span class="lineno">  819</span> </div>
<div class="line"><span class="lineno">  820</span>            <span class="comment">/* The nERROR pin will become inactive once the LTC counter expires */</span></div>
<div class="line"><span class="lineno">  821</span>            esmREG-&gt;EKR = 0x5U;</div>
<div class="line"><span class="lineno">  822</span> </div>
<div class="line"><span class="lineno">  823</span>        }</div>
<div class="line"><span class="lineno">  824</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  825</span>        {</div>
<div class="line"><span class="lineno">  826</span>            <span class="comment">/* ECC logic inside FMC cannot detect 2-bit error */</span></div>
<div class="line"><span class="lineno">  827</span>            <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(FMCECCCHECK_FAIL1);</div>
<div class="line"><span class="lineno">  828</span>        }</div>
<div class="line"><span class="lineno">  829</span>    }</div>
<div class="line"><span class="lineno">  830</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  831</span>    {</div>
<div class="line"><span class="lineno">  832</span>        <span class="comment">/* ECC logic inside FMC cannot detect 1-bit error */</span></div>
<div class="line"><span class="lineno">  833</span>        <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(FMCECCCHECK_FAIL1);</div>
<div class="line"><span class="lineno">  834</span>    }</div>
<div class="line"><span class="lineno">  835</span><span class="comment">/* USER CODE BEGIN (35) */</span></div>
<div class="line"><span class="lineno">  836</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  837</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a66f658578435dc4d3984c76a3d2ed959" name="a66f658578435dc4d3984c76a3d2ed959"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66f658578435dc4d3984c76a3d2ed959">&#9670;&#160;</a></span>het1ParityCheck()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void het1ParityCheck </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Routine to check HET1 RAM parity error detection and signaling mechanism. </p>
<p>Routine to check HET1 RAM parity error detection and signaling mechanism </p>
<div class="fragment"><div class="line"><span class="lineno"> 1244</span>{</div>
<div class="line"><span class="lineno"> 1245</span>    <span class="keyword">volatile</span> uint32 nhetread = 0U;</div>
<div class="line"><span class="lineno"> 1246</span>    uint32 hetpcr_bk = hetREG1-&gt;PCR;</div>
<div class="line"><span class="lineno"> 1247</span> </div>
<div class="line"><span class="lineno"> 1248</span><span class="comment">/* USER CODE BEGIN (53) */</span></div>
<div class="line"><span class="lineno"> 1249</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno"> 1250</span> </div>
<div class="line"><span class="lineno"> 1251</span>    <span class="comment">/* Set TEST mode and enable parity checking */</span></div>
<div class="line"><span class="lineno"> 1252</span>    hetREG1-&gt;PCR = 0x0000010AU;</div>
<div class="line"><span class="lineno"> 1253</span> </div>
<div class="line"><span class="lineno"> 1254</span>    <span class="comment">/* flip parity bit */</span></div>
<div class="line"><span class="lineno"> 1255</span>    NHET1RAMPARLOC ^= 0x1U;</div>
<div class="line"><span class="lineno"> 1256</span> </div>
<div class="line"><span class="lineno"> 1257</span>    <span class="comment">/* Disable TEST mode */</span></div>
<div class="line"><span class="lineno"> 1258</span>    hetREG1-&gt;PCR = 0x0000000AU;</div>
<div class="line"><span class="lineno"> 1259</span> </div>
<div class="line"><span class="lineno"> 1260</span>    <span class="comment">/* read to cause parity error */</span></div>
<div class="line"><span class="lineno"> 1261</span>    nhetread = NHET1RAMLOC;</div>
<div class="line"><span class="lineno"> 1262</span> </div>
<div class="line"><span class="lineno"> 1263</span>    <span class="comment">/* check if ESM group1 channel 7 is flagged */</span></div>
<div class="line"><span class="lineno"> 1264</span>    <span class="keywordflow">if</span> ((esmREG-&gt;SR1[0U] &amp; 0x80U) ==0U)</div>
<div class="line"><span class="lineno"> 1265</span>    {</div>
<div class="line"><span class="lineno"> 1266</span>        <span class="comment">/* NHET1 RAM parity error was not flagged to ESM. */</span></div>
<div class="line"><span class="lineno"> 1267</span>        <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(HET1PARITYCHECK_FAIL1);</div>
<div class="line"><span class="lineno"> 1268</span>    }</div>
<div class="line"><span class="lineno"> 1269</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1270</span>    {</div>
<div class="line"><span class="lineno"> 1271</span>        <span class="comment">/* clear ESM group1 channel 7 flag */</span></div>
<div class="line"><span class="lineno"> 1272</span>        esmREG-&gt;SR1[0U] = 0x80U;</div>
<div class="line"><span class="lineno"> 1273</span> </div>
<div class="line"><span class="lineno"> 1274</span>        <span class="comment">/* Set TEST mode and enable parity checking */</span></div>
<div class="line"><span class="lineno"> 1275</span>        hetREG1-&gt;PCR = 0x0000010AU;</div>
<div class="line"><span class="lineno"> 1276</span> </div>
<div class="line"><span class="lineno"> 1277</span>        <span class="comment">/* Revert back to correct data, flip bit 0 of the parity location */</span></div>
<div class="line"><span class="lineno"> 1278</span>        NHET1RAMPARLOC ^= 0x1U;</div>
<div class="line"><span class="lineno"> 1279</span>    }</div>
<div class="line"><span class="lineno"> 1280</span> </div>
<div class="line"><span class="lineno"> 1281</span>    <span class="comment">/* Restore Parity comtrol register */</span></div>
<div class="line"><span class="lineno"> 1282</span>    hetREG1-&gt;PCR = hetpcr_bk;</div>
<div class="line"><span class="lineno"> 1283</span> </div>
<div class="line"><span class="lineno"> 1284</span><span class="comment">/* USER CODE BEGIN (54) */</span></div>
<div class="line"><span class="lineno"> 1285</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno"> 1286</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5f69665c7b7abb003cfb4a314ce1e943" name="a5f69665c7b7abb003cfb4a314ce1e943"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f69665c7b7abb003cfb4a314ce1e943">&#9670;&#160;</a></span>htu1ParityCheck()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void htu1ParityCheck </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Routine to check HTU1 RAM parity error detection and signaling mechanism. </p>
<p>Routine to check HTU1 RAM parity error detection and signaling mechanism </p>
<div class="fragment"><div class="line"><span class="lineno"> 1298</span>{</div>
<div class="line"><span class="lineno"> 1299</span>    <span class="keyword">volatile</span> uint32 hturead = 0U;</div>
<div class="line"><span class="lineno"> 1300</span>    uint32 htupcr_bk = htuREG1-&gt;PCR;</div>
<div class="line"><span class="lineno"> 1301</span> </div>
<div class="line"><span class="lineno"> 1302</span><span class="comment">/* USER CODE BEGIN (55) */</span></div>
<div class="line"><span class="lineno"> 1303</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno"> 1304</span> </div>
<div class="line"><span class="lineno"> 1305</span>    <span class="comment">/* Enable parity and TEST mode */</span></div>
<div class="line"><span class="lineno"> 1306</span>    htuREG1-&gt;PCR = 0x0000010AU;</div>
<div class="line"><span class="lineno"> 1307</span> </div>
<div class="line"><span class="lineno"> 1308</span>    <span class="comment">/* flip parity bit */</span></div>
<div class="line"><span class="lineno"> 1309</span>    HTU1PARLOC ^= 0x1U;</div>
<div class="line"><span class="lineno"> 1310</span> </div>
<div class="line"><span class="lineno"> 1311</span>    <span class="comment">/* Disable parity RAM test mode */</span></div>
<div class="line"><span class="lineno"> 1312</span>    htuREG1-&gt;PCR = 0x0000000AU;</div>
<div class="line"><span class="lineno"> 1313</span> </div>
<div class="line"><span class="lineno"> 1314</span>    <span class="comment">/* read to cause parity error */</span></div>
<div class="line"><span class="lineno"> 1315</span>    hturead = HTU1RAMLOC;</div>
<div class="line"><span class="lineno"> 1316</span> </div>
<div class="line"><span class="lineno"> 1317</span>    <span class="comment">/* check if ESM group1 channel 8 is flagged */</span></div>
<div class="line"><span class="lineno"> 1318</span>    <span class="keywordflow">if</span> ((esmREG-&gt;SR1[0U] &amp; 0x100U) == 0U)</div>
<div class="line"><span class="lineno"> 1319</span>    {</div>
<div class="line"><span class="lineno"> 1320</span>        <span class="comment">/* HTU1 RAM parity error was not flagged to ESM. */</span></div>
<div class="line"><span class="lineno"> 1321</span>        <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(HTU1PARITYCHECK_FAIL1);</div>
<div class="line"><span class="lineno"> 1322</span>    }</div>
<div class="line"><span class="lineno"> 1323</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1324</span>    {</div>
<div class="line"><span class="lineno"> 1325</span>        <span class="comment">/* Clear HTU parity error flag */</span></div>
<div class="line"><span class="lineno"> 1326</span>        htuREG1-&gt;PAR = 0x00010000U;</div>
<div class="line"><span class="lineno"> 1327</span>        esmREG-&gt;SR1[0U] = 0x100U;</div>
<div class="line"><span class="lineno"> 1328</span> </div>
<div class="line"><span class="lineno"> 1329</span>        <span class="comment">/* Enable parity and TEST mode */</span></div>
<div class="line"><span class="lineno"> 1330</span>        htuREG1-&gt;PCR = 0x0000010AU;</div>
<div class="line"><span class="lineno"> 1331</span> </div>
<div class="line"><span class="lineno"> 1332</span>        <span class="comment">/* Revert back to correct data, flip bit 0 of the parity location */</span></div>
<div class="line"><span class="lineno"> 1333</span>        HTU1PARLOC ^= 0x1U;</div>
<div class="line"><span class="lineno"> 1334</span>    }</div>
<div class="line"><span class="lineno"> 1335</span> </div>
<div class="line"><span class="lineno"> 1336</span>    <span class="comment">/* Restore Parity control register */</span></div>
<div class="line"><span class="lineno"> 1337</span>    htuREG1-&gt;PCR = htupcr_bk;</div>
<div class="line"><span class="lineno"> 1338</span> </div>
<div class="line"><span class="lineno"> 1339</span><span class="comment">/* USER CODE BEGIN (56) */</span></div>
<div class="line"><span class="lineno"> 1340</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno"> 1341</span> </div>
<div class="line"><span class="lineno"> 1342</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3184dfe0846903e1111348942160dfe7" name="a3184dfe0846903e1111348942160dfe7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3184dfe0846903e1111348942160dfe7">&#9670;&#160;</a></span>memoryInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void memoryInit </td>
          <td>(</td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>ram</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Memory Initialization Driver. </p>
<p>This function is called to perform Memory initialization of selected RAM's. </p>
<div class="fragment"><div class="line"><span class="lineno">  185</span>{</div>
<div class="line"><span class="lineno">  186</span><span class="comment">/* USER CODE BEGIN (6) */</span></div>
<div class="line"><span class="lineno">  187</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  188</span> </div>
<div class="line"><span class="lineno">  189</span>    <span class="comment">/* Enable Memory Hardware Initialization */</span></div>
<div class="line"><span class="lineno">  190</span>    systemREG1-&gt;MINITGCR = 0xAU;</div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span>    <span class="comment">/* Enable Memory Hardware Initialization for selected RAM&#39;s */</span></div>
<div class="line"><span class="lineno">  193</span>    systemREG1-&gt;MSINENA  = ram;</div>
<div class="line"><span class="lineno">  194</span> </div>
<div class="line"><span class="lineno">  195</span>    <span class="comment">/* Wait until Memory Hardware Initialization complete */</span></div>
<div class="line"><span class="lineno">  196</span>    <span class="comment">/*SAFETYMCUSW 28 D MR:NA &lt;APPROVED&gt; &quot;Hardware status bit read check&quot; */</span></div>
<div class="line"><span class="lineno">  197</span>    <span class="keywordflow">while</span>((systemREG1-&gt;MSTCGSTAT &amp; 0x00000100U) != 0x00000100U)</div>
<div class="line"><span class="lineno">  198</span>    {</div>
<div class="line"><span class="lineno">  199</span>    }<span class="comment">/* Wait */</span></div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>    <span class="comment">/* Disable Memory Hardware Initialization */</span></div>
<div class="line"><span class="lineno">  202</span>    systemREG1-&gt;MINITGCR = 0x5U;</div>
<div class="line"><span class="lineno">  203</span> </div>
<div class="line"><span class="lineno">  204</span><span class="comment">/* USER CODE BEGIN (7) */</span></div>
<div class="line"><span class="lineno">  205</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  206</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a050e0c2257b541e651eb35d32f10c98d" name="a050e0c2257b541e651eb35d32f10c98d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a050e0c2257b541e651eb35d32f10c98d">&#9670;&#160;</a></span>mibspi1ParityCheck()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mibspi1ParityCheck </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Routine to check MIBSPI1 RAM parity error detection and signaling mechanism. </p>
<p>Routine to check MIBSPI1 RAM parity error detection and signaling mechanism </p>
<div class="fragment"><div class="line"><span class="lineno"> 1551</span>{</div>
<div class="line"><span class="lineno"> 1552</span>    <span class="keyword">volatile</span> uint32 spiread = 0U;</div>
<div class="line"><span class="lineno"> 1553</span>    uint32 mibspie_bk = mibspiREG1-&gt;MIBSPIE;</div>
<div class="line"><span class="lineno"> 1554</span>    uint32 mibspictl_bk = mibspiREG1-&gt;UERRCTRL;</div>
<div class="line"><span class="lineno"> 1555</span> </div>
<div class="line"><span class="lineno"> 1556</span><span class="comment">/* USER CODE BEGIN (71) */</span></div>
<div class="line"><span class="lineno"> 1557</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno"> 1558</span> </div>
<div class="line"><span class="lineno"> 1559</span>    <span class="comment">/* enable multi-buffered mode */</span></div>
<div class="line"><span class="lineno"> 1560</span>    mibspiREG1-&gt;MIBSPIE = 0x1U;</div>
<div class="line"><span class="lineno"> 1561</span> </div>
<div class="line"><span class="lineno"> 1562</span>    <span class="comment">/* enable parity error detection */</span></div>
<div class="line"><span class="lineno"> 1563</span>    mibspiREG1-&gt;UERRCTRL = (mibspiREG1-&gt;UERRCTRL &amp; 0xFFFFFFF0U) | (0xAU);</div>
<div class="line"><span class="lineno"> 1564</span> </div>
<div class="line"><span class="lineno"> 1565</span>    <span class="comment">/* enable parity test mode */</span></div>
<div class="line"><span class="lineno"> 1566</span>    mibspiREG1-&gt;UERRCTRL |= 0x00000100U;</div>
<div class="line"><span class="lineno"> 1567</span> </div>
<div class="line"><span class="lineno"> 1568</span>    <span class="comment">/* flip bit 0 of the parity location */</span></div>
<div class="line"><span class="lineno"> 1569</span>    mibspiPARRAM1 ^= 0x1U;</div>
<div class="line"><span class="lineno"> 1570</span> </div>
<div class="line"><span class="lineno"> 1571</span>    <span class="comment">/* disable parity test mode */</span></div>
<div class="line"><span class="lineno"> 1572</span>    mibspiREG1-&gt;UERRCTRL &amp;= 0xFFFFFEFFU;</div>
<div class="line"><span class="lineno"> 1573</span> </div>
<div class="line"><span class="lineno"> 1574</span>    <span class="comment">/* read from MibSPI1 RAM to cause parity error */</span></div>
<div class="line"><span class="lineno"> 1575</span>    spiread = MIBSPI1RAMLOC;</div>
<div class="line"><span class="lineno"> 1576</span> </div>
<div class="line"><span class="lineno"> 1577</span>    <span class="comment">/* check if ESM group1 channel 17 is flagged */</span></div>
<div class="line"><span class="lineno"> 1578</span>    <span class="keywordflow">if</span> ((esmREG-&gt;SR1[0U] &amp; 0x20000U) == 0U)</div>
<div class="line"><span class="lineno"> 1579</span>    {</div>
<div class="line"><span class="lineno"> 1580</span>        <span class="comment">/* No MibSPI1 RAM parity error was flagged to ESM. */</span></div>
<div class="line"><span class="lineno"> 1581</span>        <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(MIBSPI1PARITYCHECK_FAIL1);</div>
<div class="line"><span class="lineno"> 1582</span>    }</div>
<div class="line"><span class="lineno"> 1583</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1584</span>    {</div>
<div class="line"><span class="lineno"> 1585</span>        <span class="comment">/* clear parity error flags */</span></div>
<div class="line"><span class="lineno"> 1586</span>        mibspiREG1-&gt;UERRSTAT = 0x3U;</div>
<div class="line"><span class="lineno"> 1587</span> </div>
<div class="line"><span class="lineno"> 1588</span>        <span class="comment">/* clear ESM group1 channel 17 flag */</span></div>
<div class="line"><span class="lineno"> 1589</span>        esmREG-&gt;SR1[0U] = 0x20000U;</div>
<div class="line"><span class="lineno"> 1590</span> </div>
<div class="line"><span class="lineno"> 1591</span>        <span class="comment">/* enable parity test mode */</span></div>
<div class="line"><span class="lineno"> 1592</span>        mibspiREG1-&gt;UERRCTRL |= 0x00000100U;</div>
<div class="line"><span class="lineno"> 1593</span> </div>
<div class="line"><span class="lineno"> 1594</span>        <span class="comment">/* Revert back to correct data, flip bit 0 of the parity location */</span></div>
<div class="line"><span class="lineno"> 1595</span>        mibspiPARRAM1 ^= 0x1U;</div>
<div class="line"><span class="lineno"> 1596</span>    }</div>
<div class="line"><span class="lineno"> 1597</span> </div>
<div class="line"><span class="lineno"> 1598</span>    <span class="comment">/* Restore MIBSPI control registers */</span></div>
<div class="line"><span class="lineno"> 1599</span>    mibspiREG1-&gt;UERRCTRL = mibspictl_bk;</div>
<div class="line"><span class="lineno"> 1600</span>    mibspiREG1-&gt;MIBSPIE = mibspie_bk;</div>
<div class="line"><span class="lineno"> 1601</span> </div>
<div class="line"><span class="lineno"> 1602</span><span class="comment">/* USER CODE BEGIN (72) */</span></div>
<div class="line"><span class="lineno"> 1603</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno"> 1604</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="adc8a571e336b788da775b5279597c9f9" name="adc8a571e336b788da775b5279597c9f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc8a571e336b788da775b5279597c9f9">&#9670;&#160;</a></span>pbistFail()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pbistFail </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2153</span>{</div>
<div class="line"><span class="lineno"> 2154</span>    uint32 PBIST_RAMT, PBIST_FSRA0, PBIST_FSRDL0;</div>
<div class="line"><span class="lineno"> 2155</span>    <span class="comment">/*SAFETYMCUSW 134 S MR:12.2 &lt;APPROVED&gt; &quot;LDRA Tool issue&quot; */</span></div>
<div class="line"><span class="lineno"> 2156</span>    PBIST_RAMT = pbistREG-&gt;RAMT;</div>
<div class="line"><span class="lineno"> 2157</span>    PBIST_FSRA0 = pbistREG-&gt;FSRA0;</div>
<div class="line"><span class="lineno"> 2158</span>    PBIST_FSRDL0 = pbistREG-&gt;FSRDL0;</div>
<div class="line"><span class="lineno"> 2159</span> </div>
<div class="line"><span class="lineno"> 2160</span>    <span class="keywordflow">if</span>(<a class="code hl_function" href="sys__selftest_8c.html#a3edbda42e27655bb5e9a3d067ab09caf">pbistPortTestStatus</a>((uint32)PBIST_PORT0) != TRUE)</div>
<div class="line"><span class="lineno"> 2161</span>    {</div>
<div class="line"><span class="lineno"> 2162</span>        memoryPort0TestFailNotification((uint32)((PBIST_RAMT &amp; 0xFF000000U) &gt;&gt; 24U), (uint32)((PBIST_RAMT &amp; 0x00FF0000U) &gt;&gt; 16U),(uint32)PBIST_FSRA0, (uint32)PBIST_FSRDL0);</div>
<div class="line"><span class="lineno"> 2163</span>    }</div>
<div class="line"><span class="lineno"> 2164</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2165</span>    {</div>
<div class="line"><span class="lineno"> 2166</span><span class="comment">/* USER CODE BEGIN (77) */</span></div>
<div class="line"><span class="lineno"> 2167</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno"> 2168</span><span class="comment">/*SAFETYMCUSW 5 C MR:NA &lt;APPROVED&gt; &quot;for(;;) can be removed by adding &quot;# if 0&quot; and &quot;# endif&quot; in the user codes above and below&quot; */</span></div>
<div class="line"><span class="lineno"> 2169</span><span class="comment">/*SAFETYMCUSW 26 S MR:NA &lt;APPROVED&gt; &quot;for(;;) can be removed by adding &quot;# if 0&quot; and &quot;# endif&quot; in the user codes above and below&quot; */</span></div>
<div class="line"><span class="lineno"> 2170</span><span class="comment">/*SAFETYMCUSW 28 D MR:NA &lt;APPROVED&gt; &quot;for(;;) can be removed by adding &quot;# if 0&quot; and &quot;# endif&quot; in the user codes above and below&quot; */</span></div>
<div class="line"><span class="lineno"> 2171</span>        <span class="keywordflow">for</span>(;;)</div>
<div class="line"><span class="lineno"> 2172</span>        {</div>
<div class="line"><span class="lineno"> 2173</span>        }<span class="comment">/* Wait */</span></div>
<div class="line"><span class="lineno"> 2174</span> </div>
<div class="line"><span class="lineno"> 2175</span><span class="comment">/* USER CODE BEGIN (78) */</span></div>
<div class="line"><span class="lineno"> 2176</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno"> 2177</span>    }</div>
<div class="line"><span class="lineno"> 2178</span>}</div>
<div class="ttc" id="asys__selftest_8c_html_a3edbda42e27655bb5e9a3d067ab09caf"><div class="ttname"><a href="sys__selftest_8c.html#a3edbda42e27655bb5e9a3d067ab09caf">pbistPortTestStatus</a></div><div class="ttdeci">boolean pbistPortTestStatus(uint32 port)</div><div class="ttdoc">Checks to see if the PBIST Port test is completed successfully.</div><div class="ttdef"><b>Definition:</b> sys_selftest.c:547</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1edb8a500b4ad0f3e87b93245856a937" name="a1edb8a500b4ad0f3e87b93245856a937"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1edb8a500b4ad0f3e87b93245856a937">&#9670;&#160;</a></span>pbistGetConfigValue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pbistGetConfigValue </td>
          <td>(</td>
          <td class="paramtype">pbist_config_reg_t *&#160;</td>
          <td class="paramname"><em>config_reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">config_value_type_t&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the initial or current values of the configuration registers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*config_reg</td><td>pointer to the struct to which the initial or current value of the configuration registers need to be stored </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>whether initial or current value of the configuration registers need to be stored<ul>
<li>InitialValue: initial value of the configuration registers will be stored in the struct pointed by config_reg</li>
<li>CurrentValue: initial value of the configuration registers will be stored in the struct pointed by config_reg</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<p>This function will copy the initial or current value (depending on the parameter 'type') of the configuration registers to the struct pointed by config_reg </p>
<div class="fragment"><div class="line"><span class="lineno"> 2195</span>{</div>
<div class="line"><span class="lineno"> 2196</span>    <span class="keywordflow">if</span> (type == InitialValue)</div>
<div class="line"><span class="lineno"> 2197</span>    {</div>
<div class="line"><span class="lineno"> 2198</span>        config_reg-&gt;CONFIG_RAMT = PBIST_RAMT_CONFIGVALUE;</div>
<div class="line"><span class="lineno"> 2199</span>        config_reg-&gt;CONFIG_DLR = PBIST_DLR_CONFIGVALUE;</div>
<div class="line"><span class="lineno"> 2200</span>        config_reg-&gt;CONFIG_PACT = PBIST_PACT_CONFIGVALUE;</div>
<div class="line"><span class="lineno"> 2201</span>        config_reg-&gt;CONFIG_PBISTID = PBIST_PBISTID_CONFIGVALUE;</div>
<div class="line"><span class="lineno"> 2202</span>        config_reg-&gt;CONFIG_OVER = PBIST_OVER_CONFIGVALUE;</div>
<div class="line"><span class="lineno"> 2203</span>        config_reg-&gt;CONFIG_FSRDL1 = PBIST_FSRDL1_CONFIGVALUE;</div>
<div class="line"><span class="lineno"> 2204</span>        config_reg-&gt;CONFIG_ROM = PBIST_ROM_CONFIGVALUE;</div>
<div class="line"><span class="lineno"> 2205</span>        config_reg-&gt;CONFIG_ALGO = PBIST_ALGO_CONFIGVALUE;</div>
<div class="line"><span class="lineno"> 2206</span>        config_reg-&gt;CONFIG_RINFOL = PBIST_RINFOL_CONFIGVALUE;</div>
<div class="line"><span class="lineno"> 2207</span>        config_reg-&gt;CONFIG_RINFOU = PBIST_RINFOU_CONFIGVALUE;</div>
<div class="line"><span class="lineno"> 2208</span>    }</div>
<div class="line"><span class="lineno"> 2209</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2210</span>    {</div>
<div class="line"><span class="lineno"> 2211</span>    <span class="comment">/*SAFETYMCUSW 134 S MR:12.2 &lt;APPROVED&gt; &quot;LDRA Tool issue&quot; */</span></div>
<div class="line"><span class="lineno"> 2212</span>        config_reg-&gt;CONFIG_RAMT = pbistREG-&gt;RAMT;</div>
<div class="line"><span class="lineno"> 2213</span>        config_reg-&gt;CONFIG_DLR = pbistREG-&gt;DLR;</div>
<div class="line"><span class="lineno"> 2214</span>        config_reg-&gt;CONFIG_PACT = pbistREG-&gt;PACT;</div>
<div class="line"><span class="lineno"> 2215</span>        config_reg-&gt;CONFIG_PBISTID = pbistREG-&gt;PBISTID;</div>
<div class="line"><span class="lineno"> 2216</span>        config_reg-&gt;CONFIG_OVER = pbistREG-&gt;OVER;</div>
<div class="line"><span class="lineno"> 2217</span>        config_reg-&gt;CONFIG_FSRDL1 = pbistREG-&gt;FSRDL1;</div>
<div class="line"><span class="lineno"> 2218</span>        config_reg-&gt;CONFIG_ROM = pbistREG-&gt;ROM;</div>
<div class="line"><span class="lineno"> 2219</span>        config_reg-&gt;CONFIG_ALGO = pbistREG-&gt;ALGO;</div>
<div class="line"><span class="lineno"> 2220</span>        config_reg-&gt;CONFIG_RINFOL = pbistREG-&gt;RINFOL;</div>
<div class="line"><span class="lineno"> 2221</span>        config_reg-&gt;CONFIG_RINFOU = pbistREG-&gt;RINFOU;</div>
<div class="line"><span class="lineno"> 2222</span>    }</div>
<div class="line"><span class="lineno"> 2223</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2675f441b1c7bbadd9877cfd586bf959" name="a2675f441b1c7bbadd9877cfd586bf959"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2675f441b1c7bbadd9877cfd586bf959">&#9670;&#160;</a></span>pbistIsTestCompleted()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean pbistIsTestCompleted </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks to see if the PBIST test is completed. </p>
<dl class="section return"><dt>Returns</dt><dd>1 if PBIST test completed, otherwise 0.</dd></dl>
<p>Checks to see if the PBIST test is completed. </p>
<div class="fragment"><div class="line"><span class="lineno">  500</span>{</div>
<div class="line"><span class="lineno">  501</span><span class="comment">/* USER CODE BEGIN (22) */</span></div>
<div class="line"><span class="lineno">  502</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  503</span> </div>
<div class="line"><span class="lineno">  504</span>    <span class="keywordflow">return</span> ((systemREG1-&gt;MSTCGSTAT &amp; 0x1U) != 0U);</div>
<div class="line"><span class="lineno">  505</span><span class="comment">/* USER CODE BEGIN (23) */</span></div>
<div class="line"><span class="lineno">  506</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  507</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a975a794505ddcaf5d1c68e7a229fc8ae" name="a975a794505ddcaf5d1c68e7a229fc8ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a975a794505ddcaf5d1c68e7a229fc8ae">&#9670;&#160;</a></span>pbistIsTestPassed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean pbistIsTestPassed </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks to see if the PBIST test is completed successfully. </p>
<dl class="section return"><dt>Returns</dt><dd>1 if PBIST test passed, otherwise 0.</dd></dl>
<p>Checks to see if the PBIST test is completed successfully. </p>
<div class="fragment"><div class="line"><span class="lineno">  519</span>{</div>
<div class="line"><span class="lineno">  520</span><span class="comment">/* USER CODE BEGIN (24) */</span></div>
<div class="line"><span class="lineno">  521</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  522</span>    <span class="keywordtype">boolean</span> status;</div>
<div class="line"><span class="lineno">  523</span> </div>
<div class="line"><span class="lineno">  524</span>    <span class="keywordflow">if</span> (pbistREG-&gt;FSRF0 == 0U)</div>
<div class="line"><span class="lineno">  525</span>    {</div>
<div class="line"><span class="lineno">  526</span>        status = TRUE;</div>
<div class="line"><span class="lineno">  527</span>    }</div>
<div class="line"><span class="lineno">  528</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  529</span>    {</div>
<div class="line"><span class="lineno">  530</span>        status = FALSE;</div>
<div class="line"><span class="lineno">  531</span>    }</div>
<div class="line"><span class="lineno">  532</span><span class="comment">/* USER CODE BEGIN (25) */</span></div>
<div class="line"><span class="lineno">  533</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  534</span>    <span class="keywordflow">return</span> status;</div>
<div class="line"><span class="lineno">  535</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3edbda42e27655bb5e9a3d067ab09caf" name="a3edbda42e27655bb5e9a3d067ab09caf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3edbda42e27655bb5e9a3d067ab09caf">&#9670;&#160;</a></span>pbistPortTestStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean pbistPortTestStatus </td>
          <td>(</td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks to see if the PBIST Port test is completed successfully. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>- Select the port to get the status. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if PBIST Port test completed successfully, otherwise 0.</dd></dl>
<p>Checks to see if the selected PBIST Port test is completed successfully. </p>
<div class="fragment"><div class="line"><span class="lineno">  548</span>{</div>
<div class="line"><span class="lineno">  549</span>    <span class="keywordtype">boolean</span> status;</div>
<div class="line"><span class="lineno">  550</span><span class="comment">/* USER CODE BEGIN (26) */</span></div>
<div class="line"><span class="lineno">  551</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  552</span> </div>
<div class="line"><span class="lineno">  553</span>    <span class="keywordflow">if</span>(port == (uint32)PBIST_PORT0)</div>
<div class="line"><span class="lineno">  554</span>    {</div>
<div class="line"><span class="lineno">  555</span>      status =  (pbistREG-&gt;FSRF0 == 0U);</div>
<div class="line"><span class="lineno">  556</span>    }</div>
<div class="line"><span class="lineno">  557</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  558</span>    {</div>
<div class="line"><span class="lineno">  559</span>      <span class="comment">/* Invalid Input */</span></div>
<div class="line"><span class="lineno">  560</span>      status =  FALSE;</div>
<div class="line"><span class="lineno">  561</span>    }</div>
<div class="line"><span class="lineno">  562</span> </div>
<div class="line"><span class="lineno">  563</span>    <span class="keywordflow">return</span>  status;</div>
<div class="line"><span class="lineno">  564</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad5fcc064d8d51dda635d83235cf37e3e" name="ad5fcc064d8d51dda635d83235cf37e3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5fcc064d8d51dda635d83235cf37e3e">&#9670;&#160;</a></span>pbistRun()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pbistRun </td>
          <td>(</td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>raminfoL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>algomask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>CPU self test Driver. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">raminfoL</td><td>- Select the list of RAM to be tested. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">algomask</td><td>- Select the list of Algorithm to be run.</td></tr>
  </table>
  </dd>
</dl>
<p>This function performs Memory Built-in Self test using PBIST module. </p>
<div class="fragment"><div class="line"><span class="lineno">  419</span>{</div>
<div class="line"><span class="lineno">  420</span>    <span class="keyword">volatile</span> uint32 i = 0U;</div>
<div class="line"><span class="lineno">  421</span> </div>
<div class="line"><span class="lineno">  422</span><span class="comment">/* USER CODE BEGIN (17) */</span></div>
<div class="line"><span class="lineno">  423</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  424</span> </div>
<div class="line"><span class="lineno">  425</span>    <span class="comment">/* Disable memory self controller */</span></div>
<div class="line"><span class="lineno">  426</span>    systemREG1-&gt;MSTGCR = 0x00000005U;</div>
<div class="line"><span class="lineno">  427</span> </div>
<div class="line"><span class="lineno">  428</span>    <span class="comment">/* Disable Memory Initialization controller */</span></div>
<div class="line"><span class="lineno">  429</span>    systemREG1-&gt;MINITGCR = 0x5U;</div>
<div class="line"><span class="lineno">  430</span> </div>
<div class="line"><span class="lineno">  431</span>    <span class="comment">/* Enable PBIST controller */</span></div>
<div class="line"><span class="lineno">  432</span>    systemREG1-&gt;MSINENA = 0x1U;</div>
<div class="line"><span class="lineno">  433</span> </div>
<div class="line"><span class="lineno">  434</span>    <span class="comment">/* Enable memory self controller */</span></div>
<div class="line"><span class="lineno">  435</span>    systemREG1-&gt;MSTGCR = 0x0000000AU;</div>
<div class="line"><span class="lineno">  436</span> </div>
<div class="line"><span class="lineno">  437</span>    <span class="comment">/* wait for 32 VBUS clock cycles at least, based on HCLK to VCLK ratio */</span></div>
<div class="line"><span class="lineno">  438</span>    <span class="comment">/*SAFETYMCUSW 134 S MR:12.2 &lt;APPROVED&gt; &quot;Wait for few clock cycles (Value of i not used)&quot; */</span></div>
<div class="line"><span class="lineno">  439</span>    <span class="comment">/*SAFETYMCUSW 134 S MR:12.2 &lt;APPROVED&gt; &quot;Wait for few clock cycles (Value of i not used)&quot; */</span></div>
<div class="line"><span class="lineno">  440</span>    <span class="keywordflow">for</span> (i=0U; i&lt;(32U + (32U * 0U)); i++){ <span class="comment">/* Wait */</span> }</div>
<div class="line"><span class="lineno">  441</span> </div>
<div class="line"><span class="lineno">  442</span><span class="comment">/* USER CODE BEGIN (18) */</span></div>
<div class="line"><span class="lineno">  443</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  444</span> </div>
<div class="line"><span class="lineno">  445</span>    <span class="comment">/* Enable PBIST clocks and ROM clock */</span></div>
<div class="line"><span class="lineno">  446</span>    pbistREG-&gt;PACT = 0x3U;</div>
<div class="line"><span class="lineno">  447</span> </div>
<div class="line"><span class="lineno">  448</span>    <span class="comment">/* Select all algorithms to be tested */</span></div>
<div class="line"><span class="lineno">  449</span>    pbistREG-&gt;ALGO = algomask;</div>
<div class="line"><span class="lineno">  450</span> </div>
<div class="line"><span class="lineno">  451</span>    <span class="comment">/* Select RAM groups */</span></div>
<div class="line"><span class="lineno">  452</span>    pbistREG-&gt;RINFOL = raminfoL;</div>
<div class="line"><span class="lineno">  453</span> </div>
<div class="line"><span class="lineno">  454</span>    <span class="comment">/* Select all RAM groups */</span></div>
<div class="line"><span class="lineno">  455</span>    pbistREG-&gt;RINFOU = 0x00000000U;</div>
<div class="line"><span class="lineno">  456</span> </div>
<div class="line"><span class="lineno">  457</span>    <span class="comment">/* ROM contents will not override RINFOx settings */</span></div>
<div class="line"><span class="lineno">  458</span>    pbistREG-&gt;OVER = 0x0U;</div>
<div class="line"><span class="lineno">  459</span> </div>
<div class="line"><span class="lineno">  460</span>    <span class="comment">/* Algorithm code is loaded from ROM */</span></div>
<div class="line"><span class="lineno">  461</span>    pbistREG-&gt;ROM = 0x3U;</div>
<div class="line"><span class="lineno">  462</span> </div>
<div class="line"><span class="lineno">  463</span>    <span class="comment">/* Start PBIST */</span></div>
<div class="line"><span class="lineno">  464</span>    pbistREG-&gt;DLR = 0x14U;</div>
<div class="line"><span class="lineno">  465</span> </div>
<div class="line"><span class="lineno">  466</span><span class="comment">/* USER CODE BEGIN (19) */</span></div>
<div class="line"><span class="lineno">  467</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  468</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac9b7e2d9da2b5166a9ea002d431e54ef" name="ac9b7e2d9da2b5166a9ea002d431e54ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9b7e2d9da2b5166a9ea002d431e54ef">&#9670;&#160;</a></span>pbistSelfCheck()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pbistSelfCheck </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>PBIST self test Driver. </p>
<p>This function is called to perform PBIST self test.</p>
<dl class="section note"><dt>Note</dt><dd>This Function uses register's which are not exposed to users through TRM , to run custom algorithm to make PBIST Fail. Users can use this function as Black box. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  312</span>{</div>
<div class="line"><span class="lineno">  313</span>    <span class="keyword">volatile</span> uint32 i = 0U;</div>
<div class="line"><span class="lineno">  314</span>    uint32 PBIST_wait_done_loop = 0U;</div>
<div class="line"><span class="lineno">  315</span><span class="comment">/* USER CODE BEGIN (13) */</span></div>
<div class="line"><span class="lineno">  316</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  317</span>    <span class="comment">/* Run a diagnostic check on the memory self-test controller */</span></div>
<div class="line"><span class="lineno">  318</span> </div>
<div class="line"><span class="lineno">  319</span>    <span class="comment">/* Disable PBIST clocks and ROM clock */</span></div>
<div class="line"><span class="lineno">  320</span>    pbistREG-&gt;PACT = 0x0U;</div>
<div class="line"><span class="lineno">  321</span>    </div>
<div class="line"><span class="lineno">  322</span>    <span class="comment">/* Disable memory self controller */</span></div>
<div class="line"><span class="lineno">  323</span>    systemREG1-&gt;MSTGCR = 0x00000005U;                </div>
<div class="line"><span class="lineno">  324</span>    </div>
<div class="line"><span class="lineno">  325</span>    <span class="comment">/* Disable Memory Initialization controller */</span></div>
<div class="line"><span class="lineno">  326</span>    systemREG1-&gt;MINITGCR = 0x5U;</div>
<div class="line"><span class="lineno">  327</span> </div>
<div class="line"><span class="lineno">  328</span>    <span class="comment">/* Enable memory self controller */</span></div>
<div class="line"><span class="lineno">  329</span>    systemREG1-&gt;MSTGCR = 0x0000000AU;                               </div>
<div class="line"><span class="lineno">  330</span> </div>
<div class="line"><span class="lineno">  331</span>    <span class="comment">/* Clear PBIST Done */</span></div>
<div class="line"><span class="lineno">  332</span>    systemREG1-&gt;MSTCGSTAT = 0x1U;</div>
<div class="line"><span class="lineno">  333</span>    </div>
<div class="line"><span class="lineno">  334</span>    <span class="comment">/* Enable PBIST controller */</span></div>
<div class="line"><span class="lineno">  335</span>    systemREG1-&gt;MSINENA = 0x1U;</div>
<div class="line"><span class="lineno">  336</span> </div>
<div class="line"><span class="lineno">  337</span>    <span class="comment">/* wait for 32 VBUS clock cycles at least, based on HCLK to VCLK ratio */</span></div>
<div class="line"><span class="lineno">  338</span>    <span class="comment">/*SAFETYMCUSW 134 S MR:12.2 &lt;APPROVED&gt; &quot;Wait for few clock cycles (Value of i not used)&quot; */</span></div>
<div class="line"><span class="lineno">  339</span>    <span class="comment">/*SAFETYMCUSW 134 S MR:12.2 &lt;APPROVED&gt; &quot;Wait for few clock cycles (Value of i not used)&quot; */</span></div>
<div class="line"><span class="lineno">  340</span>    <span class="keywordflow">for</span> (i=0U; i&lt;(32U + (32U * 0U)); i++){ <span class="comment">/* Wait */</span> }</div>
<div class="line"><span class="lineno">  341</span> </div>
<div class="line"><span class="lineno">  342</span><span class="comment">/* USER CODE BEGIN (14) */</span></div>
<div class="line"><span class="lineno">  343</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  344</span> </div>
<div class="line"><span class="lineno">  345</span>    <span class="comment">/* Enable PBIST clocks and ROM clock */</span></div>
<div class="line"><span class="lineno">  346</span>    pbistREG-&gt;PACT = 0x3U;</div>
<div class="line"><span class="lineno">  347</span> </div>
<div class="line"><span class="lineno">  348</span>    <span class="comment">/* CPU control of PBIST */</span></div>
<div class="line"><span class="lineno">  349</span>    pbistREG-&gt;DLR = 0x10U;</div>
<div class="line"><span class="lineno">  350</span> </div>
<div class="line"><span class="lineno">  351</span>    <span class="comment">/* Custom always fail algo, this will not use the ROM and just set a fail */</span></div>
<div class="line"><span class="lineno">  352</span>    pbistREG-&gt;RAMT         = 0x00002000U;</div>
<div class="line"><span class="lineno">  353</span>    *(<span class="keyword">volatile</span> uint32 *)0xFFFFE400U = 0x4C000001U;</div>
<div class="line"><span class="lineno">  354</span>    *(<span class="keyword">volatile</span> uint32 *)0xFFFFE440U = 0x00000075U;</div>
<div class="line"><span class="lineno">  355</span>    *(<span class="keyword">volatile</span> uint32 *)0xFFFFE404U = 0x4C000002U;</div>
<div class="line"><span class="lineno">  356</span>    *(<span class="keyword">volatile</span> uint32 *)0xFFFFE444U = 0x00000075U;</div>
<div class="line"><span class="lineno">  357</span>    *(<span class="keyword">volatile</span> uint32 *)0xFFFFE408U = 0x4C000003U;</div>
<div class="line"><span class="lineno">  358</span>    *(<span class="keyword">volatile</span> uint32 *)0xFFFFE448U = 0x00000075U;</div>
<div class="line"><span class="lineno">  359</span>    *(<span class="keyword">volatile</span> uint32 *)0xFFFFE40CU = 0x4C000004U;</div>
<div class="line"><span class="lineno">  360</span>    *(<span class="keyword">volatile</span> uint32 *)0xFFFFE44CU = 0x00000075U;</div>
<div class="line"><span class="lineno">  361</span>    *(<span class="keyword">volatile</span> uint32 *)0xFFFFE410U = 0x4C000005U;</div>
<div class="line"><span class="lineno">  362</span>    *(<span class="keyword">volatile</span> uint32 *)0xFFFFE450U = 0x00000075U;</div>
<div class="line"><span class="lineno">  363</span>    *(<span class="keyword">volatile</span> uint32 *)0xFFFFE414U = 0x4C000006U;</div>
<div class="line"><span class="lineno">  364</span>    *(<span class="keyword">volatile</span> uint32 *)0xFFFFE454U = 0x00000075U;</div>
<div class="line"><span class="lineno">  365</span>    *(<span class="keyword">volatile</span> uint32 *)0xFFFFE418U = 0x00000000U;</div>
<div class="line"><span class="lineno">  366</span>    *(<span class="keyword">volatile</span> uint32 *)0xFFFFE458U = 0x00000001U;</div>
<div class="line"><span class="lineno">  367</span> </div>
<div class="line"><span class="lineno">  368</span>    <span class="comment">/* PBIST_RUN */</span></div>
<div class="line"><span class="lineno">  369</span>    pbistREG-&gt;rsvd1[1U]    = 1U;</div>
<div class="line"><span class="lineno">  370</span> </div>
<div class="line"><span class="lineno">  371</span>    <span class="comment">/* wait until memory self-test done is indicated */</span></div>
<div class="line"><span class="lineno">  372</span>    <span class="comment">/*SAFETYMCUSW 28 D MR:NA &lt;APPROVED&gt; &quot;Hardware status bit read check&quot; */</span></div>
<div class="line"><span class="lineno">  373</span>    <span class="keywordflow">while</span> ((systemREG1-&gt;MSTCGSTAT &amp; 0x1U) != 0x1U) </div>
<div class="line"><span class="lineno">  374</span>    {</div>
<div class="line"><span class="lineno">  375</span>        PBIST_wait_done_loop++;</div>
<div class="line"><span class="lineno">  376</span>    }<span class="comment">/* Wait */</span></div>
<div class="line"><span class="lineno">  377</span> </div>
<div class="line"><span class="lineno">  378</span>    <span class="comment">/* Check for the failure */</span></div>
<div class="line"><span class="lineno">  379</span>    <span class="keywordflow">if</span> ((pbistREG-&gt;FSRF0 &amp; 0x1U) != 0x1U)</div>
<div class="line"><span class="lineno">  380</span>    {</div>
<div class="line"><span class="lineno">  381</span>        <span class="comment">/* No failure was indicated even if the always fail algorithm was run*/</span></div>
<div class="line"><span class="lineno">  382</span>        <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(PBISTSELFCHECK_FAIL1);</div>
<div class="line"><span class="lineno">  383</span> </div>
<div class="line"><span class="lineno">  384</span><span class="comment">/* USER CODE BEGIN (15) */</span></div>
<div class="line"><span class="lineno">  385</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  386</span>    }</div>
<div class="line"><span class="lineno">  387</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  388</span>    {</div>
<div class="line"><span class="lineno">  389</span>        <span class="comment">/* Check that the algorithm executed in the expected amount of time. */</span></div>
<div class="line"><span class="lineno">  390</span>        <span class="comment">/* This time is dependent on the ROMCLKDIV selected above            */</span></div>
<div class="line"><span class="lineno">  391</span>        <span class="keywordflow">if</span> (PBIST_wait_done_loop &gt;= 2U)</div>
<div class="line"><span class="lineno">  392</span>        {</div>
<div class="line"><span class="lineno">  393</span>            <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(PBISTSELFCHECK_FAIL2);</div>
<div class="line"><span class="lineno">  394</span>        }</div>
<div class="line"><span class="lineno">  395</span>        </div>
<div class="line"><span class="lineno">  396</span>        <span class="comment">/* Disable PBIST clocks and ROM clock */</span></div>
<div class="line"><span class="lineno">  397</span>        pbistREG-&gt;PACT = 0x0U;</div>
<div class="line"><span class="lineno">  398</span> </div>
<div class="line"><span class="lineno">  399</span>        <span class="comment">/* Disable PBIST */</span></div>
<div class="line"><span class="lineno">  400</span>        systemREG1-&gt;MSTGCR &amp;= 0xFFFFFFF0U;</div>
<div class="line"><span class="lineno">  401</span>        systemREG1-&gt;MSTGCR |= 0x5U;</div>
<div class="line"><span class="lineno">  402</span> </div>
<div class="line"><span class="lineno">  403</span><span class="comment">/* USER CODE BEGIN (16) */</span></div>
<div class="line"><span class="lineno">  404</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  405</span>    }</div>
<div class="line"><span class="lineno">  406</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1ea172c81d7549cd8181de098a91b752" name="a1ea172c81d7549cd8181de098a91b752"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ea172c81d7549cd8181de098a91b752">&#9670;&#160;</a></span>pbistStop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pbistStop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Routine to stop PBIST test enabled. </p>
<p>This function is called to stop PBIST after test is performed. </p>
<div class="fragment"><div class="line"><span class="lineno">  479</span>{</div>
<div class="line"><span class="lineno">  480</span><span class="comment">/* USER CODE BEGIN (20) */</span></div>
<div class="line"><span class="lineno">  481</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  482</span>    <span class="comment">/* disable pbist clocks and ROM clock */</span></div>
<div class="line"><span class="lineno">  483</span>    pbistREG-&gt;PACT = 0x0U;</div>
<div class="line"><span class="lineno">  484</span>    systemREG1-&gt;MSTGCR &amp;= 0xFFFFFFF0U;</div>
<div class="line"><span class="lineno">  485</span>    systemREG1-&gt;MSTGCR |= 0x5U;</div>
<div class="line"><span class="lineno">  486</span><span class="comment">/* USER CODE BEGIN (21) */</span></div>
<div class="line"><span class="lineno">  487</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  488</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae96e990763ae7d45bd55ea5a27299a47" name="ae96e990763ae7d45bd55ea5a27299a47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae96e990763ae7d45bd55ea5a27299a47">&#9670;&#160;</a></span>selftestFailNotification()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void selftestFailNotification </td>
          <td>(</td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>flag</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Self test fail service routine. </p>
<p>This function is called if there is a self test fail with appropriate flag </p>
<div class="fragment"><div class="line"><span class="lineno">   59</span>{</div>
<div class="line"><span class="lineno">   60</span> </div>
<div class="line"><span class="lineno">   61</span><span class="comment">/* USER CODE BEGIN (1) */</span></div>
<div class="line"><span class="lineno">   62</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">   63</span> </div>
<div class="line"><span class="lineno">   64</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="afb360fa06ebe94d06978d25371ed2140" name="afb360fa06ebe94d06978d25371ed2140"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb360fa06ebe94d06978d25371ed2140">&#9670;&#160;</a></span>stcGetConfigValue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stcGetConfigValue </td>
          <td>(</td>
          <td class="paramtype">stc_config_reg_t *&#160;</td>
          <td class="paramname"><em>config_reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">config_value_type_t&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the initial or current values of the configuration registers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*config_reg</td><td>pointer to the struct to which the initial or current value of the configuration registers need to be stored </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>whether initial or current value of the configuration registers need to be stored<ul>
<li>InitialValue: initial value of the configuration registers will be stored in the struct pointed by config_reg</li>
<li>CurrentValue: initial value of the configuration registers will be stored in the struct pointed by config_reg</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<p>This function will copy the initial or current value (depending on the parameter 'type') of the configuration registers to the struct pointed by config_reg </p>
<div class="fragment"><div class="line"><span class="lineno"> 2240</span>{</div>
<div class="line"><span class="lineno"> 2241</span>    <span class="keywordflow">if</span> (type == InitialValue)</div>
<div class="line"><span class="lineno"> 2242</span>    {</div>
<div class="line"><span class="lineno"> 2243</span>        config_reg-&gt;CONFIG_STCGCR0 = STC_STCGCR0_CONFIGVALUE;</div>
<div class="line"><span class="lineno"> 2244</span>        config_reg-&gt;CONFIG_STCGCR1 = STC_STCGCR1_CONFIGVALUE;</div>
<div class="line"><span class="lineno"> 2245</span>        config_reg-&gt;CONFIG_STCTPR = STC_STCTPR_CONFIGVALUE;</div>
<div class="line"><span class="lineno"> 2246</span>        config_reg-&gt;CONFIG_STCSCSCR = STC_STCSCSCR_CONFIGVALUE;</div>
<div class="line"><span class="lineno"> 2247</span>    }</div>
<div class="line"><span class="lineno"> 2248</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2249</span>    {</div>
<div class="line"><span class="lineno"> 2250</span>    <span class="comment">/*SAFETYMCUSW 134 S MR:12.2 &lt;APPROVED&gt; &quot;LDRA Tool issue&quot; */</span></div>
<div class="line"><span class="lineno"> 2251</span>        config_reg-&gt;CONFIG_STCGCR0 = stcREG-&gt;STCGCR0;</div>
<div class="line"><span class="lineno"> 2252</span>        config_reg-&gt;CONFIG_STCGCR1 = stcREG-&gt;STCGCR1;</div>
<div class="line"><span class="lineno"> 2253</span>        config_reg-&gt;CONFIG_STCTPR = stcREG-&gt;STCTPR;</div>
<div class="line"><span class="lineno"> 2254</span>        config_reg-&gt;CONFIG_STCSCSCR = stcREG-&gt;STCSCSCR;</div>
<div class="line"><span class="lineno"> 2255</span>    }</div>
<div class="line"><span class="lineno"> 2256</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a54f7309e862bab7a63c2c176c4b7cee9" name="a54f7309e862bab7a63c2c176c4b7cee9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54f7309e862bab7a63c2c176c4b7cee9">&#9670;&#160;</a></span>stcSelfCheck()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stcSelfCheck </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>STC module self check Driver. </p>
<p>This function is called to perform STC module self check. </p>
<div class="fragment"><div class="line"><span class="lineno">  217</span>{</div>
<div class="line"><span class="lineno">  218</span><span class="comment">/* USER CODE BEGIN (8) */</span></div>
<div class="line"><span class="lineno">  219</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  220</span>    <span class="keyword">volatile</span> uint32 i = 0U;</div>
<div class="line"><span class="lineno">  221</span> </div>
<div class="line"><span class="lineno">  222</span>    <span class="comment">/* Run a diagnostic check on the CPU self-test controller */</span></div>
<div class="line"><span class="lineno">  223</span>    <span class="comment">/* First set up the STC clock divider as STC is only supported up to 90MHz */</span></div>
<div class="line"><span class="lineno">  224</span> </div>
<div class="line"><span class="lineno">  225</span>    <span class="comment">/* STC clock is now normal mode CPU clock frequency/2 = 180MHz/2 */</span></div>
<div class="line"><span class="lineno">  226</span>    systemREG2-&gt;STCCLKDIV = 0x01000000U;</div>
<div class="line"><span class="lineno">  227</span> </div>
<div class="line"><span class="lineno">  228</span>    <span class="comment">/* Select one test interval, restart self-test next time, 0x00010001 */</span></div>
<div class="line"><span class="lineno">  229</span>    stcREG-&gt;STCGCR0 = 0x00010001U;</div>
<div class="line"><span class="lineno">  230</span> </div>
<div class="line"><span class="lineno">  231</span>    <span class="comment">/* Enable comparator self-check and stuck-at-0 fault insertion in CPU, 0x1A */</span></div>
<div class="line"><span class="lineno">  232</span>    stcREG-&gt;STCSCSCR = 0x1AU;</div>
<div class="line"><span class="lineno">  233</span> </div>
<div class="line"><span class="lineno">  234</span>    <span class="comment">/* Maximum time-out period */</span></div>
<div class="line"><span class="lineno">  235</span>    stcREG-&gt;STCTPR = 0xFFFFFFFFU;</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>    <span class="comment">/* wait for 16 VBUS clock cycles at least, based on HCLK to VCLK ratio */</span></div>
<div class="line"><span class="lineno">  238</span>    <span class="comment">/*SAFETYMCUSW 134 S MR:12.2 &lt;APPROVED&gt; &quot;Wait for few clock cycles (Value of i not used)&quot; */</span></div>
<div class="line"><span class="lineno">  239</span>    <span class="comment">/*SAFETYMCUSW 134 S MR:12.2 &lt;APPROVED&gt; &quot;Wait for few clock cycles (Value of i not used)&quot; */</span></div>
<div class="line"><span class="lineno">  240</span>    <span class="keywordflow">for</span> (i=0U; i&lt;(16U + (16U * 0U)); i++){ <span class="comment">/* Wait */</span> }</div>
<div class="line"><span class="lineno">  241</span> </div>
<div class="line"><span class="lineno">  242</span>    <span class="comment">/* Enable self-test */</span></div>
<div class="line"><span class="lineno">  243</span>    stcREG-&gt;STCGCR1 = 0xAU;</div>
<div class="line"><span class="lineno">  244</span> </div>
<div class="line"><span class="lineno">  245</span><span class="comment">/* USER CODE BEGIN (9) */</span></div>
<div class="line"><span class="lineno">  246</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span>    <span class="comment">/* Idle the CPU so that the self-test can start */</span></div>
<div class="line"><span class="lineno">  249</span>    _gotoCPUIdle_();</div>
<div class="line"><span class="lineno">  250</span> </div>
<div class="line"><span class="lineno">  251</span><span class="comment">/* USER CODE BEGIN (10) */</span></div>
<div class="line"><span class="lineno">  252</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  253</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2c1518db428c8ab63a56048cadfb4e6e" name="a2c1518db428c8ab63a56048cadfb4e6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c1518db428c8ab63a56048cadfb4e6e">&#9670;&#160;</a></span>stcSelfCheckFail()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stcSelfCheckFail </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>STC Self test check fail service routine. </p>
<p>This function is called if STC Self test check fail. </p>
<div class="fragment"><div class="line"><span class="lineno"> 1127</span>{</div>
<div class="line"><span class="lineno"> 1128</span><span class="comment">/* USER CODE BEGIN (43) */</span></div>
<div class="line"><span class="lineno"> 1129</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno"> 1130</span>    <span class="comment">/* CPU self-test controller&#39;s own self-test failed.</span></div>
<div class="line"><span class="lineno"> 1131</span><span class="comment">     * It is not possible to verify that STC is capable of indicating a CPU self-test error.</span></div>
<div class="line"><span class="lineno"> 1132</span><span class="comment">     * It is not recommended to continue operation.</span></div>
<div class="line"><span class="lineno"> 1133</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno"> 1134</span> </div>
<div class="line"><span class="lineno"> 1135</span>    <span class="comment">/* User can add small piece of code to take system to Safe state using user code section.</span></div>
<div class="line"><span class="lineno"> 1136</span><span class="comment">     * Note: Just removing the for(;;) will take the system to unknown state under ST failure,</span></div>
<div class="line"><span class="lineno"> 1137</span><span class="comment">     * since it is not handled by HALCoGen driver */</span></div>
<div class="line"><span class="lineno"> 1138</span><span class="comment">/* USER CODE BEGIN (44) */</span></div>
<div class="line"><span class="lineno"> 1139</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno"> 1140</span>    <span class="comment">/*SAFETYMCUSW 5 C MR:NA &lt;APPROVED&gt; &quot;for(;;) can be removed by adding &quot;# if 0&quot; and &quot;# endif&quot; in the user codes above and below&quot; */</span></div>
<div class="line"><span class="lineno"> 1141</span>    <span class="comment">/*SAFETYMCUSW 26 S MR:NA &lt;APPROVED&gt; &quot;for(;;) can be removed by adding &quot;# if 0&quot; and &quot;# endif&quot; in the user codes above and below&quot; */</span></div>
<div class="line"><span class="lineno"> 1142</span>    <span class="comment">/*SAFETYMCUSW 28 D MR:NA &lt;APPROVED&gt; &quot;for(;;) can be removed by adding &quot;# if 0&quot; and &quot;# endif&quot; in the user codes above and below&quot; */</span></div>
<div class="line"><span class="lineno"> 1143</span>    <span class="keywordflow">for</span>(;;)</div>
<div class="line"><span class="lineno"> 1144</span>    {</div>
<div class="line"><span class="lineno"> 1145</span>    }<span class="comment">/* Wait */</span></div>
<div class="line"><span class="lineno"> 1146</span><span class="comment">/* USER CODE BEGIN (45) */</span></div>
<div class="line"><span class="lineno"> 1147</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno"> 1148</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="af7297818ebd5ffd62488091aa9633bf9" name="af7297818ebd5ffd62488091aa9633bf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7297818ebd5ffd62488091aa9633bf9">&#9670;&#160;</a></span>vimParityCheck()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vimParityCheck </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Routine to check VIM RAM parity error detection and signaling mechanism. </p>
<p>Routine to check VIM RAM parity error detection and signaling mechanism </p>
<div class="fragment"><div class="line"><span class="lineno"> 1184</span>{</div>
<div class="line"><span class="lineno"> 1185</span>    <span class="keyword">volatile</span> uint32 vimramread = 0U;</div>
<div class="line"><span class="lineno"> 1186</span>    uint32 vimparctl_bk = VIM_PARCTL;</div>
<div class="line"><span class="lineno"> 1187</span> </div>
<div class="line"><span class="lineno"> 1188</span><span class="comment">/* USER CODE BEGIN (49) */</span></div>
<div class="line"><span class="lineno"> 1189</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno"> 1190</span> </div>
<div class="line"><span class="lineno"> 1191</span>    <span class="comment">/* Enable parity checking and parity test mode */</span></div>
<div class="line"><span class="lineno"> 1192</span>    VIM_PARCTL = 0x0000010AU;</div>
<div class="line"><span class="lineno"> 1193</span> </div>
<div class="line"><span class="lineno"> 1194</span>    <span class="comment">/* flip a bit in the VIM RAM parity location */</span></div>
<div class="line"><span class="lineno"> 1195</span>    VIMRAMPARLOC ^= 0x1U;</div>
<div class="line"><span class="lineno"> 1196</span> </div>
<div class="line"><span class="lineno"> 1197</span>    <span class="comment">/* disable parity test mode */</span></div>
<div class="line"><span class="lineno"> 1198</span>    VIM_PARCTL = 0x0000000AU;</div>
<div class="line"><span class="lineno"> 1199</span> </div>
<div class="line"><span class="lineno"> 1200</span>    <span class="comment">/* cause parity error */</span></div>
<div class="line"><span class="lineno"> 1201</span>    vimramread = VIMRAMLOC;</div>
<div class="line"><span class="lineno"> 1202</span> </div>
<div class="line"><span class="lineno"> 1203</span>    <span class="comment">/* check if ESM group1 channel 15 is flagged */</span></div>
<div class="line"><span class="lineno"> 1204</span>    <span class="keywordflow">if</span> ((esmREG-&gt;SR1[0U] &amp; 0x8000U) ==0U)</div>
<div class="line"><span class="lineno"> 1205</span>    {</div>
<div class="line"><span class="lineno"> 1206</span>        <span class="comment">/* VIM RAM parity error was not flagged to ESM. */</span></div>
<div class="line"><span class="lineno"> 1207</span>        <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(VIMPARITYCHECK_FAIL1);</div>
<div class="line"><span class="lineno"> 1208</span>    }</div>
<div class="line"><span class="lineno"> 1209</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1210</span>    {</div>
<div class="line"><span class="lineno"> 1211</span>        <span class="comment">/* clear VIM RAM parity error flag in VIM */</span></div>
<div class="line"><span class="lineno"> 1212</span>        VIM_PARFLG = 0x1U;</div>
<div class="line"><span class="lineno"> 1213</span> </div>
<div class="line"><span class="lineno"> 1214</span>        <span class="comment">/* clear ESM group1 channel 15 flag */</span></div>
<div class="line"><span class="lineno"> 1215</span>        esmREG-&gt;SR1[0U] = 0x8000U;</div>
<div class="line"><span class="lineno"> 1216</span> </div>
<div class="line"><span class="lineno"> 1217</span>        <span class="comment">/* Enable parity checking and parity test mode */</span></div>
<div class="line"><span class="lineno"> 1218</span>        VIM_PARCTL = 0x0000010AU;</div>
<div class="line"><span class="lineno"> 1219</span> </div>
<div class="line"><span class="lineno"> 1220</span>        <span class="comment">/* Revert back to correct data, flip bit 0 of the parity location */</span></div>
<div class="line"><span class="lineno"> 1221</span>        VIMRAMPARLOC ^= 0x1U;</div>
<div class="line"><span class="lineno"> 1222</span>    }</div>
<div class="line"><span class="lineno"> 1223</span> </div>
<div class="line"><span class="lineno"> 1224</span>    <span class="comment">/* Restore Parity Control register */</span></div>
<div class="line"><span class="lineno"> 1225</span>    VIM_PARCTL = vimparctl_bk;</div>
<div class="line"><span class="lineno"> 1226</span> </div>
<div class="line"><span class="lineno"> 1227</span><span class="comment">/* USER CODE BEGIN (50) */</span></div>
<div class="line"><span class="lineno"> 1228</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno"> 1229</span>}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>

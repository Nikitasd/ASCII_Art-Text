<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: system.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">system.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>System Driver Source File.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;system.h&quot;</code><br />
<code>#include &quot;sys_selftest.h&quot;</code><br />
<code>#include &quot;sys_pcr.h&quot;</code><br />
<code>#include &quot;pinmux.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a45f46deb7644048176d5e9347afb939a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#a45f46deb7644048176d5e9347afb939a">setupPLL</a> (void)</td></tr>
<tr class="separator:a45f46deb7644048176d5e9347afb939a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa231cc5e90591363431c63f15360567"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#aaa231cc5e90591363431c63f15360567">trimLPO</a> (void)</td></tr>
<tr class="memdesc:aaa231cc5e90591363431c63f15360567"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize LPO trim values.  <br /></td></tr>
<tr class="separator:aaa231cc5e90591363431c63f15360567"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4490b16ad7d041537868dc9732b3dac2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#a4490b16ad7d041537868dc9732b3dac2">setupFlash</a> (void)</td></tr>
<tr class="separator:a4490b16ad7d041537868dc9732b3dac2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57d84f612fd0d9fec4cd8ac58b5d10c3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#a57d84f612fd0d9fec4cd8ac58b5d10c3">periphInit</a> (void)</td></tr>
<tr class="separator:a57d84f612fd0d9fec4cd8ac58b5d10c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa26c333cac9e8481986232eb8f0d9244"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#aa26c333cac9e8481986232eb8f0d9244">mapClocks</a> (void)</td></tr>
<tr class="separator:aa26c333cac9e8481986232eb8f0d9244"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab11a117f1e08391f23d1da05930e7acf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#ab11a117f1e08391f23d1da05930e7acf">systemInit</a> (void)</td></tr>
<tr class="memdesc:ab11a117f1e08391f23d1da05930e7acf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes System Driver.  <br /></td></tr>
<tr class="separator:ab11a117f1e08391f23d1da05930e7acf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af970bbab0b866f007e84e236cb1654e9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#af970bbab0b866f007e84e236cb1654e9">systemPowerDown</a> (uint32 mode)</td></tr>
<tr class="separator:af970bbab0b866f007e84e236cb1654e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3c7742b0b313a8ac595a0ae677c3ccc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#ab3c7742b0b313a8ac595a0ae677c3ccc">systemGetConfigValue</a> (system_config_reg_t *config_reg, config_value_type_t type)</td></tr>
<tr class="memdesc:ab3c7742b0b313a8ac595a0ae677c3ccc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the initial or current values of the configuration registers.  <br /></td></tr>
<tr class="separator:ab3c7742b0b313a8ac595a0ae677c3ccc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa983f739f63d48487aec38706af5a6f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#afa983f739f63d48487aec38706af5a6f">tcmflashGetConfigValue</a> (tcmflash_config_reg_t *config_reg, config_value_type_t type)</td></tr>
<tr class="memdesc:afa983f739f63d48487aec38706af5a6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the initial or current values of the configuration registers.  <br /></td></tr>
<tr class="separator:afa983f739f63d48487aec38706af5a6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac61ec208839bdc4fec42ea50268b4db3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#ac61ec208839bdc4fec42ea50268b4db3">sramGetConfigValue</a> (sram_config_reg_t *config_reg, config_value_type_t type)</td></tr>
<tr class="memdesc:ac61ec208839bdc4fec42ea50268b4db3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the initial or current values of the configuration registers.  <br /></td></tr>
<tr class="separator:ac61ec208839bdc4fec42ea50268b4db3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac357ba2b9a5627af15fa7be057fffd06"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#ac357ba2b9a5627af15fa7be057fffd06">customTrimLPO</a> (void)</td></tr>
<tr class="memdesc:ac357ba2b9a5627af15fa7be057fffd06"><td class="mdescLeft">&#160;</td><td class="mdescRight">custom function to initilize LPO trim values  <br /></td></tr>
<tr class="separator:ac357ba2b9a5627af15fa7be057fffd06"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>System Driver Source File. </p>
<dl class="section date"><dt>Date</dt><dd>11-Dec-2018 </dd></dl>
<dl class="section version"><dt>Version</dt><dd>04.07.01</dd></dl>
<p>This file contains:</p><ul>
<li>API Functions</li>
</ul>
<p>which are relevant for the System driver. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ac357ba2b9a5627af15fa7be057fffd06" name="ac357ba2b9a5627af15fa7be057fffd06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac357ba2b9a5627af15fa7be057fffd06">&#9670;&#160;</a></span>customTrimLPO()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">customTrimLPO </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>custom function to initilize LPO trim values </p>
<p>This function initializes default LPO trim values if OTP value is 0XFFFF, user can also write their own code to handle this case . </p>
<div class="fragment"><div class="line"><span class="lineno">  666</span>{</div>
<div class="line"><span class="lineno">  667</span>    <span class="comment">/* User can write logic to handle the case where LPO trim is set to 0xFFFFu */</span></div>
<div class="line"><span class="lineno">  668</span><span class="comment">/* USER CODE BEGIN (29) */</span></div>
<div class="line"><span class="lineno">  669</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  670</span>    </div>
<div class="line"><span class="lineno">  671</span>    <span class="comment">/* Load default trimLPO value */</span></div>
<div class="line"><span class="lineno">  672</span>     systemREG1-&gt;LPOMONCTL   = (uint32)((uint32)1U &lt;&lt; 24U)</div>
<div class="line"><span class="lineno">  673</span>                             | (uint32)((uint32)16U &lt;&lt; 8U)</div>
<div class="line"><span class="lineno">  674</span>                             | (uint32)((uint32)16U);</div>
<div class="line"><span class="lineno">  675</span>                                </div>
<div class="line"><span class="lineno">  676</span><span class="comment">/* USER CODE BEGIN (30) */</span></div>
<div class="line"><span class="lineno">  677</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  678</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa26c333cac9e8481986232eb8f0d9244" name="aa26c333cac9e8481986232eb8f0d9244"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa26c333cac9e8481986232eb8f0d9244">&#9670;&#160;</a></span>mapClocks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mapClocks </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><b>Initialize</b> <b>Clock</b> <b>Tree:</b> </p>
<ul>
<li>Disable / Enable clock domain</li>
<li>Wait for until clocks are locked</li>
<li>Map device clock domains to desired sources and configure top-level dividers</li>
<li>All clock domains are working off the default clock sources until now</li>
<li>The below assignments can be easily modified using the HALCoGen GUI</li>
<li>Setup GCLK, HCLK and VCLK clock source for normal operation, power down mode and after wakeup</li>
<li>Setup RTICLK1 and RTICLK2 clocks</li>
<li>Setup asynchronous peripheral clock sources for AVCLK1 and AVCLK2</li>
<li>Setup synchronous peripheral clock dividers for VCLK1, VCLK2, VCLK3</li>
</ul>
<div class="fragment"><div class="line"><span class="lineno">  239</span>{</div>
<div class="line"><span class="lineno">  240</span>    uint32 SYS_CSVSTAT, SYS_CSDIS;</div>
<div class="line"><span class="lineno">  241</span> </div>
<div class="line"><span class="lineno">  242</span><span class="comment">/* USER CODE BEGIN (11) */</span></div>
<div class="line"><span class="lineno">  243</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  244</span> </div>
<div class="line"><span class="lineno">  247</span>    systemREG1-&gt;CDDIS = (uint32)((uint32)0U &lt;&lt; 4U ) <span class="comment">/* AVCLK1, 1 - OFF, 0 - ON */</span></div>
<div class="line"><span class="lineno">  248</span>                      | (uint32)((uint32)1U &lt;&lt; 5U ) <span class="comment">/* AVCLK2, 1 - OFF, 0 - ON */</span></div>
<div class="line"><span class="lineno">  249</span>                      | (uint32)((uint32)0U &lt;&lt; 8U ) <span class="comment">/* VCLK3, 1 - OFF, 0 - ON */</span></div>
<div class="line"><span class="lineno">  250</span>                      | (uint32)((uint32)0U &lt;&lt; 10U) <span class="comment">/* AVCLK3, 1 - OFF, 0 - ON */</span></div>
<div class="line"><span class="lineno">  251</span>                      | (uint32)((uint32)0U &lt;&lt; 11U); <span class="comment">/* AVCLK4, 1 - OFF, 0 - ON */</span></div>
<div class="line"><span class="lineno">  252</span> </div>
<div class="line"><span class="lineno">  253</span> </div>
<div class="line"><span class="lineno">  254</span>    <span class="comment">/* Work Around for Errata SYS#46:</span></div>
<div class="line"><span class="lineno">  255</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno">  256</span><span class="comment">     * Errata Description:</span></div>
<div class="line"><span class="lineno">  257</span><span class="comment">     *            Clock Source Switching Not Qualified with Clock Source Enable And Clock Source Valid</span></div>
<div class="line"><span class="lineno">  258</span><span class="comment">     * Workaround:</span></div>
<div class="line"><span class="lineno">  259</span><span class="comment">     *            Always check the CSDIS register to make sure the clock source is turned on and check</span></div>
<div class="line"><span class="lineno">  260</span><span class="comment">     * the CSVSTAT register to make sure the clock source is valid. Then write to GHVSRC to switch the clock.</span></div>
<div class="line"><span class="lineno">  261</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  263</span>    SYS_CSVSTAT = systemREG1-&gt;CSVSTAT;</div>
<div class="line"><span class="lineno">  264</span>    SYS_CSDIS = systemREG1-&gt;CSDIS;</div>
<div class="line"><span class="lineno">  265</span>    <span class="keywordflow">while</span> ((SYS_CSVSTAT &amp; ((SYS_CSDIS ^ 0xFFU) &amp; 0xFFU)) != ((SYS_CSDIS ^ 0xFFU) &amp; 0xFFU))</div>
<div class="line"><span class="lineno">  266</span>    {</div>
<div class="line"><span class="lineno">  267</span>        SYS_CSVSTAT = systemREG1-&gt;CSVSTAT;</div>
<div class="line"><span class="lineno">  268</span>        SYS_CSDIS = systemREG1-&gt;CSDIS;</div>
<div class="line"><span class="lineno">  269</span>    } <span class="comment">/* Wait */</span></div>
<div class="line"><span class="lineno">  270</span> </div>
<div class="line"><span class="lineno">  271</span><span class="comment">/* USER CODE BEGIN (12) */</span></div>
<div class="line"><span class="lineno">  272</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  273</span> </div>
<div class="line"><span class="lineno">  277</span> </div>
<div class="line"><span class="lineno">  279</span>    systemREG1-&gt;GHVSRC = (uint32)((uint32)SYS_OSC &lt;&lt; 24U)</div>
<div class="line"><span class="lineno">  280</span>                       | (uint32)((uint32)SYS_OSC &lt;&lt; 16U)</div>
<div class="line"><span class="lineno">  281</span>                       | (uint32)((uint32)SYS_PLL1 &lt;&lt; 0U);</div>
<div class="line"><span class="lineno">  282</span> </div>
<div class="line"><span class="lineno">  284</span>    systemREG1-&gt;RCLKSRC = (uint32)((uint32)1U &lt;&lt; 24U)</div>
<div class="line"><span class="lineno">  285</span>                        | (uint32)((uint32)SYS_VCLK &lt;&lt; 16U)</div>
<div class="line"><span class="lineno">  286</span>                        | (uint32)((uint32)1U &lt;&lt; 8U)</div>
<div class="line"><span class="lineno">  287</span>                        | (uint32)((uint32)SYS_VCLK &lt;&lt; 0U);</div>
<div class="line"><span class="lineno">  288</span> </div>
<div class="line"><span class="lineno">  290</span>    systemREG1-&gt;VCLKASRC = (uint32)((uint32)SYS_VCLK &lt;&lt; 8U)</div>
<div class="line"><span class="lineno">  291</span>                         | (uint32)((uint32)SYS_VCLK &lt;&lt; 0U);</div>
<div class="line"><span class="lineno">  292</span> </div>
<div class="line"><span class="lineno">  294</span>    systemREG1-&gt;CLKCNTL  = (systemREG1-&gt;CLKCNTL &amp; 0xF0FFFFFFU)</div>
<div class="line"><span class="lineno">  295</span>                         | (uint32)((uint32)0U &lt;&lt; 24U);</div>
<div class="line"><span class="lineno">  296</span>    systemREG1-&gt;CLKCNTL  = (systemREG1-&gt;CLKCNTL &amp; 0xFFF0FFFFU)</div>
<div class="line"><span class="lineno">  297</span>                         | (uint32)((uint32)0U &lt;&lt; 16U);</div>
<div class="line"><span class="lineno">  298</span> </div>
<div class="line"><span class="lineno">  299</span><span class="comment">/* USER CODE BEGIN (13) */</span></div>
<div class="line"><span class="lineno">  300</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  301</span> </div>
<div class="line"><span class="lineno">  302</span>    <span class="comment">/* Now the PLLs are locked and the PLL outputs can be sped up */</span></div>
<div class="line"><span class="lineno">  303</span>    <span class="comment">/* The R-divider was programmed to be 0xF. Now this divider is changed to programmed value */</span></div>
<div class="line"><span class="lineno">  304</span>    systemREG1-&gt;PLLCTL1 = (systemREG1-&gt;PLLCTL1 &amp; 0xE0FFFFFFU) | (uint32)((uint32)(2U - 1U) &lt;&lt; 24U);</div>
<div class="line"><span class="lineno">  305</span> </div>
<div class="line"><span class="lineno">  306</span>    <span class="comment">/* Enable Frequency modulation */</span></div>
<div class="line"><span class="lineno">  307</span>    systemREG1-&gt;PLLCTL2 |= 0x00000000U;</div>
<div class="line"><span class="lineno">  308</span> </div>
<div class="line"><span class="lineno">  309</span><span class="comment">/* USER CODE BEGIN (14) */</span></div>
<div class="line"><span class="lineno">  310</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  311</span> </div>
<div class="line"><span class="lineno">  312</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a57d84f612fd0d9fec4cd8ac58b5d10c3" name="a57d84f612fd0d9fec4cd8ac58b5d10c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57d84f612fd0d9fec4cd8ac58b5d10c3">&#9670;&#160;</a></span>periphInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void periphInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<ul>
<li>Disable Peripherals before peripheral powerup</li>
<li>Release peripherals from reset and enable clocks to all peripherals</li>
<li>Power-up all peripherals</li>
<li>Enable Peripherals</li>
</ul>
<div class="fragment"><div class="line"><span class="lineno">  212</span>{</div>
<div class="line"><span class="lineno">  213</span> </div>
<div class="line"><span class="lineno">  214</span><span class="comment">/* USER CODE BEGIN (9) */</span></div>
<div class="line"><span class="lineno">  215</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  216</span> </div>
<div class="line"><span class="lineno">  218</span>    systemREG1-&gt;CLKCNTL &amp;= 0xFFFFFEFFU;</div>
<div class="line"><span class="lineno">  219</span> </div>
<div class="line"><span class="lineno">  222</span>    pcrREG-&gt;PSPWRDWNCLR0 = 0xFFFFFFFFU;</div>
<div class="line"><span class="lineno">  223</span>    pcrREG-&gt;PSPWRDWNCLR1 = 0xFFFFFFFFU;</div>
<div class="line"><span class="lineno">  224</span>    pcrREG-&gt;PSPWRDWNCLR2 = 0xFFFFFFFFU;</div>
<div class="line"><span class="lineno">  225</span>    pcrREG-&gt;PSPWRDWNCLR3 = 0xFFFFFFFFU;</div>
<div class="line"><span class="lineno">  226</span> </div>
<div class="line"><span class="lineno">  228</span>    systemREG1-&gt;CLKCNTL |= 0x00000100U;</div>
<div class="line"><span class="lineno">  229</span> </div>
<div class="line"><span class="lineno">  230</span><span class="comment">/* USER CODE BEGIN (10) */</span></div>
<div class="line"><span class="lineno">  231</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  232</span> </div>
<div class="line"><span class="lineno">  233</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4490b16ad7d041537868dc9732b3dac2" name="a4490b16ad7d041537868dc9732b3dac2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4490b16ad7d041537868dc9732b3dac2">&#9670;&#160;</a></span>setupFlash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setupFlash </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<ul>
<li>Setup flash read mode, address wait states and data wait states</li>
<li>Setup flash access wait states for bank 7</li>
<li>Disable write access to flash state machine registers</li>
<li>Setup flash bank power modes</li>
</ul>
<div class="fragment"><div class="line"><span class="lineno">  176</span>{</div>
<div class="line"><span class="lineno">  177</span> </div>
<div class="line"><span class="lineno">  178</span><span class="comment">/* USER CODE BEGIN (6) */</span></div>
<div class="line"><span class="lineno">  179</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  180</span> </div>
<div class="line"><span class="lineno">  182</span>    flashWREG-&gt;FRDCNTL =  0x00000000U</div>
<div class="line"><span class="lineno">  183</span>                       | (uint32)((uint32)1U &lt;&lt; 8U)</div>
<div class="line"><span class="lineno">  184</span>                       | (uint32)((uint32)0U &lt;&lt; 4U)</div>
<div class="line"><span class="lineno">  185</span>                       | (uint32)1U;</div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  188</span>    FSM_WR_ENA_HL    = 0x5U;</div>
<div class="line"><span class="lineno">  189</span>    EEPROM_CONFIG_HL = 0x00000002U</div>
<div class="line"><span class="lineno">  190</span>                     | (uint32)((uint32)3U &lt;&lt; 16U) ;</div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span><span class="comment">/* USER CODE BEGIN (7) */</span></div>
<div class="line"><span class="lineno">  193</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  194</span> </div>
<div class="line"><span class="lineno">  196</span>    FSM_WR_ENA_HL = 0xAU;</div>
<div class="line"><span class="lineno">  197</span> </div>
<div class="line"><span class="lineno">  199</span>    flashWREG-&gt;FBFALLBACK = 0x00000000U</div>
<div class="line"><span class="lineno">  200</span>                          | (uint32)((uint32)SYS_ACTIVE &lt;&lt; 14U) <span class="comment">/* BANK 7 */</span></div>
<div class="line"><span class="lineno">  201</span>                          | (uint32)((uint32)SYS_ACTIVE &lt;&lt; 0U); <span class="comment">/* BANK 0 */</span></div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span><span class="comment">/* USER CODE BEGIN (8) */</span></div>
<div class="line"><span class="lineno">  204</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  205</span> </div>
<div class="line"><span class="lineno">  206</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a45f46deb7644048176d5e9347afb939a" name="a45f46deb7644048176d5e9347afb939a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45f46deb7644048176d5e9347afb939a">&#9670;&#160;</a></span>setupPLL()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setupPLL </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<ul>
<li>Configure PLL control registers</li>
</ul>
<p><b>Initialize</b> <b>Pll1:</b> </p>
<ul>
<li>Setup pll control register 1:</li>
<li>Setup reset on oscillator slip</li>
<li>Setup bypass on pll slip</li>
<li>setup Pll output clock divider to max before Lock</li>
<li>Setup reset on oscillator fail</li>
<li>Setup reference clock divider</li>
<li>Setup Pll multiplier</li>
<li>Setup pll control register 2</li>
<li>Setup spreading rate</li>
<li>Setup bandwidth adjustment</li>
<li>Setup internal Pll output divider</li>
<li>Setup spreading amount</li>
<li>Enable PLL(s) to start up or Lock</li>
</ul>
<div class="fragment"><div class="line"><span class="lineno">   75</span>{</div>
<div class="line"><span class="lineno">   76</span> </div>
<div class="line"><span class="lineno">   77</span><span class="comment">/* USER CODE BEGIN (3) */</span></div>
<div class="line"><span class="lineno">   78</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">   79</span> </div>
<div class="line"><span class="lineno">   80</span>    <span class="comment">/* Disable PLL1 and PLL2 */</span></div>
<div class="line"><span class="lineno">   81</span>    systemREG1-&gt;CSDISSET = 0x00000002U;</div>
<div class="line"><span class="lineno">   82</span>    <span class="comment">/*SAFETYMCUSW 28 D MR:NA &lt;APPROVED&gt; &quot;Hardware status bit read check&quot; */</span></div>
<div class="line"><span class="lineno">   83</span>    <span class="keywordflow">while</span>((systemREG1-&gt;CSDIS &amp; 0x2U) != 0x2U)</div>
<div class="line"><span class="lineno">   84</span>    {</div>
<div class="line"><span class="lineno">   85</span>    <span class="comment">/* Wait */</span></div>
<div class="line"><span class="lineno">   86</span>    }</div>
<div class="line"><span class="lineno">   87</span> </div>
<div class="line"><span class="lineno">   88</span>    <span class="comment">/* Clear Global Status Register */</span></div>
<div class="line"><span class="lineno">   89</span>    systemREG1-&gt;GBLSTAT = 0x301U;</div>
<div class="line"><span class="lineno">   90</span> </div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">  102</span>    systemREG1-&gt;PLLCTL1 =  (uint32)0x00000000U</div>
<div class="line"><span class="lineno">  103</span>                        |  (uint32)0x20000000U</div>
<div class="line"><span class="lineno">  104</span>                        |  (uint32)((uint32)0x1FU &lt;&lt; 24U)</div>
<div class="line"><span class="lineno">  105</span>                        |  (uint32)0x00000000U</div>
<div class="line"><span class="lineno">  106</span>                        |  (uint32)((uint32)(6U - 1U)&lt;&lt; 16U)</div>
<div class="line"><span class="lineno">  107</span>                        |  (uint32)(0x7700U);</div>
<div class="line"><span class="lineno">  108</span> </div>
<div class="line"><span class="lineno">  115</span>    systemREG1-&gt;PLLCTL2 =  (uint32)((uint32)255U &lt;&lt; 22U)</div>
<div class="line"><span class="lineno">  116</span>                        |  (uint32)((uint32)7U &lt;&lt; 12U)</div>
<div class="line"><span class="lineno">  117</span>                        |  (uint32)((uint32)(2U - 1U) &lt;&lt; 9U)</div>
<div class="line"><span class="lineno">  118</span>                        |  (uint32)61U;</div>
<div class="line"><span class="lineno">  119</span> </div>
<div class="line"><span class="lineno">  121</span>    systemREG1-&gt;CSDIS = 0x00000000U</div>
<div class="line"><span class="lineno">  122</span>                      | 0x00000000U</div>
<div class="line"><span class="lineno">  123</span>                      | 0x00000008U</div>
<div class="line"><span class="lineno">  124</span>                      | 0x00000080U</div>
<div class="line"><span class="lineno">  125</span>                      | 0x00000000U</div>
<div class="line"><span class="lineno">  126</span>                      | 0x00000040U</div>
<div class="line"><span class="lineno">  127</span>                      | 0x00000000U;</div>
<div class="line"><span class="lineno">  128</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac61ec208839bdc4fec42ea50268b4db3" name="ac61ec208839bdc4fec42ea50268b4db3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac61ec208839bdc4fec42ea50268b4db3">&#9670;&#160;</a></span>sramGetConfigValue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sramGetConfigValue </td>
          <td>(</td>
          <td class="paramtype">sram_config_reg_t *&#160;</td>
          <td class="paramname"><em>config_reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">config_value_type_t&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the initial or current values of the configuration registers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*config_reg</td><td>pointer to the struct to which the initial or current value of the configuration registers need to be stored </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>whether initial or current value of the configuration registers need to be stored<ul>
<li>InitialValue: initial value of the configuration registers will be stored in the struct pointed by config_reg</li>
<li>CurrentValue: initial value of the configuration registers will be stored in the struct pointed by config_reg</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<p>This function will copy the initial or current value (depending on the parameter 'type') of the configuration registers to the struct pointed by config_reg </p>
<div class="fragment"><div class="line"><span class="lineno">  625</span>{</div>
<div class="line"><span class="lineno">  626</span>    <span class="keywordflow">if</span> (type == InitialValue)</div>
<div class="line"><span class="lineno">  627</span>    {</div>
<div class="line"><span class="lineno">  628</span>        config_reg-&gt;CONFIG_RAMCTRL[0U] = SRAM_RAMCTRL_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  629</span>        config_reg-&gt;CONFIG_RAMTHRESHOLD[0U] = SRAM_RAMTHRESHOLD_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  630</span>        config_reg-&gt;CONFIG_RAMINTCTRL[0U] = SRAM_RAMINTCTRL_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  631</span>        config_reg-&gt;CONFIG_RAMTEST[0U] = SRAM_RAMTEST_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  632</span>        config_reg-&gt;CONFIG_RAMADDRDECVECT[0U] = SRAM_RAMADDRDECVECT_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  633</span> </div>
<div class="line"><span class="lineno">  634</span>        config_reg-&gt;CONFIG_RAMCTRL[1U] = SRAM_RAMCTRL_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  635</span>        config_reg-&gt;CONFIG_RAMTHRESHOLD[1U] = SRAM_RAMTHRESHOLD_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  636</span>        config_reg-&gt;CONFIG_RAMINTCTRL[1U] = SRAM_RAMINTCTRL_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  637</span>        config_reg-&gt;CONFIG_RAMTEST[1U] = SRAM_RAMTEST_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  638</span>        config_reg-&gt;CONFIG_RAMADDRDECVECT[1U] = SRAM_RAMADDRDECVECT_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  639</span>    }</div>
<div class="line"><span class="lineno">  640</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  641</span>    {</div>
<div class="line"><span class="lineno">  642</span>    <span class="comment">/*SAFETYMCUSW 134 S MR:12.2 &lt;APPROVED&gt; &quot;LDRA Tool issue&quot; */</span></div>
<div class="line"><span class="lineno">  643</span>        config_reg-&gt;CONFIG_RAMCTRL[0U] = tcram1REG-&gt;RAMCTRL;</div>
<div class="line"><span class="lineno">  644</span>        config_reg-&gt;CONFIG_RAMTHRESHOLD[0U] = tcram1REG-&gt;RAMTHRESHOLD;</div>
<div class="line"><span class="lineno">  645</span>        config_reg-&gt;CONFIG_RAMINTCTRL[0U] = tcram1REG-&gt;RAMINTCTRL;</div>
<div class="line"><span class="lineno">  646</span>        config_reg-&gt;CONFIG_RAMTEST[0U] = tcram1REG-&gt;RAMTEST;</div>
<div class="line"><span class="lineno">  647</span>        config_reg-&gt;CONFIG_RAMADDRDECVECT[0U] = tcram1REG-&gt;RAMADDRDECVECT;</div>
<div class="line"><span class="lineno">  648</span> </div>
<div class="line"><span class="lineno">  649</span>        <span class="comment">/*SAFETYMCUSW 134 S MR:12.2 &lt;APPROVED&gt; &quot;LDRA Tool issue&quot; */</span></div>
<div class="line"><span class="lineno">  650</span>        config_reg-&gt;CONFIG_RAMCTRL[1U] = tcram2REG-&gt;RAMCTRL;</div>
<div class="line"><span class="lineno">  651</span>        config_reg-&gt;CONFIG_RAMTHRESHOLD[1U] = tcram2REG-&gt;RAMTHRESHOLD;</div>
<div class="line"><span class="lineno">  652</span>        config_reg-&gt;CONFIG_RAMINTCTRL[1U] = tcram2REG-&gt;RAMINTCTRL;</div>
<div class="line"><span class="lineno">  653</span>        config_reg-&gt;CONFIG_RAMTEST[1U] = tcram2REG-&gt;RAMTEST;</div>
<div class="line"><span class="lineno">  654</span>        config_reg-&gt;CONFIG_RAMADDRDECVECT[1U] = tcram2REG-&gt;RAMADDRDECVECT;</div>
<div class="line"><span class="lineno">  655</span>    }</div>
<div class="line"><span class="lineno">  656</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab3c7742b0b313a8ac595a0ae677c3ccc" name="ab3c7742b0b313a8ac595a0ae677c3ccc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3c7742b0b313a8ac595a0ae677c3ccc">&#9670;&#160;</a></span>systemGetConfigValue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void systemGetConfigValue </td>
          <td>(</td>
          <td class="paramtype">system_config_reg_t *&#160;</td>
          <td class="paramname"><em>config_reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">config_value_type_t&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the initial or current values of the configuration registers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*config_reg</td><td>pointer to the struct to which the initial or current value of the configuration registers need to be stored </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>whether initial or current value of the configuration registers need to be stored<ul>
<li>InitialValue: initial value of the configuration registers will be stored in the struct pointed by config_reg</li>
<li>CurrentValue: initial value of the configuration registers will be stored in the struct pointed by config_reg</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<p>This function will copy the initial or current value (depending on the parameter 'type') of the configuration registers to the struct pointed by config_reg </p>
<div class="fragment"><div class="line"><span class="lineno">  472</span>{</div>
<div class="line"><span class="lineno">  473</span>    <span class="keywordflow">if</span> (type == InitialValue)</div>
<div class="line"><span class="lineno">  474</span>    {</div>
<div class="line"><span class="lineno">  475</span>        config_reg-&gt;CONFIG_SYSPC1 = SYS_SYSPC1_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  476</span>        config_reg-&gt;CONFIG_SYSPC2 = SYS_SYSPC2_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  477</span>        config_reg-&gt;CONFIG_SYSPC7 = SYS_SYSPC7_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  478</span>        config_reg-&gt;CONFIG_SYSPC8 = SYS_SYSPC8_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  479</span>        config_reg-&gt;CONFIG_SYSPC9 = SYS_SYSPC9_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  480</span>        config_reg-&gt;CONFIG_CSDIS = SYS_CSDIS_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  481</span>        config_reg-&gt;CONFIG_CDDIS = SYS_CDDIS_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  482</span>        config_reg-&gt;CONFIG_GHVSRC = SYS_GHVSRC_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  483</span>        config_reg-&gt;CONFIG_VCLKASRC = SYS_VCLKASRC_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  484</span>        config_reg-&gt;CONFIG_RCLKSRC = SYS_RCLKSRC_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  485</span>        config_reg-&gt;CONFIG_MSTGCR = SYS_MSTGCR_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  486</span>        config_reg-&gt;CONFIG_MINITGCR = SYS_MINITGCR_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  487</span>        config_reg-&gt;CONFIG_MSINENA = SYS_MSINENA_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  488</span>        config_reg-&gt;CONFIG_PLLCTL1 = SYS_PLLCTL1_CONFIGVALUE_2;</div>
<div class="line"><span class="lineno">  489</span>        config_reg-&gt;CONFIG_PLLCTL2 = SYS_PLLCTL2_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  490</span>        config_reg-&gt;CONFIG_UERFLAG = SYS_UERFLAG_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  491</span>        <span class="comment">/*SAFETYMCUSW 139 S MR:13.7 &lt;APPROVED&gt; &quot;Hardware status bit read check&quot; */</span></div>
<div class="line"><span class="lineno">  492</span>        <span class="keywordflow">if</span>(LPO_TRIM_VALUE != 0xFFFFU)</div>
<div class="line"><span class="lineno">  493</span>        {</div>
<div class="line"><span class="lineno">  494</span>            config_reg-&gt;CONFIG_LPOMONCTL = SYS_LPOMONCTL_CONFIGVALUE_1;</div>
<div class="line"><span class="lineno">  495</span>        }</div>
<div class="line"><span class="lineno">  496</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  497</span>        {</div>
<div class="line"><span class="lineno">  498</span>            config_reg-&gt;CONFIG_LPOMONCTL = SYS_LPOMONCTL_CONFIGVALUE_2;</div>
<div class="line"><span class="lineno">  499</span>        }</div>
<div class="line"><span class="lineno">  500</span>        config_reg-&gt;CONFIG_CLKTEST = SYS_CLKTEST_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  501</span>        config_reg-&gt;CONFIG_DFTCTRLREG1 = SYS_DFTCTRLREG1_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  502</span>        config_reg-&gt;CONFIG_DFTCTRLREG2 = SYS_DFTCTRLREG2_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  503</span>        config_reg-&gt;CONFIG_GPREG1 = SYS_GPREG1_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  504</span>        config_reg-&gt;CONFIG_RAMGCR = SYS_RAMGCR_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  505</span>        config_reg-&gt;CONFIG_BMMCR1 = SYS_BMMCR1_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  506</span>        config_reg-&gt;CONFIG_MMUGCR = SYS_MMUGCR_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  507</span>        config_reg-&gt;CONFIG_CLKCNTL = SYS_CLKCNTL_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  508</span>        config_reg-&gt;CONFIG_ECPCNTL = SYS_ECPCNTL_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  509</span>        config_reg-&gt;CONFIG_DEVCR1 = SYS_DEVCR1_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  510</span>        config_reg-&gt;CONFIG_SYSECR = SYS_SYSECR_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  511</span> </div>
<div class="line"><span class="lineno">  512</span>        config_reg-&gt;CONFIG_STCCLKDIV = SYS2_STCCLKDIV_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  513</span>        config_reg-&gt;CONFIG_CLKSLIP = SYS2_CLKSLIP_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  514</span>        config_reg-&gt;CONFIG_EFC_CTLEN = SYS2_EFC_CTLEN_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  515</span>    }</div>
<div class="line"><span class="lineno">  516</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  517</span>    {</div>
<div class="line"><span class="lineno">  518</span>    <span class="comment">/*SAFETYMCUSW 134 S MR:12.2 &lt;APPROVED&gt; &quot;LDRA Tool issue&quot; */</span></div>
<div class="line"><span class="lineno">  519</span>        config_reg-&gt;CONFIG_SYSPC1 = systemREG1-&gt;SYSPC1;</div>
<div class="line"><span class="lineno">  520</span>        config_reg-&gt;CONFIG_SYSPC2 = systemREG1-&gt;SYSPC2;</div>
<div class="line"><span class="lineno">  521</span>        config_reg-&gt;CONFIG_SYSPC7 = systemREG1-&gt;SYSPC7;</div>
<div class="line"><span class="lineno">  522</span>        config_reg-&gt;CONFIG_SYSPC8 = systemREG1-&gt;SYSPC8;</div>
<div class="line"><span class="lineno">  523</span>        config_reg-&gt;CONFIG_SYSPC9 = systemREG1-&gt;SYSPC9;</div>
<div class="line"><span class="lineno">  524</span>        config_reg-&gt;CONFIG_CSDIS = systemREG1-&gt;CSDIS;</div>
<div class="line"><span class="lineno">  525</span>        config_reg-&gt;CONFIG_CDDIS = systemREG1-&gt;CDDIS;</div>
<div class="line"><span class="lineno">  526</span>        config_reg-&gt;CONFIG_GHVSRC = systemREG1-&gt;GHVSRC;</div>
<div class="line"><span class="lineno">  527</span>        config_reg-&gt;CONFIG_VCLKASRC = systemREG1-&gt;VCLKASRC;</div>
<div class="line"><span class="lineno">  528</span>        config_reg-&gt;CONFIG_RCLKSRC = systemREG1-&gt;RCLKSRC;</div>
<div class="line"><span class="lineno">  529</span>        config_reg-&gt;CONFIG_MSTGCR = systemREG1-&gt;MSTGCR;</div>
<div class="line"><span class="lineno">  530</span>        config_reg-&gt;CONFIG_MINITGCR = systemREG1-&gt;MINITGCR;</div>
<div class="line"><span class="lineno">  531</span>        config_reg-&gt;CONFIG_MSINENA = systemREG1-&gt;MSINENA;</div>
<div class="line"><span class="lineno">  532</span>        config_reg-&gt;CONFIG_PLLCTL1 = systemREG1-&gt;PLLCTL1;</div>
<div class="line"><span class="lineno">  533</span>        config_reg-&gt;CONFIG_PLLCTL2 = systemREG1-&gt;PLLCTL2;</div>
<div class="line"><span class="lineno">  534</span>        config_reg-&gt;CONFIG_UERFLAG = systemREG1-&gt;SYSPC10;</div>
<div class="line"><span class="lineno">  535</span>        config_reg-&gt;CONFIG_LPOMONCTL = systemREG1-&gt;LPOMONCTL;</div>
<div class="line"><span class="lineno">  536</span>        config_reg-&gt;CONFIG_CLKTEST = systemREG1-&gt;CLKTEST;</div>
<div class="line"><span class="lineno">  537</span>        config_reg-&gt;CONFIG_DFTCTRLREG1 = systemREG1-&gt;DFTCTRLREG1;</div>
<div class="line"><span class="lineno">  538</span>        config_reg-&gt;CONFIG_DFTCTRLREG2 = systemREG1-&gt;DFTCTRLREG2;</div>
<div class="line"><span class="lineno">  539</span>        config_reg-&gt;CONFIG_GPREG1 = systemREG1-&gt;GPREG1;</div>
<div class="line"><span class="lineno">  540</span>        config_reg-&gt;CONFIG_RAMGCR = systemREG1-&gt;RAMGCR;</div>
<div class="line"><span class="lineno">  541</span>        config_reg-&gt;CONFIG_BMMCR1 = systemREG1-&gt;BMMCR1;</div>
<div class="line"><span class="lineno">  542</span>        config_reg-&gt;CONFIG_MMUGCR = systemREG1-&gt;CPURSTCR;</div>
<div class="line"><span class="lineno">  543</span>        config_reg-&gt;CONFIG_CLKCNTL = systemREG1-&gt;CLKCNTL;</div>
<div class="line"><span class="lineno">  544</span>        config_reg-&gt;CONFIG_ECPCNTL = systemREG1-&gt;ECPCNTL;</div>
<div class="line"><span class="lineno">  545</span>        config_reg-&gt;CONFIG_DEVCR1 = systemREG1-&gt;DEVCR1;</div>
<div class="line"><span class="lineno">  546</span>        config_reg-&gt;CONFIG_SYSECR = systemREG1-&gt;SYSECR;</div>
<div class="line"><span class="lineno">  547</span> </div>
<div class="line"><span class="lineno">  548</span>        <span class="comment">/*SAFETYMCUSW 134 S MR:12.2 &lt;APPROVED&gt; &quot;LDRA Tool issue&quot; */</span></div>
<div class="line"><span class="lineno">  549</span>        config_reg-&gt;CONFIG_STCCLKDIV = systemREG2-&gt;STCCLKDIV;</div>
<div class="line"><span class="lineno">  550</span>        config_reg-&gt;CONFIG_CLKSLIP = systemREG2-&gt;CLKSLIP;</div>
<div class="line"><span class="lineno">  551</span>        config_reg-&gt;CONFIG_EFC_CTLEN = systemREG2-&gt;EFC_CTLEN;</div>
<div class="line"><span class="lineno">  552</span>    }</div>
<div class="line"><span class="lineno">  553</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab11a117f1e08391f23d1da05930e7acf" name="ab11a117f1e08391f23d1da05930e7acf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab11a117f1e08391f23d1da05930e7acf">&#9670;&#160;</a></span>systemInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void systemInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes System Driver. </p>
<p>This function initializes the System driver. </p>
<ul>
<li>Set up flash address and data wait states based on the target CPU clock frequency The number of address and data wait states for the target CPU clock frequency are specified in the specific part's datasheet.</li>
<li>Configure the LPO such that HF LPO is as close to 10MHz as possible</li>
<li>Wait for PLLs to start up and map clock domains to desired clock sources</li>
<li>set ECLK pins functional mode</li>
<li>set ECLK pins default output value</li>
<li>set ECLK pins output direction</li>
<li>set ECLK pins open drain enable</li>
<li>set ECLK pins pullup/pulldown enable</li>
<li>set ECLK pins pullup/pulldown select</li>
<li>Setup ECLK</li>
</ul>
<div class="fragment"><div class="line"><span class="lineno">  318</span>{</div>
<div class="line"><span class="lineno">  319</span>    uint32 efcCheckStatus;</div>
<div class="line"><span class="lineno">  320</span> </div>
<div class="line"><span class="lineno">  321</span><span class="comment">/* USER CODE BEGIN (15) */</span></div>
<div class="line"><span class="lineno">  322</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  323</span> </div>
<div class="line"><span class="lineno">  324</span>    <span class="comment">/* Configure PLL control registers and enable PLLs.</span></div>
<div class="line"><span class="lineno">  325</span><span class="comment">     * The PLL takes (127 + 1024 * NR) oscillator cycles to acquire lock.</span></div>
<div class="line"><span class="lineno">  326</span><span class="comment">     * This initialization sequence performs all the tasks that are not</span></div>
<div class="line"><span class="lineno">  327</span><span class="comment">     * required to be done at full application speed while the PLL locks.</span></div>
<div class="line"><span class="lineno">  328</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  329</span>    <a class="code hl_function" href="system_8c.html#a45f46deb7644048176d5e9347afb939a">setupPLL</a>();</div>
<div class="line"><span class="lineno">  330</span> </div>
<div class="line"><span class="lineno">  331</span><span class="comment">/* USER CODE BEGIN (16) */</span></div>
<div class="line"><span class="lineno">  332</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  333</span> </div>
<div class="line"><span class="lineno">  334</span>    <span class="comment">/* Run eFuse controller start-up checks and start eFuse controller ECC self-test.</span></div>
<div class="line"><span class="lineno">  335</span><span class="comment">     * This includes a check for the eFuse controller error outputs to be stuck-at-zero.</span></div>
<div class="line"><span class="lineno">  336</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  337</span>    efcCheckStatus = <a class="code hl_function" href="sys__selftest_8c.html#a646eb27315f3ce47edde97c563389f76">efcCheck</a>();</div>
<div class="line"><span class="lineno">  338</span> </div>
<div class="line"><span class="lineno">  339</span><span class="comment">/* USER CODE BEGIN (17) */</span></div>
<div class="line"><span class="lineno">  340</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  341</span> </div>
<div class="line"><span class="lineno">  342</span>    <span class="comment">/* Enable clocks to peripherals and release peripheral reset */</span></div>
<div class="line"><span class="lineno">  343</span>    <a class="code hl_function" href="system_8c.html#a57d84f612fd0d9fec4cd8ac58b5d10c3">periphInit</a>();</div>
<div class="line"><span class="lineno">  344</span> </div>
<div class="line"><span class="lineno">  345</span><span class="comment">/* USER CODE BEGIN (18) */</span></div>
<div class="line"><span class="lineno">  346</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  347</span> </div>
<div class="line"><span class="lineno">  348</span>    <span class="comment">/* Configure device-level multiplexing and I/O multiplexing */</span></div>
<div class="line"><span class="lineno">  349</span>    muxInit();</div>
<div class="line"><span class="lineno">  350</span> </div>
<div class="line"><span class="lineno">  351</span><span class="comment">/* USER CODE BEGIN (19) */</span></div>
<div class="line"><span class="lineno">  352</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  353</span> </div>
<div class="line"><span class="lineno">  354</span>    <span class="keywordflow">if</span>(efcCheckStatus == 0U)</div>
<div class="line"><span class="lineno">  355</span>    {</div>
<div class="line"><span class="lineno">  356</span>        <span class="comment">/* Wait for eFuse controller self-test to complete and check results */</span></div>
<div class="line"><span class="lineno">  357</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="sys__selftest_8c.html#ad44409ae54516ba10303dd5c011f4fa6">checkefcSelfTest</a>() == FALSE)                            <span class="comment">/* eFuse controller ECC logic self-test failed */</span></div>
<div class="line"><span class="lineno">  358</span>        {</div>
<div class="line"><span class="lineno">  359</span>            <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(EFCCHECK_FAIL1);           <span class="comment">/* device operation is not reliable */</span></div>
<div class="line"><span class="lineno">  360</span>        }</div>
<div class="line"><span class="lineno">  361</span>    }</div>
<div class="line"><span class="lineno">  362</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(efcCheckStatus == 2U)</div>
<div class="line"><span class="lineno">  363</span>    {</div>
<div class="line"><span class="lineno">  364</span>        <span class="comment">/* Wait for eFuse controller self-test to complete and check results */</span></div>
<div class="line"><span class="lineno">  365</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="sys__selftest_8c.html#ad44409ae54516ba10303dd5c011f4fa6">checkefcSelfTest</a>() == FALSE)                            <span class="comment">/* eFuse controller ECC logic self-test failed */</span></div>
<div class="line"><span class="lineno">  366</span>        {</div>
<div class="line"><span class="lineno">  367</span>            <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(EFCCHECK_FAIL1);           <span class="comment">/* device operation is not reliable */</span></div>
<div class="line"><span class="lineno">  368</span>        }</div>
<div class="line"><span class="lineno">  369</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  370</span>        {</div>
<div class="line"><span class="lineno">  371</span>            <a class="code hl_function" href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a>(EFCCHECK_FAIL2);</div>
<div class="line"><span class="lineno">  372</span>        }</div>
<div class="line"><span class="lineno">  373</span>    }</div>
<div class="line"><span class="lineno">  374</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  375</span>    {</div>
<div class="line"><span class="lineno">  376</span>    <span class="comment">/* Empty */</span></div>
<div class="line"><span class="lineno">  377</span>    }</div>
<div class="line"><span class="lineno">  378</span><span class="comment">/* USER CODE BEGIN (20) */</span></div>
<div class="line"><span class="lineno">  379</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  380</span> </div>
<div class="line"><span class="lineno">  385</span>    <a class="code hl_function" href="system_8c.html#a4490b16ad7d041537868dc9732b3dac2">setupFlash</a>();</div>
<div class="line"><span class="lineno">  386</span> </div>
<div class="line"><span class="lineno">  387</span><span class="comment">/* USER CODE BEGIN (21) */</span></div>
<div class="line"><span class="lineno">  388</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  389</span> </div>
<div class="line"><span class="lineno">  391</span>    <a class="code hl_function" href="system_8c.html#aaa231cc5e90591363431c63f15360567">trimLPO</a>();</div>
<div class="line"><span class="lineno">  392</span> </div>
<div class="line"><span class="lineno">  393</span> </div>
<div class="line"><span class="lineno">  394</span> </div>
<div class="line"><span class="lineno">  395</span><span class="comment">/* USER CODE BEGIN (23) */</span></div>
<div class="line"><span class="lineno">  396</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  397</span> </div>
<div class="line"><span class="lineno">  399</span>    <a class="code hl_function" href="system_8c.html#aa26c333cac9e8481986232eb8f0d9244">mapClocks</a>();</div>
<div class="line"><span class="lineno">  400</span> </div>
<div class="line"><span class="lineno">  401</span><span class="comment">/* USER CODE BEGIN (24) */</span></div>
<div class="line"><span class="lineno">  402</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  403</span> </div>
<div class="line"><span class="lineno">  405</span>    systemREG1-&gt;SYSPC1 = 0U;</div>
<div class="line"><span class="lineno">  406</span> </div>
<div class="line"><span class="lineno">  408</span>    systemREG1-&gt;SYSPC4 = 0U;</div>
<div class="line"><span class="lineno">  409</span> </div>
<div class="line"><span class="lineno">  411</span>    systemREG1-&gt;SYSPC2 = 1U;</div>
<div class="line"><span class="lineno">  412</span> </div>
<div class="line"><span class="lineno">  414</span>    systemREG1-&gt;SYSPC7 = 0U;</div>
<div class="line"><span class="lineno">  415</span> </div>
<div class="line"><span class="lineno">  417</span>    systemREG1-&gt;SYSPC8 = 0U;</div>
<div class="line"><span class="lineno">  418</span> </div>
<div class="line"><span class="lineno">  420</span>    systemREG1-&gt;SYSPC9 = 1U;</div>
<div class="line"><span class="lineno">  421</span> </div>
<div class="line"><span class="lineno">  423</span>    systemREG1-&gt;ECPCNTL = (uint32)((uint32)0U &lt;&lt; 24U)</div>
<div class="line"><span class="lineno">  424</span>                        | (uint32)((uint32)0U &lt;&lt; 23U)</div>
<div class="line"><span class="lineno">  425</span>                        | (uint32)((uint32)(8U - 1U) &amp; 0xFFFFU);</div>
<div class="line"><span class="lineno">  426</span> </div>
<div class="line"><span class="lineno">  427</span><span class="comment">/* USER CODE BEGIN (25) */</span></div>
<div class="line"><span class="lineno">  428</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  429</span>}</div>
<div class="ttc" id="asys__selftest_8c_html_a646eb27315f3ce47edde97c563389f76"><div class="ttname"><a href="sys__selftest_8c.html#a646eb27315f3ce47edde97c563389f76">efcCheck</a></div><div class="ttdeci">uint32 efcCheck(void)</div><div class="ttdoc">EFUSE module self check Driver.</div><div class="ttdef"><b>Definition:</b> sys_selftest.c:578</div></div>
<div class="ttc" id="asys__selftest_8c_html_ad44409ae54516ba10303dd5c011f4fa6"><div class="ttname"><a href="sys__selftest_8c.html#ad44409ae54516ba10303dd5c011f4fa6">checkefcSelfTest</a></div><div class="ttdeci">boolean checkefcSelfTest(void)</div><div class="ttdoc">EFUSE module self check Driver.</div><div class="ttdef"><b>Definition:</b> sys_selftest.c:717</div></div>
<div class="ttc" id="asys__selftest_8c_html_ae96e990763ae7d45bd55ea5a27299a47"><div class="ttname"><a href="sys__selftest_8c.html#ae96e990763ae7d45bd55ea5a27299a47">selftestFailNotification</a></div><div class="ttdeci">void selftestFailNotification(uint32 flag)</div><div class="ttdoc">Self test fail service routine.</div><div class="ttdef"><b>Definition:</b> sys_selftest.c:58</div></div>
<div class="ttc" id="asystem_8c_html_a4490b16ad7d041537868dc9732b3dac2"><div class="ttname"><a href="system_8c.html#a4490b16ad7d041537868dc9732b3dac2">setupFlash</a></div><div class="ttdeci">void setupFlash(void)</div><div class="ttdef"><b>Definition:</b> system.c:175</div></div>
<div class="ttc" id="asystem_8c_html_a45f46deb7644048176d5e9347afb939a"><div class="ttname"><a href="system_8c.html#a45f46deb7644048176d5e9347afb939a">setupPLL</a></div><div class="ttdeci">void setupPLL(void)</div><div class="ttdef"><b>Definition:</b> system.c:74</div></div>
<div class="ttc" id="asystem_8c_html_a57d84f612fd0d9fec4cd8ac58b5d10c3"><div class="ttname"><a href="system_8c.html#a57d84f612fd0d9fec4cd8ac58b5d10c3">periphInit</a></div><div class="ttdeci">void periphInit(void)</div><div class="ttdef"><b>Definition:</b> system.c:211</div></div>
<div class="ttc" id="asystem_8c_html_aa26c333cac9e8481986232eb8f0d9244"><div class="ttname"><a href="system_8c.html#aa26c333cac9e8481986232eb8f0d9244">mapClocks</a></div><div class="ttdeci">void mapClocks(void)</div><div class="ttdef"><b>Definition:</b> system.c:238</div></div>
<div class="ttc" id="asystem_8c_html_aaa231cc5e90591363431c63f15360567"><div class="ttname"><a href="system_8c.html#aaa231cc5e90591363431c63f15360567">trimLPO</a></div><div class="ttdeci">void trimLPO(void)</div><div class="ttdoc">Initialize LPO trim values.</div><div class="ttdef"><b>Definition:</b> system.c:139</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af970bbab0b866f007e84e236cb1654e9" name="af970bbab0b866f007e84e236cb1654e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af970bbab0b866f007e84e236cb1654e9">&#9670;&#160;</a></span>systemPowerDown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void systemPowerDown </td>
          <td>(</td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  435</span>{</div>
<div class="line"><span class="lineno">  436</span> </div>
<div class="line"><span class="lineno">  437</span><span class="comment">/* USER CODE BEGIN (26) */</span></div>
<div class="line"><span class="lineno">  438</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  439</span> </div>
<div class="line"><span class="lineno">  440</span>    <span class="comment">/* Disable clock sources */</span></div>
<div class="line"><span class="lineno">  441</span>    systemREG1-&gt;CSDISSET = mode &amp; 0x000000FFU;</div>
<div class="line"><span class="lineno">  442</span> </div>
<div class="line"><span class="lineno">  443</span>    <span class="comment">/* Disable clock domains */</span></div>
<div class="line"><span class="lineno">  444</span>    systemREG1-&gt;CDDIS = (mode &gt;&gt; 8U) &amp; 0x00000FFFU;</div>
<div class="line"><span class="lineno">  445</span> </div>
<div class="line"><span class="lineno">  446</span>    <span class="comment">/* Idle CPU */</span></div>
<div class="line"><span class="lineno">  447</span>    _gotoCPUIdle_();</div>
<div class="line"><span class="lineno">  448</span> </div>
<div class="line"><span class="lineno">  449</span><span class="comment">/* USER CODE BEGIN (27) */</span></div>
<div class="line"><span class="lineno">  450</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  451</span> </div>
<div class="line"><span class="lineno">  452</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="afa983f739f63d48487aec38706af5a6f" name="afa983f739f63d48487aec38706af5a6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa983f739f63d48487aec38706af5a6f">&#9670;&#160;</a></span>tcmflashGetConfigValue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tcmflashGetConfigValue </td>
          <td>(</td>
          <td class="paramtype">tcmflash_config_reg_t *&#160;</td>
          <td class="paramname"><em>config_reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">config_value_type_t&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the initial or current values of the configuration registers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*config_reg</td><td>pointer to the struct to which the initial or current value of the configuration registers need to be stored </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>whether initial or current value of the configuration registers need to be stored<ul>
<li>InitialValue: initial value of the configuration registers will be stored in the struct pointed by config_reg</li>
<li>CurrentValue: initial value of the configuration registers will be stored in the struct pointed by config_reg</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<p>This function will copy the initial or current value (depending on the parameter 'type') of the configuration registers to the struct pointed by config_reg </p>
<div class="fragment"><div class="line"><span class="lineno">  570</span>{</div>
<div class="line"><span class="lineno">  571</span>    <span class="keywordflow">if</span> (type == InitialValue)</div>
<div class="line"><span class="lineno">  572</span>    {</div>
<div class="line"><span class="lineno">  573</span>        config_reg-&gt;CONFIG_FRDCNTL = TCMFLASH_FRDCNTL_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  574</span>        config_reg-&gt;CONFIG_FEDACCTRL1 = TCMFLASH_FEDACCTRL1_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  575</span>        config_reg-&gt;CONFIG_FEDACCTRL2 = TCMFLASH_FEDACCTRL2_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  576</span>        config_reg-&gt;CONFIG_FEDACSDIS = TCMFLASH_FEDACSDIS_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  577</span>        config_reg-&gt;CONFIG_FBPROT = TCMFLASH_FBPROT_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  578</span>        config_reg-&gt;CONFIG_FBSE = TCMFLASH_FBSE_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  579</span>        config_reg-&gt;CONFIG_FBAC = TCMFLASH_FBAC_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  580</span>        config_reg-&gt;CONFIG_FBFALLBACK = TCMFLASH_FBFALLBACK_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  581</span>        config_reg-&gt;CONFIG_FPAC1 = TCMFLASH_FPAC1_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  582</span>        config_reg-&gt;CONFIG_FPAC2 = TCMFLASH_FPAC2_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  583</span>        config_reg-&gt;CONFIG_FMAC = TCMFLASH_FMAC_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  584</span>        config_reg-&gt;CONFIG_FLOCK = TCMFLASH_FLOCK_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  585</span>        config_reg-&gt;CONFIG_FDIAGCTRL = TCMFLASH_FDIAGCTRL_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  586</span>        config_reg-&gt;CONFIG_FEDACSDIS2 = TCMFLASH_FEDACSDIS2_CONFIGVALUE;</div>
<div class="line"><span class="lineno">  587</span>    }</div>
<div class="line"><span class="lineno">  588</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  589</span>    {</div>
<div class="line"><span class="lineno">  590</span>    <span class="comment">/*SAFETYMCUSW 134 S MR:12.2 &lt;APPROVED&gt; &quot;LDRA Tool issue&quot; */</span></div>
<div class="line"><span class="lineno">  591</span>        config_reg-&gt;CONFIG_FRDCNTL = flashWREG-&gt;FRDCNTL;</div>
<div class="line"><span class="lineno">  592</span>        config_reg-&gt;CONFIG_FEDACCTRL1 = flashWREG-&gt;FEDACCTRL1;</div>
<div class="line"><span class="lineno">  593</span>        config_reg-&gt;CONFIG_FEDACCTRL2 = flashWREG-&gt;FEDACCTRL2;</div>
<div class="line"><span class="lineno">  594</span>        config_reg-&gt;CONFIG_FEDACSDIS = flashWREG-&gt;FEDACSDIS;</div>
<div class="line"><span class="lineno">  595</span>        config_reg-&gt;CONFIG_FBPROT = flashWREG-&gt;FBPROT;</div>
<div class="line"><span class="lineno">  596</span>        config_reg-&gt;CONFIG_FBSE = flashWREG-&gt;FBSE;</div>
<div class="line"><span class="lineno">  597</span>        config_reg-&gt;CONFIG_FBAC = flashWREG-&gt;FBAC;</div>
<div class="line"><span class="lineno">  598</span>        config_reg-&gt;CONFIG_FBFALLBACK = flashWREG-&gt;FBFALLBACK;</div>
<div class="line"><span class="lineno">  599</span>        config_reg-&gt;CONFIG_FPAC1 = flashWREG-&gt;FPAC1;</div>
<div class="line"><span class="lineno">  600</span>        config_reg-&gt;CONFIG_FPAC2 = flashWREG-&gt;FPAC2;</div>
<div class="line"><span class="lineno">  601</span>        config_reg-&gt;CONFIG_FMAC = flashWREG-&gt;FMAC;</div>
<div class="line"><span class="lineno">  602</span>        config_reg-&gt;CONFIG_FLOCK = flashWREG-&gt;FLOCK;</div>
<div class="line"><span class="lineno">  603</span>        config_reg-&gt;CONFIG_FDIAGCTRL = flashWREG-&gt;FDIAGCTRL;</div>
<div class="line"><span class="lineno">  604</span>        config_reg-&gt;CONFIG_FEDACSDIS2 = flashWREG-&gt;FEDACSDIS2;</div>
<div class="line"><span class="lineno">  605</span>    }</div>
<div class="line"><span class="lineno">  606</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aaa231cc5e90591363431c63f15360567" name="aaa231cc5e90591363431c63f15360567"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa231cc5e90591363431c63f15360567">&#9670;&#160;</a></span>trimLPO()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trimLPO </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize LPO trim values. </p>
<p>Load TRIM values from OTP if present else call <a class="el" href="system_8c.html#ac357ba2b9a5627af15fa7be057fffd06" title="custom function to initilize LPO trim values">customTrimLPO()</a> function </p>
<div class="fragment"><div class="line"><span class="lineno">  140</span>{</div>
<div class="line"><span class="lineno">  141</span>uint32 u32clocktestConfig;</div>
<div class="line"><span class="lineno">  142</span><span class="comment">/* Save user clocktest register configuration */</span></div>
<div class="line"><span class="lineno">  143</span>u32clocktestConfig = systemREG1-&gt;CLKTEST;</div>
<div class="line"><span class="lineno">  144</span><span class="comment">/* USER CODE BEGIN (4) */</span></div>
<div class="line"><span class="lineno">  145</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  146</span>    <span class="comment">/*The TRM states OTP TRIM value should be stepped to avoid large changes in the HF LPO clock that would result in a LPOCLKMON fault. At issue is the TRM does not specify what the maximum step is so there is no metric to use for the SW implementation - the routine can temporarily disable the LPOCLKMON range check so the sudden change will not cause a fault.*/</span></div>
<div class="line"><span class="lineno">  147</span>    <span class="comment">/* Disable clock range detection*/</span></div>
<div class="line"><span class="lineno">  148</span>    systemREG1-&gt;CLKTEST = (systemREG1-&gt;CLKTEST </div>
<div class="line"><span class="lineno">  149</span>                        | (uint32)((uint32)0x1U &lt;&lt; 24U))        </div>
<div class="line"><span class="lineno">  150</span>                        &amp; ((uint32)(~((uint32)0x1U &lt;&lt; 25U)));                        </div>
<div class="line"><span class="lineno">  151</span>    </div>
<div class="line"><span class="lineno">  152</span>    <span class="comment">/*SAFETYMCUSW 139 S MR:13.7 &lt;APPROVED&gt; &quot;Hardware status bit read check&quot; */</span></div>
<div class="line"><span class="lineno">  153</span>    <span class="keywordflow">if</span>(LPO_TRIM_VALUE != 0xFFFFU)</div>
<div class="line"><span class="lineno">  154</span>    {</div>
<div class="line"><span class="lineno">  155</span> </div>
<div class="line"><span class="lineno">  156</span>        systemREG1-&gt;LPOMONCTL  = (uint32)((uint32)1U &lt;&lt; 24U)</div>
<div class="line"><span class="lineno">  157</span>                               | (uint32)((uint32)LPO_TRIM_VALUE);</div>
<div class="line"><span class="lineno">  158</span>    }</div>
<div class="line"><span class="lineno">  159</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  160</span>    {</div>
<div class="line"><span class="lineno">  161</span>        <a class="code hl_function" href="system_8c.html#ac357ba2b9a5627af15fa7be057fffd06">customTrimLPO</a>();</div>
<div class="line"><span class="lineno">  162</span>    }</div>
<div class="line"><span class="lineno">  163</span>    </div>
<div class="line"><span class="lineno">  164</span>    <span class="comment">/* Restore the user clocktest register value configuration */</span></div>
<div class="line"><span class="lineno">  165</span>    systemREG1-&gt;CLKTEST = u32clocktestConfig;</div>
<div class="line"><span class="lineno">  166</span> </div>
<div class="line"><span class="lineno">  167</span><span class="comment">/* USER CODE BEGIN (5) */</span></div>
<div class="line"><span class="lineno">  168</span><span class="comment">/* USER CODE END */</span></div>
<div class="line"><span class="lineno">  169</span> </div>
<div class="line"><span class="lineno">  170</span>}</div>
<div class="ttc" id="asystem_8c_html_ac357ba2b9a5627af15fa7be057fffd06"><div class="ttname"><a href="system_8c.html#ac357ba2b9a5627af15fa7be057fffd06">customTrimLPO</a></div><div class="ttdeci">void customTrimLPO(void)</div><div class="ttdoc">custom function to initilize LPO trim values</div><div class="ttdef"><b>Definition:</b> system.c:665</div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
